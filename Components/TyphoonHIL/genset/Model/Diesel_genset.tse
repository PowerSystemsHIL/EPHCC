version = 4.2


//
// Model name: Diesel_genset
// Saved by sw version: 2016.3
// Save timestamp: 07-Dec-2016 @ 10:27:03 AM
//

model "Diesel_genset" {
    configuration {
        hil_device = "HIL 100"
        hil_configuration_id = 1
        simulation_method = exact
        simulation_time_step = 2e-6
        dsp_timer_periods = 100e-6, 50e-3
        ss_calc_method = "systematic elimination"
        enb_pole_shift = True
        enb_gds_oversampling = True
        show_modes = False
        cpl_stb = False
        enb_dep_sw_detect = False
        code_section = "internal memory"
        data_section = "internal memory"
        sys_sp_rate_1 = 0.0001
        sys_sp_rate_2 = 0.05
        sys_cpu_optimization = "high"
        user_cpu_optimization = "high"
    }

    
    component Subsystem "Root" {

        
        component pas_inductor "L4" {
            
            inductance = "Ll_mach"
	    
        }
        [
            position = 9032, 8168
        ]
        
        component pas_inductor "L50" {
            
            inductance = "Ll_mach"
	    
        }
        [
            position = 9032, 8072
        ]
        
        component pas_resistor "R13" {
            
            resistance = "Rl_mach"
	    
        }
        [
            position = 8912, 8072
        ]
        
        component pas_resistor "R66" {
            
            resistance = "Rl_mach"
	    
        }
        [
            position = 8912, 8168
        ]
        
        component pas_resistor "R67" {
            
            resistance = "Rl_mach"
	    
        }
        [
            position = 8912, 7976
        ]
        
        component pas_inductor "L51" {
            
            inductance = "Ll_mach"
	    
        }
        [
            position = 9032, 7976
        ]
        
        component src_voltage_3ph "Vs1" {
            
	    
        }
        [
            position = 8096, 8072
        ]
        
        component ctc_tpst "GCB" {
            
            ctrl_src = "Model"
	    
        }
        [
            position = 8752, 8072
        ]
        
        component src_ground "gnd6" {
            
	    
        }
        [
            position = 8000, 8184
        ]
        
        component pas_inductor "L54" {
            
            inductance = "0.0626"
	    
        }
        [
            position = 8672, 8360
            rotation = right
        ]
        
        component src_ground "gnd5" {
            
	    
        }
        [
            position = 8616, 8472
        ]
        
        component pas_resistor "R69" {
            
            resistance = "48.7257"
	    
        }
        [
            position = 8672, 8264
            rotation = right
        ]
        
        component pas_resistor "R70" {
            
            resistance = "48.7257"
	    
        }
        [
            position = 8560, 8264
            rotation = right
        ]
        
        component pas_resistor "R68" {
            
            resistance = "48.7257"
	    
        }
        [
            position = 8616, 8264
            rotation = right
        ]
        
        component pas_inductor "L52" {
            
            inductance = "0.0626"
	    
        }
        [
            position = 8560, 8360
            rotation = right
        ]
        
        component pas_inductor "L53" {
            
            inductance = "0.0626"
	    
        }
        [
            position = 8616, 8360
            rotation = right
        ]
        
        component ctc_tpst "MCB" {
            
            ctrl_src = "Model"
	    
        }
        [
            position = 8328, 8072
        ]
        
        component msr_current "If" {
            
	    
        }
        [
            position = 9624, 7968
            scale = -1, 1
        ]
        
        component mchn_wrsync "Gen1" {
            
            Jm = "J_gen1"
            Llfd = "Llfd_prime_gen1"
            Llkd = "Llkd_gen1"
            Llkq = "Llkq_gen1"
            Lls = "Lls_gen1"
            Lmd = "Lmd_gen1"
            Lmq = "Lmq_gen1"
            Ns_div_Nfd = "1"
            Ns_div_Nkd = "1"
            Ns_div_Nkq = "1"
            Rf = "Rf_prime_gen1"
            Rkd = "Rkd_gen1"
            Rkq = "Rkq_gen1"
            Rs = "Rs_gen1"
            el_torque_out_addr = "8200"
            enb_sig_out = "True"
            execution_rate = "Ts"
            friction_coeff = "F_gen1"
            load_src = "Model"
            me_speed_out_addr = "8202"
            pms = "pms"
            res_int_carr_f = "5000.0"
	    
        }
        [
            position = 9384, 8072
        ]
        
        component src_voltage_dsp_ctrl "Vfd" {
            
            execution_rate = "Ts"
	    
        }
        [
            position = 9680, 8056
            rotation = right
        ]
        
        component msr_voltage "Vfield" {
            
	    
        }
        [
            position = 9536, 8056
            rotation = right
        ]
        
        component Subsystem "Sync_Check" {
            layout = dynamic
    
            
            component gen_digital_probe "Activate_PhaseLock" {
                
    	    
            }
            [
                position = 8688, 8144
            ]
            
            component gen_digital_probe "Phase_match" {
                
    	    
            }
            [
                position = 8760, 8360
            ]
            
            component gen_probe "dw_phase" {
                
    	    
            }
            [
                position = 8784, 8288
            ]
            
            component gen_digital_probe "Speed_ss" {
                
    	    
            }
            [
                position = 9320, 8160
            ]
            
            component gen_probe "dw_f" {
                
    	    
            }
            [
                position = 8792, 8080
            ]
            
            component gen_probe "dw_synch" {
                
    	    
            }
            [
                position = 9080, 8144
            ]
            
            component gen_bus_join "Bus Join1" {
                
                inputs = "4"
    	    
            }
            [
                position = 8768, 8480
                rotation = left
            ]
            
            component gen_bus_join "Bus Join2" {
                
                inputs = "3"
    	    
            }
            [
                position = 9224, 8416
                rotation = left
            ]
            
            component gen_bus_split "Bus Split1" {
                
    	    
            }
            [
                position = 8280, 8512
            ]
            
            component gen_bus_split "Bus Split2" {
                
                outputs = "3"
    	    
            }
            [
                position = 8208, 8080
                rotation = right
            ]
            
            component gen_bus_split "Bus Split3" {
                
                outputs = "3"
    	    
            }
            [
                position = 8208, 8376
                rotation = left
            ]
            
            component gen_bus_join "Bus Join3" {
                
                inputs = "3"
    	    
            }
            [
                position = 9536, 8088
                rotation = left
            ]
            
            component Subsystem "check_steady_state_w" {
                layout = dynamic
        
                
                component gen_abs "Abs1" {
                    
        	    
                }
                [
                    position = 8280, 8160
                ]
                
                component gen_comparator "Comparator3" {
                    
        	    
                }
                [
                    position = 8360, 8192
                    scale = 1, -1
                ]
                
                component gen_gain "speed_diff" {
                    
                    gain = "[0.001]"
        	    
                }
                [
                    position = 8232, 8240
                ]
                
                component src_constant "Constant3" {
                    
                    execution_rate = "Ts"
                    value = "wmb_gen1"
        	    
                }
                [
                    position = 8128, 8240
                ]
                
                component gen_sum "Sum3" {
                    
                    signs = "+-"
        	    
                }
                [
                    position = 8208, 8160
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "ss_speed" {
                    label = "ss speed"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8424, 8192
                ]
                port "w_meas" {
                    label = "w_meas"
                    
                    position = left:auto
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8096, 8152
                ]
                
                junction "Junction9" sp
                [
                    position = 8168, 8240
                ]
                
                connect "Abs1.in" "Sum3.out" as Connection5
                
                
                connect "Comparator3.in2" "Abs1.out" as Connection13
                
                
                connect "Comparator3.out" "ss_speed" as Connection58
                
                
                connect "Constant3.out" Junction9 as Connection16
                
                
                connect Junction9 "speed_diff.in" as Connection39
                
                
                connect "Sum3.in1" Junction9 as Connection54
                
                
                connect "speed_diff.out" "Comparator3.in1" as Connection57
                
                
                connect "w_meas" "Sum3.in" as Connection59
                
                
        
                
            }
            [
                position = 9192, 8288
                size = 80, 48
            ]
            
            component Subsystem "check_f_diff" {
                layout = dynamic
        
                
                component gen_probe "f_diff" {
                    
        	    
                }
                [
                    position = 8248, 8088
                ]
                
                component gen_sum "Sum1" {
                    
                    signs = "+-"
        	    
                }
                [
                    position = 8112, 8152
                ]
                
                component gen_abs "Abs3" {
                    
        	    
                }
                [
                    position = 8208, 8248
                ]
                
                component gen_gain "Freq_diff" {
                    
                    gain = "[0.001]"
        	    
                }
                [
                    position = 8208, 8304
                ]
                
                component gen_gain "Kp" {
                    
                    gain = "[0.0166666666]"
        	    
                }
                [
                    position = 8216, 8152
                ]
                
                component src_constant "Constant1" {
                    
                    execution_rate = "Ts"
                    value = "[60]"
        	    
                }
                [
                    position = 8120, 8304
                ]
                
                component gen_comparator "Comparator1" {
                    
        	    
                }
                [
                    position = 8280, 8256
                    scale = 1, -1
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "activate_phase_lock" {
                    label = "activate phase lock"
                    
                    position = right:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8384, 8256
                ]
                port "dw_f" {
                    label = "dw_f"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8384, 8152
                ]
                port "f_Grid" {
                    label = "f_Grid"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7936, 8144
                ]
                port "f_Gen" {
                    label = "f_Gen"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8024, 8160
                ]
                
                junction "Junction1" sp
                [
                    position = 8168, 8152
                ]
                
                connect "Abs3.in" Junction1 as Connection7
                
                
                connect "Comparator1.in2" "Abs3.out" as Connection10
                
                
                connect "Comparator1.out" "activate_phase_lock" as Connection59
                
                
                connect "Constant1.out" "Freq_diff.in" as Connection14
                
                
                connect "Freq_diff.out" "Comparator1.in1" as Connection17
                
                
                connect Junction1 "Sum1.out" as Connection30
                
                
                connect "Kp.in" Junction1 as Connection40
                
                
                connect "Kp.out" "dw_f" as Connection58
                
                
                connect "Sum1.in1" "f_Gen" as Connection60
                
                
                connect "Sum1.in" "f_Grid" as Connection57
                
                
                connect "f_diff.in" Junction1 as Connection56
                
                
        
                
            }
            [
                position = 8520, 8160
                size = 144, 112
            ]
            
            component Subsystem "check_phase_diff" {
                layout = dynamic
        
                
                component gen_gain "Phase_diff" {
                    
                    gain = "[0.005]"
        	    
                }
                [
                    position = 8128, 8312
                ]
                
                component src_constant "Constant2" {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 8040, 8312
                ]
                
                component gen_abs "Abs2" {
                    
        	    
                }
                [
                    position = 8136, 8256
                ]
                
                component gen_comparator "Comparator2" {
                    
        	    
                }
                [
                    position = 8200, 8264
                    scale = 1, -1
                ]
                
                component gen_sum "Sum2" {
                    
                    signs = "+-"
        	    
                }
                [
                    position = 8040, 8160
                ]
                
                component gen_product "Product1" {
                    
        	    
                }
                [
                    position = 8344, 8152
                ]
                
                component gen_gain "Gain10" {
                    
                    gain = "1.0/188.4"
        	    
                }
                [
                    position = 8240, 8160
                ]
                
                component gen_probe "phase_diff" {
                    
        	    
                }
                [
                    position = 8120, 8080
                ]
                
                component Subsystem "PI" {
                    layout = dynamic
            
                    
                    component gen_gain "Ki" {
                        
                        gain = "5"
            	    
                    }
                    [
                        position = 8024, 8216
                    ]
                    
                    component gen_integrator "Integrator1" {
                        
                        limit_lower = "[-0.1]"
                        limit_upper = "[0.1]"
                        show_reset = "either"
            	    
                    }
                    [
                        position = 8216, 8224
                    ]
                    
                    component gen_sum "Sum5" {
                        
            	    
                    }
                    [
                        position = 8320, 8208
                    ]
                    
                    component gen_gain "Kp" {
                        
                        gain = "0.05"
            	    
                    }
                    [
                        position = 8096, 8168
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "Reset" {
                        label = "Reset"
                        
                        position = top:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8056, 8288
                        size = 25, 25
                    ]
                    port "In" {
                        label = "In"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7912, 8192
                        size = 25, 25
                    ]
                    port "Out" {
                        label = "Out"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8392, 8208
                        size = 25, 25
                    ]
                    
                    junction "Junction1" sp
                    [
                        position = 7944, 8192
                    ]
                    
                    connect "Integrator1.reset" Reset as Connection2
                    
                    
                    connect Junction1 In as Connection11
                    
                    
                    connect "Ki.out" "Integrator1.in" as Connection9
                    
                    
                    connect "Ki.in" Junction1 as Connection12
                    
                    
                    connect "Kp.in" Junction1 as Connection10
                    
                    
                    connect "Kp.out" "Sum5.in" as Connection7
                    
                    
                    connect "Sum5.in1" "Integrator1.out" as Connection5
                    
                    
                    connect "Sum5.out" Out as Connection6
                    
                    
            
                    
                }
                [
                    position = 8160, 8160
                    size = 64, 48
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "phase_Grid" {
                    label = "phase_Grid"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7880, 8152
                ]
                port "phase_Gen" {
                    label = "Phase_Gen"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7968, 8168
                ]
                port "phase_match" {
                    label = "Phase match"
                    
                    position = right:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8352, 8264
                ]
                port "Activate" {
                    label = "Activate"
                    
                    position = bottom:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8280, 8048
                    rotation = right
                ]
                port "dw_phase" {
                    label = "dw_phase"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8440, 8152
                ]
                
                junction "Junction10" sp
                [
                    position = 8080, 8160
                ]
                
                junction "Junction11" sp
                [
                    position = 8280, 8112
                ]
                
                connect "Abs2.in" Junction10 as Connection6
                
                
                connect "Comparator2.in2" "Abs2.out" as Connection12
                
                
                connect "Comparator2.out" "phase_match" as Connection167
                
                
                connect "Constant2.out" "Phase_diff.in" as Connection15
                
                
                connect "Gain10.out" "Product1.in1" as Connection25
                
                
                connect Junction10 "Sum2.out" as Connection31
                
                
                connect Junction11 Activate as Connection163
                
                
                connect Junction11 "Product1.in" as Connection162
                [
                    breakpoints =8280, 8112;8280, 8144
                ]
                
                connect "PI.Out" "Gain10.in" as Connection46
                
                
                connect "PI.In" Junction10 as Connection47
                
                
                connect "PI.Reset" Junction11 as Connection48
                
                
                connect "Phase_diff.out" "Comparator2.in1" as Connection49
                
                
                connect "Product1.out" "dw_phase" as Connection166
                
                
                connect "Sum2.in1" "phase_Gen" as Connection164
                
                
                connect "Sum2.in" "phase_Grid" as Connection165
                
                
                connect "phase_diff.in" Junction10 as Connection58
                
                
        
                
            }
            [
                position = 8528, 8304
                size = 168, 112
            ]
            
            component Subsystem "Calculate_dw_synch" {
                layout = dynamic
        
                
                component gen_sum "Sum4" {
                    
        	    
                }
                [
                    position = 8224, 8128
                ]
                
                component gen_product "Product3" {
                    
        	    
                }
                [
                    position = 8328, 8136
                ]
                
                component gen_logic_op "not" {
                    
                    inputs = "1"
                    operator = "NOT"
        	    
                }
                [
                    position = 8032, 8200
                ]
                
                component gen_logic_op "and" {
                    
                    inputs = "4"
        	    
                }
                [
                    position = 8240, 8240
                ]
                
                component gen_bus_split "Bus Split1" {
                    
                    outputs = "4"
        	    
                }
                [
                    position = 8016, 8312
                    rotation = left
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "dw_f" {
                    label = "dw_f"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8104, 8120
                ]
                port "dw_phase" {
                    label = "dw_phase"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8152, 8136
                ]
                port "dw_synch" {
                    label = "dw_synch"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8400, 8136
                ]
                port "Activate" {
                    label = "Activate"
                    
                    position = left:3
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7936, 8360
                ]
                
                connect Activate "Bus Split1.in" as Connection168
                
                
                connect "Bus Split1.out1" "and.in1" as Connection165
                
                
                connect "Bus Split1.out3" "and.in3" as Connection167
                
                
                connect "Bus Split1.out" "not.in" as Connection164
                
                
                connect "Product3.in" "Sum4.out" as Connection160
                
                
                connect "Product3.in1" "and.out" as Connection161
                
                
                connect "Product3.out" "dw_synch" as Connection158
                
                
                connect "Sum4.in" "dw_f" as Connection159
                
                
                connect "Sum4.in1" "dw_phase" as Connection157
                
                
                connect "and.in2" "Bus Split1.out2" as Connection166
                
                
                connect "not.out" "and.in" as Connection163
                
                
        
                
            }
            [
                position = 8952, 8200
                size = 120, 96
            ]
            
            component Subsystem "PLLs" {
                layout = dynamic
        
                
                component gen_probe "V_grid" {
                    
        	    
                }
                [
                    position = 8256, 7968
                ]
                
                component gen_probe "V_gen" {
                    
        	    
                }
                [
                    position = 8264, 8208
                ]
                
                component gen_rms_value "RMS value1" {
                    
        	    
                }
                [
                    position = 8176, 7968
                ]
                
                component gen_rms_value "RMS value2" {
                    
        	    
                }
                [
                    position = 8160, 8208
                ]
                
                component Subsystem "3ph_PLL_Gen" {
                    layout = dynamic
            
                    
                    component gen_terminator "Termination6" {
                        
            	    
                    }
                    [
                        position = 8160, 8064
                    ]
                    
                    component gen_terminator "Termination2" {
                        
            	    
                    }
                    [
                        position = 8200, 8144
                    ]
                    
                    component gen_pll_three_phs "Three phase PLL1" {
                        
            	    
                    }
                    [
                        position = 8016, 8240
                    ]
                    
                    component gen_terminator "Termination4" {
                        
            	    
                    }
                    [
                        position = 8216, 8328
                    ]
                    
                    component gen_terminator "Termination5" {
                        
            	    
                    }
                    [
                        position = 8368, 8112
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "f" {
                        label = "f"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8440, 8200
                        size = 25, 25
                    ]
                    port "wt" {
                        label = "wt"
                        
                        position = right:2
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8440, 8272
                        size = 25, 25
                    ]
                    port "Va" {
                        label = "Va"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7808, 8208
                        size = 25, 25
                    ]
                    port "Vb" {
                        label = "Vb"
                        
                        position = left:2
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7872, 8240
                        size = 25, 25
                    ]
                    port "Vc" {
                        label = "Vc"
                        
                        position = left:3
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7944, 8272
                        size = 25, 25
                    ]
                    
                    connect "Termination2.in" "Three phase PLL1.zero_axis" as Connection1
                    
                    
                    connect "Termination4.in" "Three phase PLL1.sin_theta" as Connection2
                    
                    
                    connect "Termination5.in" "Three phase PLL1.q_axis" as Connection3
                    
                    
                    connect "Termination6.in" "Three phase PLL1.d_axis" as Connection4
                    
                    
                    connect "Three phase PLL1.va" Va as Connection5
                    
                    
                    connect "Three phase PLL1.vb" Vb as Connection6
                    
                    
                    connect "Three phase PLL1.vc" Vc as Connection7
                    
                    
                    connect "Three phase PLL1.freq" f as Connection8
                    
                    
                    connect "Three phase PLL1.theta" wt as Connection9
                    
                    
            
                    
                }
                [
                    position = 8192, 8328
                    size = 72, 120
                ]
                
                component Subsystem "3ph_PLL_Grid" {
                    layout = dynamic
            
                    
                    component gen_terminator "Termination2" {
                        
            	    
                    }
                    [
                        position = 8200, 8144
                    ]
                    
                    component gen_terminator "Termination4" {
                        
            	    
                    }
                    [
                        position = 8216, 8328
                    ]
                    
                    component gen_pll_three_phs "Three phase PLL1" {
                        
            	    
                    }
                    [
                        position = 8016, 8240
                    ]
                    
                    component gen_terminator "Termination6" {
                        
            	    
                    }
                    [
                        position = 8160, 8064
                    ]
                    
                    component gen_terminator "Termination5" {
                        
            	    
                    }
                    [
                        position = 8368, 8112
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "f" {
                        label = "f"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8440, 8200
                        size = 25, 25
                    ]
                    port "wt" {
                        label = "wt"
                        
                        position = right:2
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8440, 8272
                        size = 25, 25
                    ]
                    port "Va" {
                        label = "Va"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7808, 8208
                        size = 25, 25
                    ]
                    port "Vb" {
                        label = "Vb"
                        
                        position = left:2
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7872, 8240
                        size = 25, 25
                    ]
                    port "Vc" {
                        label = "Vc"
                        
                        position = left:3
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7944, 8272
                        size = 25, 25
                    ]
                    
                    connect "Termination2.in" "Three phase PLL1.zero_axis" as Connection1
                    
                    
                    connect "Termination4.in" "Three phase PLL1.sin_theta" as Connection2
                    
                    
                    connect "Termination5.in" "Three phase PLL1.q_axis" as Connection3
                    
                    
                    connect "Termination6.in" "Three phase PLL1.d_axis" as Connection4
                    
                    
                    connect "Three phase PLL1.va" Va as Connection5
                    
                    
                    connect "Three phase PLL1.vb" Vb as Connection6
                    
                    
                    connect "Three phase PLL1.vc" Vc as Connection7
                    
                    
                    connect "Three phase PLL1.freq" f as Connection8
                    
                    
                    connect "Three phase PLL1.theta" wt as Connection9
                    
                    
            
                    
                }
                [
                    position = 8192, 8080
                    size = 72, 120
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "VA_Gen" {
                    label = "VA_Gen"
                    
                    position = left:4
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8016, 8288
                ]
                port "VB_Gen" {
                    label = "VB_Gen"
                    
                    position = left:5
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8016, 8328
                ]
                port "VC_Gen" {
                    label = "VC_Gen"
                    
                    position = left:6
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8016, 8368
                ]
                port "f_Gen" {
                    label = "f_Gen"
                    
                    position = right:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8336, 8288
                ]
                port "phase_Gen" {
                    label = "phase_Gen"
                    
                    position = right:4
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8336, 8368
                ]
                port "VA_Grid" {
                    label = "VA_Grid"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8008, 8040
                ]
                port "VB_Grid" {
                    label = "VB_Grid"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8008, 8080
                ]
                port "VC_Grid" {
                    label = "VC_Grid"
                    
                    position = left:3
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8008, 8120
                ]
                port "f_Grid" {
                    label = "f_Grid"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8336, 8040
                ]
                port "phase_Grid" {
                    label = "phase_Grid"
                    
                    position = right:3
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8336, 8120
                ]
                
                junction "Junction15" sp
                [
                    position = 8128, 8040
                ]
                
                junction "Junction16" sp
                [
                    position = 8120, 8288
                ]
                
                connect "3ph_PLL_Gen.Vb" "VB_Gen" as Connection86
                
                
                connect "3ph_PLL_Gen.Vc" "VC_Gen" as Connection89
                
                
                connect "3ph_PLL_Gen.f" "f_Gen" as Connection88
                
                
                connect "3ph_PLL_Gen.wt" "phase_Gen" as Connection90
                
                
                connect "3ph_PLL_Grid.Vb" "VB_Grid" as Connection93
                
                
                connect "3ph_PLL_Grid.Vc" "VC_Grid" as Connection91
                
                
                connect "3ph_PLL_Grid.f" "f_Grid" as Connection94
                
                
                connect "3ph_PLL_Grid.wt" "phase_Grid" as Connection87
                
                
                connect Junction15 "3ph_PLL_Grid.Va" as Connection79
                
                
                connect Junction15 "VA_Grid" as Connection95
                
                
                connect Junction16 "3ph_PLL_Gen.Va" as Connection82
                
                
                connect Junction16 "VA_Gen" as Connection92
                
                
                connect "RMS value1.in" Junction15 as Connection80
                
                
                connect "RMS value2.in" Junction16 as Connection83
                
                
                connect "V_gen.in" "RMS value2.out" as Connection85
                
                
                connect "V_grid.in" "RMS value1.out" as Connection84
                
                
        
                
            }
            [
                position = 8344, 8232
                size = 104, 272
            ]
            
            component Subsystem "Contactor_Control" {
                layout = dynamic
        
                
                component gen_logic_op "Logical operator2" {
                    
                    inputs = "5"
        	    
                }
                [
                    position = 7800, 8296
                ]
                
                component sys_signal_switch "Signal switch1" {
                    
                    threshold = "0.5"
        	    
                }
                [
                    position = 8424, 8280
                ]
                
                component gen_logic_op "Logical operator4" {
                    
                    operator = "NOT"
        	    
                }
                [
                    position = 8424, 8096
                    rotation = right
                ]
                
                component gen_digital_probe "Grid_Forming" {
                    
        	    
                }
                [
                    position = 8480, 8160
                ]
                
                component src_constant "Constant4" {
                    
                    execution_rate = "Ts"
                    value = "0"
        	    
                }
                [
                    position = 8304, 8248
                ]
                
                component gen_terminator "Termination12" {
                    
        	    
                }
                [
                    position = 8248, 8328
                ]
                
                component src_cp_input "Grid_mode" {
                    
                    def_value = "1"
                    execution_rate = "Ts"
                    group = "Grid Mode"
                    max = "1"
                    min = "0"
                    unit = ""
                    widget_label = "Grid Tied"
        	    
                }
                [
                    position = 8368, 8008
                ]
                
                component gen_digital_probe "Grid Tied" {
                    
        	    
                }
                [
                    position = 8664, 8048
                ]
                
                component gen_logic_op "Logical operator5" {
                    
        	    
                }
                [
                    position = 8616, 8200
                ]
                
                component gen_sr_ff "SR Flip Flop1" {
                    
        	    
                }
                [
                    position = 8168, 8312
                ]
                
                component src_constant "Constant1" {
                    
                    execution_rate = "Ts"
                    value = "Ts"
        	    
                }
                [
                    position = 7520, 8304
                ]
                
                component gen_c_function "wait_to_trip" {
                    
                    global_variables = "real time_acc;"
                    in_terminal_properties = "real Ts;inherit boolean;inherit Reset;"
                    init_fnc = "/*Begin code section*/
                                                                                        time_acc = 0;
                                                                                        Trip = 0;
                                                                                        /*End code section*/"
                    no_feed_inputs = "[u'']"
                    no_feed_outputs = "[u'']"
                    out_terminal_properties = "real Trip;"
                    output_fnc = "/*Begin code section*/
                                                                                        if(time_acc>=3.0){
                                                                                            Trip = 1;
                                                                                        }
                                                                                        else{
                                                                                            time_acc += Ts*boolean;
                                                                                        }
                                                                                        if(Reset ==1){
                                                                                            time_acc = 0;
                                                                                            Trip = 0;
                                                                                        }
                                                                                        /*End code section*/"
        	    
                }
                [
                    position = 7600, 8352
                ]
                
                component gen_logic_op "Logical operator6" {
                    
                    operator = "OR"
        	    
                }
                [
                    position = 8072, 8416
                ]
                
                component gen_logic_op "not" {
                    
                    operator = "NOT"
        	    
                }
                [
                    position = 7968, 8384
                ]
                
                component gen_digital_probe "MCB_cmd" {
                    
        	    
                }
                [
                    position = 8352, 8336
                ]
                
                component gen_digital_probe "MCB_control" {
                    
        	    
                }
                [
                    position = 7920, 8248
                ]
                
                component gen_logic_op "not1" {
                    
                    operator = "NOT"
        	    
                }
                [
                    position = 7968, 8456
                ]
                
                component gen_bus_split "Bus Split1" {
                    
                    outputs = "3"
        	    
                }
                [
                    position = 7696, 8432
                    rotation = left
                ]
                component "core/Edge Detection" "Edge Detection1"{
                    
                }
                [
                    position = 7520, 8384
                    size = 32, 32
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                tag "Goto20" {
                    value = "Grid Mode"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8648, 8104
                ]
                
                tag "From33" {
                    value = "Grid Mode"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7392, 8352
                ]
                
                tag "From34" {
                    value = "Grid Mode"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7872, 8456
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "ss_speed" {
                    label = "ss_speed"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7392, 8264
                ]
                port "phase_match" {
                    label = "phase match"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7448, 8280
                ]
                port "MCB" {
                    label = "MCB"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8520, 8280
                ]
                port "SP_in" {
                    label = "SP_in"
                    
                    position = left:3
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7632, 8496
                ]
                port "Grid_Mode" {
                    label = "Grid Mode"
                    
                    position = right:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8672, 8152
                ]
                port "Grid_Tied" {
                    label = "Grid_Tied"
                    
                    position = right:3
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8760, 8200
                ]
                
                junction "Junction6" sp
                [
                    position = 7848, 8296
                ]
                
                junction "Junction20" sp
                [
                    position = 8472, 8280
                ]
                
                junction "Junction22" sp
                [
                    position = 8568, 8048
                ]
                
                junction "Junction23" sp
                [
                    position = 8424, 8160
                ]
                
                junction "Junction28" sp
                [
                    position = 8424, 8048
                ]
                
                junction "Junction29" sp
                [
                    position = 8568, 8104
                ]
                
                junction "Junction30" sp
                [
                    position = 7480, 8352
                ]
                
                junction "Junction31" sp
                [
                    position = 8320, 8296
                ]
                
                junction "Junction32" sp
                [
                    position = 8568, 8152
                ]
                
                connect "Bus Split1.out" "Logical operator2.in3" as Connection504
                
                
                connect "Bus Split1.out1" "Logical operator2.in4" as Connection505
                
                
                connect "Bus Split1.out2" "not.in" as Connection506
                
                
                connect "Constant1.out" "wait_to_trip.Ts" as Connection481
                
                
                connect "Constant4.out" "Signal switch1.in" as Connection129
                
                
                connect "Edge Detection1.In1" Junction30 as Connection487
                
                
                connect From33 Junction30 as Connection489
                
                
                connect From34 "not1.in" as Connection498
                
                
                connect Goto20 Junction29 as Connection204
                
                
                connect "Grid Tied.in" Junction22 as Connection119
                
                
                connect "Grid_Forming.in" Junction23 as Connection124
                
                
                connect "Grid_Mode" Junction32 as Connection510
                
                
                connect "Grid_Tied" "Logical operator5.out" as Connection511
                
                
                connect "Grid_mode.out" Junction28 as Connection152
                
                
                connect Junction20 MCB as Connection200
                
                
                connect Junction20 "Signal switch1.out" as Connection107
                
                
                connect Junction22 Junction29 as Connection202
                
                
                connect Junction23 "Signal switch1.in2" as Connection123
                
                
                connect Junction28 Junction22 as Connection151
                [
                    breakpoints =8424, 8048;8424, 8048;8424, 8048
                ]
                
                connect Junction29 Junction32 as Connection508
                
                
                connect Junction30 "wait_to_trip.boolean" as Connection488
                [
                    breakpoints =7480, 8352
                ]
                
                connect Junction31 "Signal switch1.in1" as Connection495
                
                
                connect Junction32 "Logical operator5.in" as Connection509
                
                
                connect Junction6 "Logical operator2.out" as Connection36
                
                
                connect "Logical operator2.in" "ss_speed" as Connection199
                
                
                connect "Logical operator2.in2" "wait_to_trip.Trip" as Connection503
                
                
                connect "Logical operator4.out" Junction23 as Connection122
                
                
                connect "Logical operator4.in" Junction28 as Connection150
                
                
                connect "Logical operator5.in1" Junction20 as Connection108
                
                
                connect "Logical operator6.out" "SR Flip Flop1.r_in" as Connection501
                
                
                connect "Logical operator6.in" "not.out" as Connection499
                
                
                connect "Logical operator6.in1" "not1.out" as Connection500
                
                
                connect "MCB_cmd.in" Junction31 as Connection496
                
                
                connect "MCB_control.in" Junction6 as Connection9
                
                
                connect "SP_in" "Bus Split1.in" as Connection507
                
                
                connect "SR Flip Flop1.out" Junction31 as Connection494
                
                
                connect "SR Flip Flop1.s_in" Junction6 as Connection51
                
                
                connect "Termination12.in" "SR Flip Flop1.out_n" as Connection55
                
                
                connect "phase_match" "Logical operator2.in1" as Connection502
                
                
                connect "wait_to_trip.Reset" "Edge Detection1.Out1" as Connection482
                
                
        
                
            }
            [
                position = 9352, 8336
                size = 112, 112
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            tag "Goto20" {
                value = "MCB_status"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 9520, 8256
            ]
            
            tag "Goto22" {
                value = "activate_pl"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 8680, 8192
            ]
            
            tag "From30" {
                value = "activate_pl"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 8472, 8408
            ]
            
            tag "From32" {
                value = "Gen_On"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 8728, 8592
                size = 60, 20
            ]
            
            tag "From35" {
                value = "Grid Mode"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 8592, 8544
                size = 60, 20
            ]
            
            tag "From33" {
                value = "MCB_status"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 8528, 8520
                size = 60, 20
            ]
            
            tag "From34" {
                value = "GCB_status"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 8656, 8568
                size = 60, 20
            ]
            
            tag "Goto23" {
                value = "activate"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 8840, 8424
            ]
            
            tag "From36" {
                value = "activate"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 8816, 8224
            ]
            
            tag "Goto24" {
                value = "Grid Mode"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 9472, 8336
            ]
            
            tag "From37" {
                value = "activate_pl"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 9144, 8464
            ]
            
            tag "From38" {
                value = "GCB_status"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 9144, 8504
            ]
            
            tag "From39" {
                value = "Gen_On"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 9144, 8544
            ]
            
            tag "From40" {
                value = "w_meas"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 9080, 8288
            ]
            
            tag "Goto25" {
                value = "Gen_On"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 8376, 8504
            ]
            
            tag "Goto26" {
                value = "w_meas"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 8376, 8544
            ]
            
            tag "Goto27" {
                value = "GCB_status"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 8288, 8592
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            tag "Goto28" {
                value = "dw_synch"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 9144, 8200
            ]
            
            
            
            
            
            tag "Goto29" {
                value = "Gridtied"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 9536, 8368
            ]
            
            
            
            
            
            tag "Goto30" {
                value = "w_ss"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 9344, 8224
            ]
            
            
            
            
            
            
            tag "From41" {
                value = "Gridtied"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 9432, 8136
            ]
            
            
            tag "From42" {
                value = "dw_synch"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 9432, 8176
            ]
            
            tag "From43" {
                value = "w_ss"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 9432, 8216
            ]
            
            
            
            port "mcb" {
                label = "MCB"
                
                position = bottom:auto
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 9520, 8304
            ]
            port "SP_in" {
                label = "SP_in"
                
                position = top:1
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 8208, 8512
            ]
            port "GCB_sts" {
                label = "GCB_sts"
                
                position = top:2
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 8208, 8592
            ]
            port "V_grid" {
                label = "V_grid"
                
                position = left:auto
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 8152, 8032
            ]
            port "V_Gen" {
                label = "V_Gen"
                
                position = right:auto
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 8152, 8424
            ]
            port "SP_out" {
                label = "SP_out"
                
                position = top:3
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 9592, 8032
            ]
            
            junction "Junction7" sp
            [
                position = 8720, 8336
            ]
            
            junction "Junction18" sp
            [
                position = 8744, 8264
            ]
            
            junction "Junction25" sp
            [
                position = 8752, 8120
            ]
            
            junction "Junction26" sp
            [
                position = 9472, 8304
            ]
            
            junction "Junction30" sp
            [
                position = 8616, 8192
            ]
            
            junction "Junction32" sp
            [
                position = 9048, 8200
            ]
            
            junction "Junction33" sp
            [
                position = 9264, 8288
            ]
            
            junction "Junction34" sp
            [
                position = 9264, 8224
            ]
            
            connect "Activate_PhaseLock.in" Junction30 as Connection175
            
            
            connect "Bus Join2.out" "Contactor_Control.SP_in" as Connection220
            
            
            connect "Bus Split2.out" "PLLs.VA_Grid" as Connection239
            
            
            connect "Bus Split2.out1" "PLLs.VB_Grid" as Connection240
            
            
            connect "Bus Split2.out2" "PLLs.VC_Grid" as Connection241
            
            
            connect "Bus Split2.in" "V_grid" as Connection238
            
            
            connect "Bus Split3.out" "PLLs.VA_Gen" as Connection243
            
            
            connect "Bus Split3.out1" "PLLs.VB_Gen" as Connection244
            
            
            connect "Bus Split3.out2" "PLLs.VC_Gen" as Connection245
            
            
            connect "Bus Split3.in" "V_Gen" as Connection242
            
            
            connect "Contactor_Control.ss_speed" Junction33 as Connection253
            
            
            connect From30 "check_phase_diff.Activate" as Connection178
            
            
            connect From32 "Bus Join1.in3" as Connection216
            
            
            connect From33 "Bus Join1.in" as Connection213
            
            
            connect From34 "Bus Join1.in2" as Connection215
            
            
            connect From35 "Bus Join1.in1" as Connection214
            
            
            connect From36 "Calculate_dw_synch.Activate" as Connection218
            
            
            connect From37 "Bus Join2.in" as Connection221
            
            
            connect From38 "Bus Join2.in1" as Connection222
            
            
            connect From39 "Bus Join2.in2" as Connection223
            
            
            connect From40 "check_steady_state_w.w_meas" as Connection224
            
            
            connect From41 "Bus Join3.in" as Connection260
            
            
            connect From42 "Bus Join3.in1" as Connection261
            
            
            connect From43 "Bus Join3.in2" as Connection262
            
            
            connect Goto20 Junction26 as Connection143
            
            
            connect Goto22 Junction30 as Connection177
            
            
            connect Goto23 "Bus Join1.out" as Connection217
            
            
            connect Goto24 "Contactor_Control.Grid_Mode" as Connection219
            
            
            connect Goto25 "Bus Split1.out" as Connection226
            
            
            connect Goto26 "Bus Split1.out1" as Connection227
            
            
            connect Goto27 "GCB_sts" as Connection228
            
            
            connect Goto28 Junction32 as Connection250
            
            
            connect Goto29 "Contactor_Control.Grid_Tied" as Connection251
            
            
            connect Goto30 Junction34 as Connection258
            
            
            connect Junction18 "Calculate_dw_synch.dw_phase" as Connection170
            [
                breakpoints =8744, 8264;8744, 8200
            ]
            
            connect Junction18 "check_phase_diff.dw_phase" as Connection165
            
            
            connect Junction25 "Calculate_dw_synch.dw_f" as Connection172
            
            
            connect Junction25 "check_f_diff.dw_f" as Connection159
            
            
            connect Junction26 "Contactor_Control.MCB" as Connection204
            
            
            connect Junction30 "check_f_diff.activate_phase_lock" as Connection176
            
            
            connect Junction32 "Calculate_dw_synch.dw_synch" as Connection249
            [
                breakpoints =9048, 8200;9048, 8200
            ]
            
            connect Junction33 "check_steady_state_w.ss_speed" as Connection254
            [
                breakpoints =9264, 8288
            ]
            
            connect Junction34 Junction33 as Connection257
            
            
            connect Junction7 "Contactor_Control.phase_match" as Connection205
            
            
            connect Junction7 "check_phase_diff.phase_match" as Connection166
            
            
            connect "PLLs.phase_Grid" "check_phase_diff.phase_Grid" as Connection190
            
            
            connect "Phase_match.in" Junction7 as Connection50
            
            
            connect "SP_in" "Bus Split1.in" as Connection225
            
            
            connect "SP_out" "Bus Join3.out" as Connection259
            
            
            connect "Speed_ss.in" Junction34 as Connection256
            
            
            connect "check_f_diff.f_Grid" "PLLs.f_Grid" as Connection188
            
            
            connect "check_f_diff.f_Gen" "PLLs.f_Gen" as Connection182
            
            
            connect "check_phase_diff.phase_Gen" "PLLs.phase_Gen" as Connection184
            
            
            connect "dw_f.in" Junction25 as Connection138
            
            
            connect "dw_phase.in" Junction18 as Connection91
            
            
            connect "dw_synch.in" Junction32 as Connection248
            
            
            connect mcb Junction26 as Connection141
            
            
    
            
        }
        [
            position = 8328, 7848
            size = 144, 104
        ]
        
        component Subsystem "GCB_control" {
            layout = dynamic
    
            
            component gen_sr_ff "SR Flip Flop1" {
                
    	    
            }
            [
                position = 8192, 8184
            ]
            
            component gen_logic_op "Logical operator1" {
                
                operator = "NOT"
    	    
            }
            [
                position = 8088, 8224
            ]
            
            component gen_terminator "Termination1" {
                
    	    
            }
            [
                position = 8280, 8200
            ]
            
            component gen_c_function "wait_to_trip" {
                
                global_variables = "real time_acc;"
                in_terminal_properties = "real Ts;inherit boolean;inherit Reset;"
                init_fnc = "/*Begin code section*/
                                                                        time_acc = 0;
                                                                        Trip = 0;
                                                                        /*End code section*/"
                no_feed_inputs = "[u'']"
                no_feed_outputs = "[u'']"
                out_terminal_properties = "real Trip;"
                output_fnc = "/*Begin code section*/
                                                                        if(time_acc>=3.0){
                                                                            Trip = 1;
                                                                        }
                                                                        else{
                                                                            time_acc += Ts*boolean;
                                                                        }
                                                                        if(Reset ==1){
                                                                            time_acc = 0;
                                                                            Trip = 0;
                                                                        }
                                                                        /*End code section*/"
    	    
            }
            [
                position = 8480, 8168
            ]
            
            component src_constant "Constant1" {
                
                execution_rate = "Ts"
                value = "Ts"
    	    
            }
            [
                position = 8400, 8120
            ]
            
            component gen_digital_probe "GCB_fb" {
                
    	    
            }
            [
                position = 8592, 8096
            ]
            
            component gen_bus_split "Bus Split1" {
                
    	    
            }
            [
                position = 7928, 8232
            ]
            
            component gen_terminator "Termination2" {
                
    	    
            }
            [
                position = 8016, 8264
            ]
            
            component gen_bus_split "Bus Split2" {
                
                outputs = "3"
    	    
            }
            [
                position = 8016, 8152
            ]
            
            component gen_terminator "T" {
                
    	    
            }
            [
                position = 8072, 8056
                rotation = left
            ]
            
            component gen_terminator "T1" {
                
    	    
            }
            [
                position = 8112, 8096
                rotation = left
            ]
            component "core/Edge Detection" "Edge Detection1"{
                
            }
            [
                position = 8400, 8200
                size = 32, 32
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "GCB" {
                label = "GCB"
                
                position = bottom:1
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8328, 8272
                rotation = right
            ]
            port "Gen_On" {
                label = "Gen_On"
                
                position = left:2
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7848, 8232
            ]
            port "GCB_sts" {
                label = "GCB_sts"
                
                position = right:auto
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8600, 8168
            ]
            port "w_ss" {
                label = "w_ss"
                
                position = left:1
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7936, 8152
            ]
            
            junction "Junction2" sp
            [
                position = 8360, 8168
            ]
            
            junction "Junction4" sp
            [
                position = 8328, 8168
            ]
            
            junction "Junction5" sp
            [
                position = 8528, 8168
            ]
            
            connect "Bus Split1.in" "Gen_On" as Connection504
            
            
            connect "Bus Split1.out" "Logical operator1.in" as Connection505
            
            
            connect "Bus Split2.out2" "SR Flip Flop1.s_in" as Connection508
            
            
            connect "Constant1.out" "wait_to_trip.Ts" as Connection481
            
            
            connect "Edge Detection1.In1" Junction2 as Connection485
            
            
            connect GCB Junction4 as Connection497
            
            
            connect "GCB_fb.in" Junction5 as Connection501
            
            
            connect "GCB_sts" Junction5 as Connection503
            
            
            connect Junction2 Junction4 as Connection495
            [
                breakpoints =8360, 8168;8336, 8168
            ]
            
            connect Junction4 "SR Flip Flop1.out" as Connection496
            
            
            connect Junction5 "wait_to_trip.Trip" as Connection502
            [
                breakpoints =8528, 8168
            ]
            
            connect "Logical operator1.out" "SR Flip Flop1.r_in" as Connection471
            
            
            connect "T.in" "Bus Split2.out" as Connection509
            
            
            connect "T1.in" "Bus Split2.out1" as Connection510
            
            
            connect "Termination1.in" "SR Flip Flop1.out_n" as Connection472
            
            
            connect "Termination2.in" "Bus Split1.out1" as Connection506
            
            
            connect "w_ss" "Bus Split2.in" as Connection507
            
            
            connect "wait_to_trip.Reset" "Edge Detection1.Out1" as Connection482
            
            
            connect "wait_to_trip.boolean" Junction2 as Connection483
            
            
    
            
        }
        [
            position = 8752, 7840
            size = 128, 96
        ]
        
        component Subsystem "G1_meas" {
            layout = dynamic
    
            
            component src_ground "gnd1" {
                
    	    
            }
            [
                position = 8000, 8528
            ]
            
            component msr_voltage "VA" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8360, 8216
                rotation = right
            ]
            
            component msr_current "IB" {
                
                execution_rate = "Ts"
    	    
            }
            [
                position = 7392, 8024
            ]
            
            component msr_voltage "VC" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8200, 8344
                rotation = right
            ]
            
            component msr_current "IA" {
                
                execution_rate = "Ts"
    	    
            }
            [
                position = 7312, 7928
            ]
            
            component msr_voltage "VB" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8280, 8280
                rotation = right
            ]
            
            component msr_current "IC" {
                
                execution_rate = "Ts"
    	    
            }
            [
                position = 7480, 8120
            ]
            
            component gen_bus_join "Bus Join1" {
                
                inputs = "3"
    	    
            }
            [
                position = 8624, 8144
                rotation = left
            ]
            component "core/Voltage RMS" "VCrms"{
                
            }
            [
                position = 7584, 8320
                rotation = right
                size = 64, 32
            ]
            
            component "core/Current RMS" "IArms"{
                
            }
            [
                position = 7208, 7928
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VArms"{
                
            }
            [
                position = 7784, 8208
                rotation = right
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VBrms"{
                
            }
            [
                position = 7688, 8280
                rotation = right
                size = 64, 32
            ]
            
            component "core/Current RMS" "ICrms"{
                
            }
            [
                position = 7208, 8120
                size = 64, 32
            ]
            
            component "core/Current RMS" "IBrms"{
                
            }
            [
                position = 7208, 8024
                size = 64, 32
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "P1" {
                label = "a"
                
                position = right:1
                kind = pe
            }
            [
                position = 8432, 7928
                rotation = down
            ]
            port "P2" {
                label = "b"
                
                position = right:2
                kind = pe
            }
            [
                position = 8432, 8024
                rotation = down
            ]
            port "P3" {
                label = "c"
                
                position = right:3
                kind = pe
            }
            [
                position = 8432, 8120
                rotation = down
            ]
            port "P4" {
                label = "A"
                
                position = left:1
                kind = pe
            }
            [
                position = 7112, 7928
            ]
            port "P5" {
                label = "B"
                
                position = left:2
                kind = pe
            }
            [
                position = 7112, 8024
            ]
            port "P6" {
                label = "C"
                
                position = left:3
                kind = pe
            }
            [
                position = 7112, 8120
            ]
            port "V" {
                label = "V"
                
                position = top:auto
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8624, 8056
                rotation = left
            ]
            
            junction "Junction1421" pe
            [
                position = 8280, 8456
            ]
            
            junction "Junction1463" pe
            [
                position = 8200, 8456
            ]
            
            junction "Junction1465" pe
            [
                position = 8000, 8456
            ]
            
            junction "Junction1466" pe
            [
                position = 8360, 7928
            ]
            
            junction "Junction1467" pe
            [
                position = 8280, 8024
            ]
            
            junction "Junction1468" pe
            [
                position = 8200, 8120
            ]
            
            junction "Junction1479" pe
            [
                position = 7784, 8456
            ]
            
            junction "Junction1481" pe
            [
                position = 7688, 8456
            ]
            
            junction "Junction1482" pe
            [
                position = 7584, 8120
            ]
            
            junction "Junction1483" pe
            [
                position = 7688, 8024
            ]
            
            junction "Junction1484" pe
            [
                position = 7784, 7928
            ]
            
            connect "IA.n_node" Junction1484 as Connection363
            
            
            connect "IArms.n_node" "IA.p_node" as Connection340
            
            
            connect "IB.n_node" Junction1483 as Connection360
            
            
            connect "IBrms.n_node" "IB.p_node" as Connection341
            
            
            connect "IC.n_node" Junction1482 as Connection357
            
            
            connect "ICrms.n_node" "IC.p_node" as Connection342
            
            
            connect Junction1421 Junction1463 as Connection224
            
            
            connect Junction1463 "VC.n_node" as Connection225
            
            
            connect Junction1465 Junction1463 as Connection370
            
            
            connect Junction1465 Junction1479 as Connection372
            
            
            connect Junction1465 "gnd1.node" as Connection375
            
            
            connect Junction1466 P1 as Connection299
            
            
            connect Junction1467 Junction1483 as Connection373
            
            
            connect Junction1467 P2 as Connection301
            
            
            connect Junction1468 P3 as Connection302
            
            
            connect Junction1479 "VArms.n_node" as Connection310
            
            
            connect Junction1481 Junction1479 as Connection315
            
            
            connect Junction1482 Junction1468 as Connection371
            
            
            connect Junction1484 Junction1466 as Connection374
            
            
            connect Junction1484 "VArms.p_node" as Connection362
            
            
            connect P4 "IArms.p_node" as Connection364
            
            
            connect P5 "IBrms.p_node" as Connection365
            
            
            connect P6 "ICrms.p_node" as Connection366
            
            
            connect V "Bus Join1.out" as Connection376
            
            
            connect "VA.out" "Bus Join1.in" as Connection377
            
            
            connect "VA.n_node" Junction1421 as Connection237
            
            
            connect "VA.p_node" Junction1466 as Connection240
            
            
            connect "VB.out" "Bus Join1.in1" as Connection378
            
            
            connect "VB.n_node" Junction1421 as Connection203
            
            
            connect "VB.p_node" Junction1467 as Connection243
            
            
            connect "VBrms.n_node" Junction1481 as Connection316
            
            
            connect "VBrms.p_node" Junction1483 as Connection358
            
            
            connect "VC.out" "Bus Join1.in2" as Connection379
            
            
            connect "VC.p_node" Junction1468 as Connection246
            
            
            connect "VCrms.n_node" Junction1481 as Connection314
            
            
            connect "VCrms.p_node" Junction1482 as Connection355
            
            
    
            
        }
        [
            position = 8440, 8072
            size = 56, 232
        ]
        
        component Subsystem "G1grid_meas" {
            layout = dynamic
    
            
            component msr_current "IB" {
                
                execution_rate = "Ts"
    	    
            }
            [
                position = 7408, 8024
            ]
            
            component msr_voltage "VC" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8200, 8344
                rotation = right
            ]
            
            component msr_current "IC" {
                
                execution_rate = "Ts"
    	    
            }
            [
                position = 7496, 8120
            ]
            
            component msr_current "IA" {
                
                execution_rate = "Ts"
    	    
            }
            [
                position = 7328, 7928
            ]
            
            component msr_voltage "VB" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8280, 8280
                rotation = right
            ]
            
            component msr_voltage "VA" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8360, 8216
                rotation = right
            ]
            
            component src_ground "gnd1" {
                
    	    
            }
            [
                position = 7976, 8536
            ]
            
            component gen_bus_join "Bus Join1" {
                
                inputs = "3"
    	    
            }
            [
                position = 8608, 8176
                rotation = left
            ]
            component "core/Current RMS" "IArms"{
                
            }
            [
                position = 7224, 7928
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VBrms"{
                
            }
            [
                position = 7688, 8280
                rotation = right
                size = 64, 32
            ]
            
            component "core/Current RMS" "IBrms"{
                
            }
            [
                position = 7224, 8024
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VArms"{
                
            }
            [
                position = 7784, 8208
                rotation = right
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VCrms"{
                
            }
            [
                position = 7584, 8320
                rotation = right
                size = 64, 32
            ]
            
            component "core/Current RMS" "ICrms"{
                
            }
            [
                position = 7224, 8120
                size = 64, 32
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "P1" {
                label = "a"
                
                position = right:1
                kind = pe
            }
            [
                position = 8432, 7928
                rotation = down
            ]
            port "P2" {
                label = "b"
                
                position = right:2
                kind = pe
            }
            [
                position = 8432, 8024
                rotation = down
            ]
            port "P3" {
                
                position = right:3
                kind = pe
            }
            [
                position = 8432, 8120
                rotation = down
            ]
            port "P4" {
                label = "A"
                
                position = left:1
                kind = pe
            }
            [
                position = 7128, 7928
            ]
            port "P5" {
                label = "B"
                
                position = left:2
                kind = pe
            }
            [
                position = 7128, 8024
            ]
            port "P6" {
                label = "C"
                
                position = left:3
                kind = pe
            }
            [
                position = 7128, 8120
            ]
            port "V" {
                label = "V"
                
                position = top:auto
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8608, 8088
                rotation = left
            ]
            
            junction "Junction1421" pe
            [
                position = 8280, 8456
            ]
            
            junction "Junction1463" pe
            [
                position = 8200, 8456
            ]
            
            junction "Junction1466" pe
            [
                position = 8360, 7928
            ]
            
            junction "Junction1467" pe
            [
                position = 8280, 8024
            ]
            
            junction "Junction1468" pe
            [
                position = 8200, 8120
            ]
            
            junction "Junction1479" pe
            [
                position = 7784, 8456
            ]
            
            junction "Junction1481" pe
            [
                position = 7688, 8456
            ]
            
            junction "Junction1482" pe
            [
                position = 7584, 8120
            ]
            
            junction "Junction1483" pe
            [
                position = 7688, 8024
            ]
            
            junction "Junction1484" pe
            [
                position = 7784, 7928
            ]
            
            junction "Junction1485" pe
            [
                position = 7976, 8456
            ]
            
            connect "IA.n_node" Junction1484 as Connection351
            
            
            connect "IArms.n_node" "IA.p_node" as Connection340
            
            
            connect "IB.n_node" Junction1483 as Connection348
            
            
            connect "IBrms.n_node" "IB.p_node" as Connection341
            
            
            connect "IC.n_node" Junction1482 as Connection345
            
            
            connect "ICrms.n_node" "IC.p_node" as Connection342
            
            
            connect Junction1421 Junction1463 as Connection224
            
            
            connect Junction1463 "VC.n_node" as Connection225
            
            
            connect Junction1466 P1 as Connection299
            
            
            connect Junction1467 P2 as Connection301
            
            
            connect Junction1468 P3 as Connection302
            
            
            connect Junction1479 Junction1485 as Connection360
            
            
            connect Junction1479 "VArms.n_node" as Connection310
            
            
            connect Junction1481 Junction1479 as Connection315
            
            
            connect Junction1482 Junction1468 as Connection362
            
            
            connect Junction1483 Junction1467 as Connection359
            
            
            connect Junction1483 "VBrms.p_node" as Connection347
            
            
            connect Junction1484 Junction1466 as Connection358
            
            
            connect Junction1484 "VArms.p_node" as Connection350
            
            
            connect Junction1485 Junction1463 as Connection361
            
            
            connect P4 "IArms.p_node" as Connection337
            
            
            connect P5 "IBrms.p_node" as Connection338
            
            
            connect P6 "ICrms.p_node" as Connection339
            
            
            connect V "Bus Join1.out" as Connection366
            
            
            connect "VA.out" "Bus Join1.in" as Connection363
            
            
            connect "VA.n_node" Junction1421 as Connection237
            
            
            connect "VA.p_node" Junction1466 as Connection240
            
            
            connect "VB.out" "Bus Join1.in1" as Connection364
            
            
            connect "VB.n_node" Junction1421 as Connection203
            
            
            connect "VB.p_node" Junction1467 as Connection243
            
            
            connect "VBrms.n_node" Junction1481 as Connection316
            
            
            connect "VC.out" "Bus Join1.in2" as Connection365
            
            
            connect "VC.p_node" Junction1468 as Connection246
            
            
            connect "VCrms.n_node" Junction1481 as Connection314
            
            
            connect "VCrms.p_node" Junction1482 as Connection343
            
            
            connect "gnd1.node" Junction1485 as Connection357
            
            
    
            
        }
        [
            position = 8216, 8072
            size = 56, 232
        ]
        
        component Subsystem "Measurements" {
            layout = dynamic
    
            
            component pas_resistor "R15" {
                
                resistance = "4761.0"
    	    
            }
            [
                position = 7088, 8272
                rotation = right
            ]
            
            component msr_voltage "Vb" {
                
                addr = "4"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8104, 8288
                rotation = right
                scale = -1, 1
            ]
            
            component msr_current "Ia" {
                
                addr = "22"
                execution_rate = "Ts"
                frequency = "10000.0"
                sig_output = "True"
    	    
            }
            [
                position = 8440, 7968
                scale = -1, 1
            ]
            
            component msr_current "Ic" {
                
                addr = "26"
                execution_rate = "Ts"
                frequency = "10000.0"
                sig_output = "True"
    	    
            }
            [
                position = 8248, 8160
                scale = -1, 1
            ]
            
            component msr_voltage "Vc" {
                
                addr = "5"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8168, 8360
                rotation = right
                scale = -1, 1
            ]
            
            component pas_capacitor "C3" {
                
                capacitance = "0.5e-6"
    	    
            }
            [
                position = 7360, 8112
                rotation = left
            ]
            
            component gen_probe "S_Gen1" {
                
                addr = "17951"
    	    
            }
            [
                position = 7576, 7792
                scale = -1, 1
            ]
            
            component gen_probe "Q_Gen1" {
                
                addr = "17938"
    	    
            }
            [
                position = 7576, 7736
                scale = -1, 1
            ]
            
            component msr_voltage "Va" {
                
                addr = "3"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8040, 8216
                rotation = right
                scale = -1, 1
            ]
            
            component gen_gain "Gain7" {
                
                gain = "[0.25e-6]"
    	    
            }
            [
                position = 7656, 7792
                scale = -1, 1
            ]
            
            component msr_current "Ib" {
                
                addr = "24"
                execution_rate = "Ts"
                frequency = "10000.0"
                sig_output = "True"
    	    
            }
            [
                position = 8336, 8064
                scale = -1, 1
            ]
            
            component gen_bus_join "Bus Join1" {
                
                inputs = "3"
    	    
            }
            [
                position = 7664, 7584
                scale = -1, -1
            ]
            
            component pas_capacitor "C2" {
                
                capacitance = "0.5e-6"
    	    
            }
            [
                position = 7272, 8112
                rotation = right
            ]
            
            component src_ground "gnd3" {
                
    	    
            }
            [
                position = 8104, 8480
            ]
            
            component pas_resistor "R14" {
                
                resistance = "4761.0"
    	    
            }
            [
                position = 7032, 8272
                rotation = right
            ]
            
            component gen_gain "Gain8" {
                
                gain = "[0.25e-6]"
    	    
            }
            [
                position = 7656, 7736
                scale = -1, 1
            ]
            
            component src_ground "gnd4" {
                
    	    
            }
            [
                position = 7088, 8416
            ]
            
            component gen_probe "P_Gen1" {
                
                addr = "17965"
    	    
            }
            [
                position = 7576, 7680
                scale = -1, 1
            ]
            
            component pas_capacitor "C1" {
                
                capacitance = "0.5e-6"
    	    
            }
            [
                position = 7272, 8016
                rotation = right
            ]
            
            component gen_gain "Gain9" {
                
                gain = "[0.25e-6]"
    	    
            }
            [
                position = 7656, 7680
                scale = -1, 1
            ]
            
            component pas_resistor "R16" {
                
                resistance = "4761.0"
    	    
            }
            [
                position = 7144, 8272
                rotation = right
            ]
            component "core/Voltage RMS" "Vc_rms"{
                
            }
            [
                position = 7760, 8352
                rotation = right
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "Vb_rms"{
                
            }
            [
                position = 7704, 8304
                rotation = right
                size = 64, 32
            ]
            
            
            component Subsystem "Calculate Vt" {
                layout = dynamic
        
                
                component gen_terminator "Termination1" {
                    
        	    
                }
                [
                    position = 8152, 8144
                ]
                
                component gen_terminator "Termination3" {
                    
        	    
                }
                [
                    position = 8040, 8192
                ]
                
                component gen_math_fnc "squareRoot" {
                    
                    execution_rate = "Ts"
                    mathematical_fn = "sqrt"
        	    
                }
                [
                    position = 8456, 8024
                ]
                
                component src_constant "cte2" {
                    
                    execution_rate = "Ts"
                    value = "[2]"
        	    
                }
                [
                    position = 8192, 8088
                ]
                
                component gen_math_fnc "squaring" {
                    
                    execution_rate = "Ts"
                    mathematical_fn = "power"
        	    
                }
                [
                    position = 8296, 7992
                ]
                
                component gen_terminator "Termination2" {
                    
        	    
                }
                [
                    position = 8096, 8176
                ]
                
                component gen_sum "Sum2" {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 8376, 8024
                ]
                
                component gen_math_fnc "squaring1" {
                    
                    execution_rate = "Ts"
                    mathematical_fn = "power"
        	    
                }
                [
                    position = 8296, 8056
                ]
                
                component gen_pll_three_phs "Voltage PLL" {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7912, 8152
                ]
                
                component gen_terminator "Termination4" {
                    
        	    
                }
                [
                    position = 8008, 8248
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "Va_in" {
                    label = "Va_in"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7768, 8120
                    size = 25, 25
                ]
                port "Vb_in" {
                    label = "Vb_in"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7808, 8152
                    size = 25, 25
                ]
                port "Vc_in" {
                    label = "Vc-in"
                    
                    position = left:3
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7848, 8184
                    size = 25, 25
                ]
                port "Vt_out" {
                    label = "Vt_out"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8528, 8024
                    size = 25, 25
                ]
                
                junction "Junction63" sp
                [
                    position = 8256, 8064
                    size = 0, 0
                ]
                
                connect Junction63 "squaring.in1" as Connection1
                
                
                connect "Sum2.out" "squareRoot.in" as Connection2
                
                
                connect "Sum2.in" "squaring.out" as Connection3
                
                
                connect "Sum2.in1" "squaring1.out" as Connection4
                
                
                connect "Termination1.in" "Voltage PLL.zero_axis" as Connection5
                
                
                connect "Termination3.in" "Voltage PLL.theta" as Connection6
                
                
                connect "Termination4.in" "Voltage PLL.sin_theta" as Connection7
                
                
                connect "Voltage PLL.freq" "Termination2.in" as Connection8
                
                
                connect "Voltage PLL.va" "Va_in" as Connection9
                
                
                connect "Voltage PLL.vb" "Vb_in" as Connection10
                
                
                connect "Voltage PLL.vc" "Vc_in" as Connection11
                
                
                connect "Voltage PLL.d_axis" "squaring.in" as Connection12
                
                
                connect "cte2.out" Junction63 as Connection13
                
                
                connect "squareRoot.out" "Vt_out" as Connection14
                
                
                connect "squaring1.in1" Junction63 as Connection15
                
                
                connect "squaring1.in" "Voltage PLL.q_axis" as Connection16
                
                
        
                
            }
            [
                position = 7920, 7568
                rotation = down
                size = 80, 64
            ]
            component "core/Current RMS" "Ic_rms"{
                
            }
            [
                position = 7472, 8160
                scale = -1, 1
                size = 64, 32
            ]
            
            component "core/Current RMS" "Ib_rms"{
                
            }
            [
                position = 7480, 8064
                scale = -1, 1
                size = 64, 32
            ]
            
            
            component Subsystem "PQ measure" {
                layout = dynamic
        
                
                component gen_terminator "Termination1" {
                    
        	    
                }
                [
                    position = 7936, 8184
                    scale = -1, 1
                ]
                
                component gen_PQ_transform "PQ Power Meter1" {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 8192, 8192
                    scale = -1, 1
                ]
                
                component gen_terminator "Termination2" {
                    
        	    
                }
                [
                    position = 7992, 8208
                    scale = -1, 1
                ]
                
                component gen_terminator "Termination4" {
                    
        	    
                }
                [
                    position = 8104, 8248
                    scale = -1, 1
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "P_meas_out" {
                    label = "P_meas_out"
                    
                    position = left:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8128, 8136
                    rotation = down
                    size = 25, 25
                ]
                port "Q_meas_out" {
                    label = "Q_meas_out"
                    
                    position = left:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8056, 8152
                    rotation = down
                    size = 25, 25
                ]
                port "Va_in" {
                    label = "Va_in"
                    
                    position = right:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8272, 8048
                    rotation = down
                    size = 25, 25
                ]
                port "Vb_in" {
                    label = "Vb_in"
                    
                    position = right:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8304, 8096
                    rotation = down
                    size = 25, 25
                ]
                port "Vc_in" {
                    label = "Vc_in"
                    
                    position = right:4
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8360, 8144
                    rotation = down
                    size = 25, 25
                ]
                port "Ia_in" {
                    label = "Ia_in"
                    
                    position = right:6
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8360, 8240
                    rotation = down
                    size = 25, 25
                ]
                port "Ib_in" {
                    label = "Ib_in"
                    
                    position = right:7
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8312, 8280
                    rotation = down
                    size = 25, 25
                ]
                port "Ic_in" {
                    label = "Ic_in"
                    
                    position = right:10
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8280, 8328
                    rotation = down
                    size = 25, 25
                ]
                port "S_meas_out" {
                    label = "S_meas_out"
                    
                    position = left:3
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 7944, 8272
                    rotation = down
                    size = 25, 25
                ]
                
                connect "PQ Power Meter1.ia" "Ia_in" as Connection1
                
                
                connect "PQ Power Meter1.ib" "Ib_in" as Connection2
                
                
                connect "PQ Power Meter1.ic" "Ic_in" as Connection3
                
                
                connect "PQ Power Meter1.Pdc" "P_meas_out" as Connection4
                
                
                connect "PQ Power Meter1.Qdc" "Q_meas_out" as Connection5
                
                
                connect "PQ Power Meter1.va" "Va_in" as Connection6
                
                
                connect "PQ Power Meter1.vb" "Vb_in" as Connection7
                
                
                connect "PQ Power Meter1.vc" "Vc_in" as Connection8
                
                
                connect "S_meas_out" "PQ Power Meter1.apparent" as Connection9
                
                
                connect "Termination1.in" "PQ Power Meter1.Pac" as Connection10
                
                
                connect "Termination2.in" "PQ Power Meter1.Qac" as Connection11
                
                
                connect "Termination4.in" "PQ Power Meter1.k_factor" as Connection12
                
                
        
                
            }
            [
                position = 7832, 7736
                size = 88, 152
            ]
            component "core/Current RMS" "Ia_rms"{
                
            }
            [
                position = 7480, 7968
                scale = -1, 1
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "Va_rms"{
                
            }
            [
                position = 7648, 8248
                rotation = right
                size = 64, 32
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "a" {
                label = "a"
                
                position = right:1
                kind = pe
            }
            [
                position = 8528, 7968
                rotation = down
            ]
            port "b" {
                label = "b"
                
                position = right:2
                kind = pe
            }
            [
                position = 8528, 8064
                rotation = down
            ]
            port "c" {
                label = "c"
                
                position = right:3
                kind = pe
            }
            [
                position = 8528, 8160
                rotation = down
            ]
            port "A" {
                label = "A"
                
                position = left:1
                kind = pe
            }
            [
                position = 6952, 7968
            ]
            port "B" {
                label = "B"
                
                position = left:2
                kind = pe
            }
            [
                position = 6952, 8064
            ]
            port "C" {
                label = "C"
                
                position = left:3
                kind = pe
            }
            [
                position = 6952, 8160
            ]
            port "Meas_out" {
                label = "Meas_out"
                
                position = top:auto
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 7568, 7584
                scale = -1, 1
            ]
            
            junction "Junction11" pe
            [
                position = 8104, 8416
                size = 0, 0
            ]
            
            junction "Junction19" pe
            [
                position = 8040, 7968
                size = 0, 0
            ]
            
            junction "Junction20" pe
            [
                position = 8104, 8064
                size = 0, 0
            ]
            
            junction "Junction21" pe
            [
                position = 8168, 8160
                size = 0, 0
            ]
            
            junction "Junction22" pe
            [
                position = 8104, 8416
            ]
            
            junction "Junction23" sp
            [
                position = 8008, 7696
            ]
            
            junction "Junction24" sp
            [
                position = 8072, 7712
            ]
            
            junction "Junction25" sp
            [
                position = 8136, 7728
            ]
            
            junction "Junction26" pe
            [
                position = 7648, 7968
            ]
            
            junction "Junction27" pe
            [
                position = 7704, 8064
            ]
            
            junction "Junction28" pe
            [
                position = 7760, 8160
            ]
            
            junction "Junction29" pe
            [
                position = 7704, 8416
            ]
            
            junction "Junction30" pe
            [
                position = 7760, 8416
            ]
            
            junction "Junction31" pe
            [
                position = 8040, 8416
            ]
            
            junction "Junction34" pe
            [
                position = 7272, 8064
            ]
            
            junction "Junction35" pe
            [
                position = 7272, 8064
            ]
            
            junction "Junction36" pe
            [
                position = 7272, 7968
            ]
            
            junction "Junction37" pe
            [
                position = 7272, 8160
            ]
            
            junction "Junction38" pe
            [
                position = 7360, 8160
            ]
            
            junction "Junction39" pe
            [
                position = 7360, 7968
            ]
            
            junction "Junction97" pe
            [
                position = 7088, 8352
                size = 0, 0
            ]
            
            junction "Junction1475" pe
            [
                position = 7088, 8352
            ]
            
            junction "Junction1476" pe
            [
                position = 7144, 7968
            ]
            
            junction "Junction1477" pe
            [
                position = 7088, 8064
            ]
            
            junction "Junction1478" pe
            [
                position = 7032, 8160
            ]
            
            junction "Junction1479" sp
            [
                position = 7768, 7736
            ]
            
            junction "Junction1480" sp
            [
                position = 7744, 7680
            ]
            
            connect "Bus Join1.in1" Junction1479 as Connection368
            
            
            connect "Bus Join1.in" Junction1480 as Connection373
            
            
            connect "C1.n_node" Junction35 as Connection278
            
            
            connect "C1.p_node" Junction36 as Connection281
            
            
            connect "C2.p_node" Junction35 as Connection276
            
            
            connect "C2.n_node" Junction37 as Connection284
            
            
            connect "C3.p_node" Junction38 as Connection287
            
            
            connect "C3.n_node" Junction39 as Connection290
            
            
            connect "Calculate Vt.Vt_out" "Bus Join1.in2" as Connection365
            
            
            connect "Calculate Vt.Va_in" Junction23 as Connection232
            
            
            connect "Calculate Vt.Vb_in" Junction24 as Connection235
            
            
            connect "Calculate Vt.Vc_in" Junction25 as Connection238
            
            
            connect "Gain8.in" Junction1479 as Connection366
            
            
            connect "Gain9.in" Junction1480 as Connection375
            
            
            connect "Ia.out" "PQ measure.Ia_in" as Connection239
            
            
            connect "Ia.p_node" a as Connection218
            
            
            connect "Ia_rms.n_node" Junction39 as Connection288
            
            
            connect "Ib.n_node" Junction20 as Connection63
            
            
            connect "Ib.out" "PQ measure.Ib_in" as Connection240
            
            
            connect "Ib.p_node" b as Connection212
            
            
            connect "Ib_rms.n_node" Junction34 as Connection273
            
            
            connect "Ic.n_node" Junction21 as Connection69
            
            
            connect "Ic.out" "PQ measure.Ic_in" as Connection241
            
            
            connect "Ic.p_node" c as Connection217
            
            
            connect "Ic_rms.n_node" Junction38 as Connection285
            
            
            connect Junction11 Junction22 as Connection222
            
            
            connect Junction1475 Junction97 as Connection352
            
            
            connect Junction1476 A as Connection355
            
            
            connect Junction1477 B as Connection358
            
            
            connect Junction1478 C as Connection361
            
            
            connect Junction1479 "PQ measure.Q_meas_out" as Connection367
            
            
            connect Junction1480 "PQ measure.P_meas_out" as Connection374
            
            
            connect Junction19 "Ia.n_node" as Connection128
            
            
            connect Junction19 Junction26 as Connection248
            
            
            connect Junction19 "Va.p_node" as Connection129
            
            
            connect Junction20 Junction27 as Connection251
            
            
            connect Junction20 "Vb.p_node" as Connection131
            
            
            connect Junction21 Junction28 as Connection254
            
            
            connect Junction21 "Vc.p_node" as Connection132
            
            
            connect Junction22 "Vc.n_node" as Connection223
            
            
            connect Junction23 "PQ measure.Va_in" as Connection231
            
            
            connect Junction24 "PQ measure.Vb_in" as Connection234
            
            
            connect Junction25 "PQ measure.Vc_in" as Connection237
            
            
            connect Junction26 "Ia_rms.p_node" as Connection249
            
            
            connect Junction27 "Ib_rms.p_node" as Connection252
            
            
            connect Junction28 "Ic_rms.p_node" as Connection255
            
            
            connect Junction29 Junction30 as Connection261
            
            
            connect Junction30 Junction31 as Connection265
            
            
            connect Junction30 "Vc_rms.n_node" as Connection262
            
            
            connect Junction31 Junction22 as Connection264
            
            
            connect Junction34 Junction1477 as Connection357
            
            
            connect Junction35 Junction34 as Connection277
            
            
            connect Junction36 Junction1476 as Connection354
            
            
            connect Junction37 Junction1478 as Connection360
            
            
            connect Junction38 Junction37 as Connection286
            
            
            connect Junction39 Junction36 as Connection289
            
            
            connect Junction97 "R16.n_node" as Connection140
            
            
            connect "Meas_out" "Bus Join1.out" as Connection376
            
            
            connect "PQ measure.S_meas_out" "Gain7.in" as Connection157
            
            
            connect "P_Gen1.in" "Gain9.out" as Connection158
            
            
            connect "Q_Gen1.in" "Gain8.out" as Connection161
            
            
            connect "R14.p_node" Junction1478 as Connection362
            
            
            connect "R14.n_node" Junction97 as Connection165
            
            
            connect "R15.n_node" Junction1475 as Connection351
            
            
            connect "R15.p_node" Junction1477 as Connection359
            
            
            connect "R16.p_node" Junction1476 as Connection356
            
            
            connect "S_Gen1.in" "Gain7.out" as Connection192
            
            
            connect "Va.n_node" Junction11 as Connection207
            
            
            connect "Va.out" Junction23 as Connection230
            
            
            connect "Va_rms.p_node" Junction26 as Connection250
            
            
            connect "Va_rms.n_node" Junction29 as Connection258
            
            
            connect "Vb.n_node" Junction11 as Connection209
            
            
            connect "Vb.out" Junction24 as Connection233
            
            
            connect "Vb_rms.p_node" Junction27 as Connection253
            
            
            connect "Vb_rms.n_node" Junction29 as Connection260
            
            
            connect "Vc.out" Junction25 as Connection236
            
            
            connect "Vc_rms.p_node" Junction28 as Connection256
            
            
            connect "gnd3.node" Junction31 as Connection263
            
            
            connect "gnd4.node" Junction1475 as Connection353
            
            
    
            
        }
        [
            position = 9176, 8072
            size = 112, 112
        ]
        
        component Subsystem "Control" {
            layout = dynamic
    
            
            component gen_terminator "Termination1" {
                
    	    
            }
            [
                position = 7544, 8280
            ]
            
            component gen_probe "T_out" {
                
    	    
            }
            [
                position = 8312, 8080
            ]
            
            component gen_probe "Vf_exciter" {
                
    	    
            }
            [
                position = 8280, 7880
            ]
            
            component gen_bus_split "Bus Split1" {
                
                outputs = "3"
    	    
            }
            [
                position = 7464, 8096
                rotation = right
            ]
            
            component gen_bus_join "Bus Join1" {
                
    	    
            }
            [
                position = 8304, 8280
            ]
            
            component gen_bus_split "Bus Split2" {
                
                outputs = "3"
    	    
            }
            [
                position = 7512, 7936
            ]
            
            component gen_terminator "Termination2" {
                
    	    
            }
            [
                position = 7608, 8000
            ]
            
            component Subsystem "P Secondary Control1" {
                layout = dynamic
        
                
                component src_constant "zero" {
                    
                    execution_rate = "Ts"
                    value = "[0]"
        	    
                }
                [
                    position = 8304, 8080
                ]
                
                component sys_signal_switch "Signal switch2" {
                    
                    criterion = "ctrl > threshold"
                    execution_rate = "Ts"
                    threshold = "0.5"
        	    
                }
                [
                    position = 7984, 8040
                ]
                
                component sys_signal_switch "Signal switch1" {
                    
                    criterion = "ctrl > threshold"
                    execution_rate = "Ts"
                    threshold = "0.5"
        	    
                }
                [
                    position = 8376, 8064
                ]
                
                component src_cp_input "Pref" {
                    
                    addr = "1427111936"
                    def_value = "1"
                    execution_rate = "Ts"
                    group = "Secondary Control"
                    max = "1000000.0"
                    min = "-1000000.0"
                    unit = ""
                    widget_label = "Pref_gen1"
        	    
                }
                [
                    position = 7848, 8024
                ]
                
                component gen_gain "P_3ph_to_pu" {
                    
                    execution_rate = "Ts"
                    gain = "1/Sb_gen1"
        	    
                }
                [
                    position = 8024, 8136
                    rotation = down
                    scale = -1, 1
                ]
                
                component gen_rate_limiter "Rate Limiter1" {
                    
                    falling_limit = "[-0.01]"
                    rising_limit = "[0.01]"
        	    
                }
                [
                    position = 8048, 8040
                ]
                
                component src_constant "Constant1" {
                    
                    execution_rate = "Ts"
                    value = "0"
        	    
                }
                [
                    position = 7904, 8056
                ]
                
                component gen_probe "delta_w" {
                    
                    addr = "8975"
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 8456, 8024
                ]
                
                component gen_probe "Pmeas" {
                    
                    addr = "8973"
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 8112, 8176
                ]
                
                component gen_sum "Sum4" {
                    
                    execution_rate = "Ts"
                    signs = "+-"
        	    
                }
                [
                    position = 8144, 8048
                ]
                
                component Subsystem "PI" {
                    layout = dynamic
            
                    
                    component gen_gain "ki" {
                        
                        gain = "[0.00001]"
            	    
                    }
                    [
                        position = 8112, 8168
                    ]
                    
                    component gen_gain "kp" {
                        
                        gain = "[0.6]"
            	    
                    }
                    [
                        position = 8112, 8224
                    ]
                    
                    component gen_integrator "Integrator1" {
                        
                        limit_lower = "[-0.15]"
                        limit_output = "True"
                        limit_upper = "[0.15]"
                        show_reset = "either"
            	    
                    }
                    [
                        position = 8216, 8232
                    ]
                    
                    component gen_sum "Sum5" {
                        
            	    
                    }
                    [
                        position = 8312, 8208
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "Reset" {
                        label = "Reset"
                        
                        position = top:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8056, 8288
                        size = 25, 25
                    ]
                    port "In" {
                        label = "In"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8008, 8192
                        size = 25, 25
                    ]
                    port "Out" {
                        label = "Out"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8456, 8208
                        size = 25, 25
                    ]
                    
                    junction "Junction71" sp
                    [
                        position = 8072, 8192
                        size = 0, 0
                    ]
                    
                    connect In Junction71 as Connection1
                    
                    
                    connect "Integrator1.reset" Reset as Connection2
                    
                    
                    connect "Integrator1.in" "kp.out" as Connection3
                    
                    
                    connect Junction71 "ki.in" as Connection4
                    
                    
                    connect "Sum5.in1" "Integrator1.out" as Connection6
                    
                    
                    connect "Sum5.out" Out as Connection10
                    
                    
                    connect "Sum5.in" "ki.out" as Connection8
                    
                    
                    connect "kp.in" Junction71 as Connection9
                    
                    
            
                    
                }
                [
                    position = 8240, 8048
                    size = 64, 48
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "Delta_w_out" {
                    label = "Delta_w_out"
                    
                    position = right:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8504, 8064
                    size = 25, 25
                ]
                port "Pmeas_in" {
                    label = "P_meas"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7920, 8136
                    rotation = down
                    scale = -1, 1
                    size = 25, 25
                ]
                port "Gridtied" {
                    label = "Gridtied"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7888, 7960
                ]
                
                junction "Junction60" sp
                [
                    position = 8408, 8064
                    size = 0, 0
                ]
                
                junction "Junction95" sp
                [
                    position = 8072, 8136
                    size = 0, 0
                ]
                
                junction "Junction96" sp
                [
                    position = 7984, 7960
                ]
                
                junction "Junction97" sp
                [
                    position = 8240, 7960
                ]
                
                connect "Constant1.out" "Signal switch2.in1" as Connection37
                
                
                connect Junction60 "Delta_w_out" as Connection1
                
                
                connect Junction95 "Sum4.in1" as Connection4
                
                
                connect Junction96 Gridtied as Connection50
                [
                    breakpoints =7984, 7960
                ]
                
                connect Junction96 Junction97 as Connection53
                
                
                connect Junction97 "PI.Reset" as Connection52
                
                
                connect "PI.Out" "Signal switch1.in" as Connection7
                
                
                connect "P_3ph_to_pu.out" Junction95 as Connection9
                
                
                connect "Pmeas.in" Junction95 as Connection11
                
                
                connect "Pmeas_in" "P_3ph_to_pu.in" as Connection12
                
                
                connect "Pref.out" "Signal switch2.in" as Connection35
                
                
                connect "Signal switch1.out" Junction60 as Connection14
                
                
                connect "Signal switch1.in2" Junction97 as Connection51
                [
                    breakpoints =8376, 7984
                ]
                
                connect "Signal switch1.in1" "zero.out" as Connection29
                
                
                connect "Signal switch2.in2" Junction96 as Connection49
                
                
                connect "Signal switch2.out" "Rate Limiter1.in" as Connection36
                
                
                connect "Sum4.out" "PI.In" as Connection30
                
                
                connect "Sum4.in" "Rate Limiter1.out" as Connection17
                
                
                connect "delta_w.in" Junction60 as Connection19
                
                
        
                
            }
            [
                position = 7800, 8136
                size = 112, 80
            ]
            
            component Subsystem "Exciter1" {
                layout = dynamic
        
                
                component gen_gain "Vt_to_Vtpu" {
                    
                    execution_rate = "Ts"
                    gain = "1/Vb_gen1"
        	    
                }
                [
                    position = 8336, 8312
                ]
                
                component gen_digital_probe "Exciter_on" {
                    
        	    
                }
                [
                    position = 8216, 8408
                ]
                
                component src_constant "Constant1" {
                    
                    execution_rate = "Ts"
                    value = "0"
        	    
                }
                [
                    position = 8024, 8160
                ]
                
                component gen_comparator "Comparator1" {
                    
        	    
                }
                [
                    position = 7952, 8424
                ]
                
                component gen_gain "Exciter_start_speed" {
                    
                    gain = "[0.75]"
        	    
                }
                [
                    position = 7880, 8472
                ]
                
                component gen_DC1A_exciter "IEEE DC1A exciter1" {
                    
                    Ka = "Ka_gen1"
                    Ke = "Ke_gen1"
                    Kf = "Kf_gen1"
                    Ta = "Ta_gen1"
                    Tb = "Tb_gen1"
                    Tc = "Tc_gen1"
                    Te = "Te_gen1"
                    Tf = "Tf_gen1"
                    Tr = "Tr_gen1"
                    VRmax = "Efmax_gen1"
                    VRmin = "Efmin_gen1"
                    disable_fdbck_stab = "False"
                    execution_rate = "Ts"
                    initial_field_voltage = "Vf0_gen1"
                    initial_terminal_voltage = "Vt0_gen1"
                    start_time = "0"
        	    
                }
                [
                    position = 8456, 8208
                ]
                
                component gen_probe "Vf" {
                    
                    addr = "8979"
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 8760, 8136
                ]
                
                component gen_logic_op "Logical operator1" {
                    
        	    
                }
                [
                    position = 8040, 8368
                ]
                
                component src_constant "steadyState_w" {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7784, 8472
                ]
                
                component src_constant "Const" {
                    
                    execution_rate = "Ts"
                    value = "Const_gen1"
        	    
                }
                [
                    position = 8232, 8088
                ]
                
                component gen_limiter "Limit1" {
                    
                    lower_limit = "[0]"
        	    
                }
                [
                    position = 8696, 8208
                ]
                
                component gen_rate_limiter "Rate Limiter1" {
                    
                    falling_limit = "-0.5"
                    rising_limit = "0.5"
        	    
                }
                [
                    position = 8184, 8200
                ]
                
                component src_constant "Vpss" {
                    
                    execution_rate = "Ts"
                    value = "[0]"
        	    
                }
                [
                    position = 8184, 8104
                ]
                
                component gen_gain "w to wpu" {
                    
                    execution_rate = "Ts"
                    gain = "1.0/wmb_gen1"
        	    
                }
                [
                    position = 7880, 8416
                    rotation = down
                    scale = -1, 1
                ]
                
                component sys_signal_switch "Signal switch1" {
                    
                    threshold = "0.5"
        	    
                }
                [
                    position = 8096, 8200
                    scale = 1, -1
                ]
                
                component gen_gain "Vfpu_to_Vf" {
                    
                    execution_rate = "Ts"
                    gain = "[35.67]"
        	    
                }
                [
                    position = 8800, 8208
                ]
                
                component gen_sum "Sum1" {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 8320, 8096
                ]
                
                component src_cp_input "Vref" {
                    
                    addr = "1427111940"
                    def_value = "1"
                    execution_rate = "Ts"
                    group = "Exciter Settings"
                    max = "1000000.0"
                    min = "-1000000.0"
                    unit = "pu"
                    widget_label = "Vref_gen1"
        	    
                }
                [
                    position = 8016, 8216
                ]
                
                component gen_probe "Vt" {
                    
                    addr = "8978"
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 8424, 8312
                ]
                
                component gen_sum "Sum5" {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 8336, 8208
                ]
                
                component Subsystem "PI" {
                    layout = dynamic
            
                    
                    component gen_gain "kp" {
                        
                        gain = "1.5"
            	    
                    }
                    [
                        position = 8112, 8168
                    ]
                    
                    component gen_integrator "Integrator1" {
                        
                        limit_lower = "[-5]"
                        limit_output = "True"
                        limit_upper = "[5]"
                        show_reset = "either"
            	    
                    }
                    [
                        position = 8216, 8224
                    ]
                    
                    component gen_sum "Sum5" {
                        
            	    
                    }
                    [
                        position = 8320, 8208
                    ]
                    
                    component gen_gain "ki" {
                        
                        gain = "0.5"
            	    
                    }
                    [
                        position = 8112, 8224
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "Reset" {
                        label = "reset"
                        
                        position = bottom:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8056, 8288
                        size = 25, 25
                    ]
                    port "In" {
                        label = "In"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8008, 8192
                        size = 25, 25
                    ]
                    port "Out" {
                        label = "Out"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8392, 8208
                        size = 25, 25
                    ]
                    
                    junction "Junction71" sp
                    [
                        position = 8072, 8192
                        size = 0, 0
                    ]
                    
                    connect In Junction71 as Connection1
                    
                    
                    connect "Integrator1.reset" Reset as Connection2
                    
                    
                    connect "Integrator1.in" "ki.out" as Connection3
                    
                    
                    connect Junction71 "kp.in" as Connection4
                    
                    
                    connect "Sum5.in1" "Integrator1.out" as Connection5
                    
                    
                    connect "Sum5.out" Out as Connection6
                    
                    
                    connect "Sum5.in" "kp.out" as Connection7
                    
                    
                    connect "ki.in" Junction71 as Connection8
                    
                    
            
                    
                }
                [
                    position = 8600, 8208
                    size = 64, 48
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "Delta_V_in" {
                    label = "Delta_V_in"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8264, 8216
                    size = 25, 25
                ]
                port "Vf_out" {
                    label = "Vf_out"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8888, 8208
                    size = 25, 25
                ]
                port "Vt_in" {
                    label = "Vt_in"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8272, 8312
                    size = 25, 25
                ]
                port "Gen_On" {
                    label = "Gen_On"
                    
                    position = left:3
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7952, 8360
                    size = 25, 25
                ]
                port "w_meas" {
                    label = "w_meas"
                    
                    position = left:4
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7784, 8416
                    size = 25, 25
                ]
                
                junction "Junction100" sp
                [
                    position = 8096, 8368
                ]
                
                junction "Junction101" sp
                [
                    position = 8176, 8368
                ]
                
                junction "Junction106" sp
                [
                    position = 8376, 8312
                ]
                
                junction "Junction107" sp
                [
                    position = 8728, 8208
                ]
                
                connect "Comparator1.out" "Logical operator1.in1" as Connection73
                
                
                connect "Comparator1.in1" "w to wpu.out" as Connection2
                
                
                connect "Const.out" "Sum1.in" as Connection3
                
                
                connect "Constant1.out" "Signal switch1.in1" as Connection45
                
                
                connect "Exciter_on.in" Junction101 as Connection4
                
                
                connect "Exciter_start_speed.out" "Comparator1.in2" as Connection5
                
                
                connect "Gen_On" "Logical operator1.in" as Connection74
                
                
                connect "IEEE DC1A exciter1.terminal_voltage" Junction106 as Connection43
                
                
                connect Junction100 Junction101 as Connection9
                
                
                connect Junction101 "PI.Reset" as Connection10
                
                
                connect Junction106 "Vt.in" as Connection42
                
                
                connect Junction107 "Vf.in" as Connection63
                
                
                connect "Limit1.out" Junction107 as Connection62
                
                
                connect "Logical operator1.out" Junction100 as Connection17
                
                
                connect "PI.In" "IEEE DC1A exciter1.field_voltage" as Connection19
                
                
                connect "PI.Out" "Limit1.in" as Connection72
                
                
                connect "Rate Limiter1.in" "Signal switch1.out" as Connection58
                
                
                connect "Rate Limiter1.out" "Sum5.in" as Connection59
                
                
                connect "Signal switch1.in2" Junction100 as Connection21
                
                
                connect "Sum1.out" "IEEE DC1A exciter1.vpss" as Connection24
                
                
                connect "Sum5.in1" "Delta_V_in" as Connection25
                
                
                connect "Sum5.out" "IEEE DC1A exciter1.vref" as Connection60
                
                
                connect "Vfpu_to_Vf.in" Junction107 as Connection64
                
                
                connect "Vfpu_to_Vf.out" "Vf_out" as Connection65
                
                
                connect "Vpss.out" "Sum1.in1" as Connection32
                
                
                connect "Vref.out" "Signal switch1.in" as Connection57
                
                
                connect "Vt_to_Vtpu.out" Junction106 as Connection41
                
                
                connect "Vt_to_Vtpu.in" "Vt_in" as Connection36
                
                
                connect "steadyState_w.out" "Exciter_start_speed.in" as Connection56
                
                
                connect "w_meas" "w to wpu.in" as Connection75
                
                
        
                
            }
            [
                position = 8128, 7944
                size = 112, 160
            ]
            
            component Subsystem "Q Secondary Control1" {
                layout = dynamic
        
                
                component gen_probe "delta_V" {
                    
                    addr = "8972"
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 8472, 8176
                ]
                
                component sys_signal_switch "Signal switch2" {
                    
                    criterion = "ctrl > threshold"
                    execution_rate = "Ts"
                    threshold = "0.5"
        	    
                }
                [
                    position = 7960, 8208
                ]
                
                component gen_rate_limiter "Rate Limiter1" {
                    
                    falling_limit = "[-0.01]"
                    rising_limit = "[0.01]"
        	    
                }
                [
                    position = 8032, 8208
                ]
                
                component gen_logic_op "Logical operator5" {
                    
        	    
                }
                [
                    position = 8144, 8056
                ]
                
                component sys_signal_switch "Signal switch4" {
                    
                    criterion = "ctrl > threshold"
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 8384, 8232
                ]
                
                component src_cp_input "Q_Control_Mode" {
                    
                    addr = "1427111944"
                    execution_rate = "Ts"
                    group = "Governor Settings"
                    max = "1"
                    min = "0"
                    unit = ""
                    widget_label = "Q_controlMode_gen1"
        	    
                }
                [
                    position = 7960, 8048
                ]
                
                component src_constant "Constant1" {
                    
                    execution_rate = "Ts"
                    value = "0"
        	    
                }
                [
                    position = 7880, 8224
                ]
                
                component src_constant "zero1" {
                    
                    execution_rate = "Ts"
                    value = "[0]"
        	    
                }
                [
                    position = 8288, 8248
                ]
                
                component gen_sum "Sum6" {
                    
                    execution_rate = "Ts"
                    signs = "+-"
        	    
                }
                [
                    position = 8120, 8216
                ]
                
                component gen_gain "Q_3ph_to_pu" {
                    
                    execution_rate = "Ts"
                    gain = "1/Sb_gen1"
        	    
                }
                [
                    position = 8032, 8304
                    rotation = down
                    scale = -1, 1
                ]
                
                component gen_probe "Qmeas" {
                    
                    addr = "8974"
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 8128, 8304
                ]
                
                component src_cp_input "Qref" {
                    
                    addr = "1427111948"
                    def_value = "1"
                    execution_rate = "Ts"
                    group = "Secondary Control"
                    max = "1000000.0"
                    min = "-1000000.0"
                    unit = ""
                    widget_label = "Qref_gen1"
        	    
                }
                [
                    position = 7840, 8192
                ]
                
                component Subsystem "PI" {
                    layout = dynamic
            
                    
                    component gen_integrator "Integrator1" {
                        
                        limit_lower = "[-1]"
                        limit_output = "True"
                        limit_upper = "[1]"
                        show_reset = "either"
            	    
                    }
                    [
                        position = 8216, 8224
                    ]
                    
                    component gen_gain "ki" {
                        
                        gain = "[0.001]"
            	    
                    }
                    [
                        position = 8112, 8168
                    ]
                    
                    component gen_sum "Sum5" {
                        
            	    
                    }
                    [
                        position = 8320, 8208
                    ]
                    
                    component gen_gain "kp" {
                        
            	    
                    }
                    [
                        position = 8112, 8224
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "Reset" {
                        label = "reset"
                        
                        position = top:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8056, 8288
                        size = 25, 25
                    ]
                    port "In" {
                        label = "In"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8008, 8192
                        size = 25, 25
                    ]
                    port "Out" {
                        label = "Out"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8392, 8208
                        size = 25, 25
                    ]
                    
                    junction "Junction71" sp
                    [
                        position = 8072, 8192
                        size = 0, 0
                    ]
                    
                    connect In Junction71 as Connection1
                    
                    
                    connect "Integrator1.reset" Reset as Connection2
                    
                    
                    connect "Integrator1.in" "kp.out" as Connection3
                    
                    
                    connect Junction71 "ki.in" as Connection4
                    
                    
                    connect "Sum5.in1" "Integrator1.out" as Connection5
                    
                    
                    connect "Sum5.out" Out as Connection6
                    
                    
                    connect "Sum5.in" "ki.out" as Connection7
                    
                    
                    connect "kp.in" Junction71 as Connection8
                    
                    
            
                    
                }
                [
                    position = 8224, 8216
                    size = 64, 48
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                tag "From2" {
                    value = "Q_mode"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7896, 8136
                ]
                
                tag "Goto1" {
                    value = "Q_mode"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8312, 8056
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "Q_meas_in" {
                    label = "Q_meas_in"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7968, 8304
                    size = 25, 25
                ]
                port "Delta_V_out" {
                    label = "Delta_V_in"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8472, 8232
                    size = 25, 25
                ]
                port "gridtied" {
                    label = "Gridtied"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8056, 8064
                ]
                port "Q_mode" {
                    label = "Q_mode"
                    
                    position = right:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8248, 8008
                ]
                
                junction "Junction75" sp
                [
                    position = 8424, 8232
                    size = 0, 0
                ]
                
                junction "Junction78" sp
                [
                    position = 8080, 8304
                    size = 0, 0
                ]
                
                junction "Junction80" sp
                [
                    position = 8200, 8056
                ]
                
                junction "Junction81" sp
                [
                    position = 7960, 8136
                ]
                
                junction "Junction82" sp
                [
                    position = 8224, 8136
                ]
                
                connect "Constant1.out" "Signal switch2.in1" as Connection40
                
                
                connect From2 Junction81 as Connection52
                
                
                connect Goto1 Junction80 as Connection48
                
                
                connect Junction75 "Delta_V_out" as Connection2
                
                
                connect Junction78 "Sum6.in1" as Connection5
                
                
                connect Junction80 "Logical operator5.out" as Connection49
                
                
                connect Junction81 Junction82 as Connection56
                
                
                connect Junction81 "Signal switch2.in2" as Connection53
                
                
                connect Junction82 "Signal switch4.in2" as Connection55
                [
                    breakpoints =8224, 8136
                ]
                
                connect "Logical operator5.in" "Q_Control_Mode.out" as Connection36
                
                
                connect "PI.Reset" Junction82 as Connection54
                
                
                connect "PI.In" "Sum6.out" as Connection34
                
                
                connect "Q_3ph_to_pu.out" Junction78 as Connection11
                
                
                connect "Q_3ph_to_pu.in" "Q_meas_in" as Connection12
                
                
                connect "Q_mode" Junction80 as Connection50
                
                
                connect "Qmeas.in" Junction78 as Connection14
                
                
                connect "Qref.out" "Signal switch2.in" as Connection42
                
                
                connect "Rate Limiter1.out" "Sum6.in" as Connection26
                
                
                connect "Signal switch2.out" "Rate Limiter1.in" as Connection43
                
                
                connect "Signal switch4.out" Junction75 as Connection17
                
                
                connect "Signal switch4.in" "PI.Out" as Connection27
                
                
                connect "Signal switch4.in1" "zero1.out" as Connection33
                
                
                connect "delta_V.in" Junction75 as Connection20
                
                
                connect gridtied "Logical operator5.in1" as Connection47
                
                
        
                
            }
            [
                position = 7800, 7904
                size = 112, 80
            ]
            
            component Subsystem "Read_Control_mode" {
                layout = dynamic
        
                
                component gen_logic_op "Logical operator2" {
                    
        	    
                }
                [
                    position = 8344, 8184
                ]
                
                component src_constant "Constant1" {
                    
                    execution_rate = "Ts"
                    value = "0.5"
        	    
                }
                [
                    position = 7960, 8120
                ]
                
                component gen_logic_op "Logical operator3" {
                    
                    operator = "NOT"
        	    
                }
                [
                    position = 8176, 8208
                ]
                
                component gen_logic_op "Logical operator4" {
                    
        	    
                }
                [
                    position = 8360, 8328
                ]
                
                component gen_rel_op "Relational operator1" {
                    
                    relational_op = ">"
        	    
                }
                [
                    position = 8064, 8088
                ]
                
                component gen_logic_op "Logical operator5" {
                    
                    operator = "NOT"
        	    
                }
                [
                    position = 8264, 8272
                    rotation = right
                ]
                
                component gen_digital_probe "Vf_mode" {
                    
        	    
                }
                [
                    position = 8432, 8328
                ]
                
                component gen_rel_op "Relational operator2" {
                    
                    relational_op = ">"
        	    
                }
                [
                    position = 8064, 8152
                    scale = 1, -1
                ]
                
                component gen_digital_probe "PQ_mode" {
                    
        	    
                }
                [
                    position = 8344, 8096
                ]
                
                component gen_digital_probe "PV_mode" {
                    
        	    
                }
                [
                    position = 8432, 8184
                ]
                
                component gen_logic_op "Logical operator1" {
                    
        	    
                }
                [
                    position = 8216, 8096
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "P_mode" {
                    label = "P_mode"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7888, 8080
                ]
                port "Q_mode" {
                    label = "Q_mode"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7888, 8160
                ]
                
                junction "Junction83" sp
                [
                    position = 8120, 8152
                ]
                
                junction "Junction84" sp
                [
                    position = 8152, 8088
                ]
                
                junction "Junction86" sp
                [
                    position = 8216, 8208
                ]
                
                junction "Junction87" sp
                [
                    position = 8264, 8176
                ]
                
                junction "Junction90" sp
                [
                    position = 8000, 8120
                ]
                
                connect "Constant1.out" Junction90 as Connection69
                
                
                connect Junction83 "Relational operator2.out" as Connection42
                
                
                connect Junction84 "Relational operator1.out" as Connection72
                
                
                connect Junction86 "Logical operator2.in1" as Connection54
                
                
                connect Junction87 Junction84 as Connection57
                
                
                connect Junction90 "Relational operator1.in1" as Connection70
                
                
                connect "Logical operator1.in1" Junction83 as Connection41
                
                
                connect "Logical operator1.in" Junction84 as Connection44
                
                
                connect "Logical operator2.in" Junction87 as Connection56
                
                
                connect "Logical operator3.in" Junction83 as Connection73
                
                
                connect "Logical operator3.out" Junction86 as Connection53
                
                
                connect "Logical operator4.in1" Junction86 as Connection55
                
                
                connect "Logical operator5.in" Junction87 as Connection58
                
                
                connect "Logical operator5.out" "Logical operator4.in" as Connection59
                
                
                connect "PQ_mode.in" "Logical operator1.out" as Connection39
                
                
                connect "PV_mode.in" "Logical operator2.out" as Connection52
                
                
                connect "P_mode" "Relational operator1.in" as Connection74
                
                
                connect "Q_mode" "Relational operator2.in" as Connection75
                
                
                connect "Relational operator2.in1" Junction90 as Connection71
                
                
                connect "Vf_mode.in" "Logical operator4.out" as Connection60
                
                
        
                
            }
            [
                position = 7784, 8256
                size = 72, 80
            ]
            
            component Subsystem "Governor_and_Engine1" {
                layout = dynamic
        
                
                component gen_probe "dw_sync" {
                    
        	    
                }
                [
                    position = 7488, 8064
                ]
                
                component gen_rate_limiter "Rate Limiter1" {
                    
                    falling_limit = "-0.5"
                    rising_limit = "0.5"
        	    
                }
                [
                    position = 7256, 7968
                ]
                
                component sys_signal_switch "Signal switch1" {
                    
                    threshold = "0.5"
        	    
                }
                [
                    position = 7184, 7968
                ]
                
                component src_constant "Constant1" {
                    
                    execution_rate = "Ts"
                    value = "0.0"
        	    
                }
                [
                    position = 7120, 7984
                ]
                
                component gen_probe "w_ref_probe" {
                    
        	    
                }
                [
                    position = 7616, 7936
                ]
                
                component src_cp_input "Gen1_On" {
                    
                    addr = "1427111952"
                    execution_rate = "Ts"
                    group = "Governor Settings"
                    max = "1"
                    min = "0"
                    unit = ""
                    widget_label = "Gen_On"
        	    
                }
                [
                    position = 7136, 7848
                ]
                
                component gen_sum "Sum4" {
                    
                    signs = "3"
        	    
                }
                [
                    position = 7488, 7984
                ]
                
                component src_cp_input "wref" {
                    
                    addr = "1427111952"
                    def_value = "1"
                    execution_rate = "Ts"
                    group = "Governor Settings"
                    max = "1000000.0"
                    min = "-1000000.0"
                    unit = ""
                    widget_label = "wref_gen1"
        	    
                }
                [
                    position = 7072, 7952
                ]
                
                component gen_probe "wmeas" {
                    
                    addr = "8977"
                    execution_rate = "Ts"
                    signal_type = "angular speed"
        	    
                }
                [
                    position = 7728, 8072
                ]
                
                component gen_gain "w to wpu" {
                    
                    execution_rate = "Ts"
                    gain = "1/wmb_gen1"
        	    
                }
                [
                    position = 7632, 8032
                    rotation = down
                    scale = -1, 1
                ]
                
                component gen_probe "Tmec" {
                    
                    addr = "8980"
                    execution_rate = "Ts"
                    signal_type = "power"
        	    
                }
                [
                    position = 7904, 7944
                ]
                
                component gen_gain "Tpu to T" {
                    
                    execution_rate = "Ts"
                    gain = "-Trq_b_gen1"
        	    
                }
                [
                    position = 7904, 8000
                ]
                
                component gen_digital_probe "Gen_On" {
                    
        	    
                }
                [
                    position = 7256, 7904
                ]
                
                component Subsystem "DEGOV" {
                    layout = dynamic
            
                    
                    component gen_integrator "Integrator1" {
                        
                        execution_rate = "Ts"
                        init_value = "Pm0"
                        limit_lower = "Tmin"
                        limit_output = "True"
                        limit_upper = "Tmax"
            	    
                    }
                    [
                        position = 8376, 8168
                    ]
                    
                    component gen_transport_delay "Transport Delay1" {
                        
                        execution_rate = "Ts"
                        init_value = "Pm0"
                        time_delay = "Td"
            	    
                    }
                    [
                        position = 8520, 8168
                    ]
                    
                    component gen_gain "GainK" {
                        
                        execution_rate = "Ts"
                        gain = "K"
            	    
                    }
                    [
                        position = 8152, 8168
                    ]
                    
                    component gen_z_domain_transfer "TF4" {
                        
                        a_coeff = "denTF4d"
                        b_coeff = "numTF4d"
                        execution_rate = "Ts"
                        init_states = "[0]"
            	    
                    }
                    [
                        position = 8224, 8168
                    ]
                    
                    component gen_z_domain_transfer "TF3" {
                        
                        a_coeff = "denTF3d"
                        b_coeff = "numTF3d"
                        execution_rate = "Ts"
                        init_states = "[0]"
            	    
                    }
                    [
                        position = 8296, 8168
                    ]
                    
                    component gen_sum "Sum3" {
                        
                        execution_rate = "Ts"
                        signs = "+-"
            	    
                    }
                    [
                        position = 7888, 8168
                    ]
                    
                    component gen_z_domain_transfer "TF1" {
                        
                        a_coeff = "denTF1d"
                        b_coeff = "numTF1d"
                        execution_rate = "Ts"
                        init_states = "[0]"
            	    
                    }
                    [
                        position = 7968, 8168
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "wref" {
                        label = "wref"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7768, 8160
                    ]
                    port "wmeas" {
                        label = "wmeas"
                        
                        position = left:2
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7768, 8224
                    ]
                    port "T" {
                        label = "T"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8640, 8168
                    ]
                    
                    comment Comment3 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Actuator:</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">          K (1 + sT4)</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">----------------------------------</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    s(1 + sT5)(1 + sT6)</p></body></html>                                   ENDCOMMENT 
                    [
                        position = 8120, 8216
                        size = 0, 0
                    ]
                    
                    comment Comment1 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Engine</p></body></html>                                   ENDCOMMENT 
                    [
                        position = 8432, 8216
                        size = 0, 0
                    ]
                    
                    comment Comment2 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Electric Control Box:</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">           (1 + sT3)</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">----------------------------------</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">   1 + sT1 + (s^2)T1T2</p></body></html>                                   ENDCOMMENT 
                    [
                        position = 7808, 8216
                        size = 0, 0
                    ]
                    
                    connect "Integrator1.out" "Transport Delay1.in" as Connection36
                    
                    
                    connect "Sum3.in1" wmeas as Connection29
                    
                    
                    connect "Sum3.in" wref as Connection30
                    
                    
                    connect "TF1.out" "GainK.in" as Connection23
                    
                    
                    connect "TF1.in" "Sum3.out" as Connection24
                    
                    
                    connect "TF3.out" "Integrator1.in" as Connection25
                    
                    
                    connect "TF3.in" "TF4.out" as Connection26
                    
                    
                    connect "TF4.in" "GainK.out" as Connection27
                    
                    
                    connect "Transport Delay1.out" T as Connection28
                    
                    
            
                    
                }
                [
                    position = 7776, 8000
                    size = 120, 64
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "w_meas_in" {
                    label = "w_meas_in"
                    
                    position = left:3
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7560, 8032
                    rotation = down
                    scale = -1, 1
                    size = 25, 25
                ]
                port "T_out" {
                    label = "T_out"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 7968, 8000
                    size = 25, 25
                ]
                port "Delta_w_in" {
                    label = "Delta_w_in"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7320, 7984
                    size = 25, 25
                ]
                port "dw_synch" {
                    label = "dw_synch"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7384, 8000
                    size = 25, 25
                ]
                port "Gen_On1" {
                    label = "Gen_On"
                    
                    position = right:3
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 7232, 7848
                ]
                
                junction "Junction1473" sp
                [
                    position = 7544, 7984
                ]
                
                junction "Junction1477" sp
                [
                    position = 7856, 8000
                ]
                
                junction "Junction1478" sp
                [
                    position = 7688, 8032
                ]
                
                junction "Junction1479" sp
                [
                    position = 7184, 7848
                ]
                
                junction "Junction1480" sp
                [
                    position = 7448, 8000
                ]
                
                junction "Junction1481" sp
                [
                    position = 7184, 7904
                ]
                
                connect "Constant1.out" "Signal switch1.in1" as Connection93
                
                
                connect "DEGOV.wref" Junction1473 as Connection148
                
                
                connect "DEGOV.T" Junction1477 as Connection143
                
                
                connect "DEGOV.wmeas" Junction1478 as Connection153
                
                
                connect "Delta_w_in" "Sum4.in1" as Connection1
                
                
                connect "Gen_On.in" Junction1481 as Connection173
                
                
                connect "Gen_On1" Junction1479 as Connection157
                
                
                connect Junction1477 "Tpu to T.in" as Connection142
                
                
                connect Junction1478 "wmeas.in" as Connection152
                
                
                connect Junction1479 "Gen1_On.out" as Connection156
                [
                    breakpoints =7184, 7848
                ]
                
                connect Junction1480 "dw_sync.in" as Connection169
                [
                    breakpoints =7448, 8000
                ]
                
                connect Junction1481 Junction1479 as Connection172
                
                
                connect "Rate Limiter1.in" "Signal switch1.out" as Connection103
                
                
                connect "Rate Limiter1.out" "Sum4.in" as Connection109
                
                
                connect "Signal switch1.in2" Junction1481 as Connection171
                
                
                connect "Sum4.out" Junction1473 as Connection128
                
                
                connect "Sum4.in2" Junction1480 as Connection168
                
                
                connect "Tmec.in" Junction1477 as Connection141
                
                
                connect "Tpu to T.out" "T_out" as Connection30
                
                
                connect "dw_synch" Junction1480 as Connection170
                
                
                connect "w to wpu.out" Junction1478 as Connection151
                
                
                connect "w to wpu.in" "w_meas_in" as Connection166
                [
                    breakpoints =7600, 8032
                ]
                
                connect "w_ref_probe.in" Junction1473 as Connection174
                [
                    breakpoints =7544, 7936
                ]
                
                connect "wref.out" "Signal switch1.in" as Connection108
                
                
        
                
            }
            [
                position = 8152, 8176
                size = 160, 120
            ]
            
            
            
            
            
            
            
            
            
            tag "Goto5" {
                value = "Q_mode"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7920, 7920
            ]
            
            tag "From3" {
                value = "Vt_meas"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 8008, 7920
            ]
            
            tag "From6" {
                value = "Q_mode"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7664, 8272
            ]
            
            tag "Goto2" {
                value = "Q_meas"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7560, 8184
                size = 58, 20
            ]
            
            tag "From4" {
                value = "Gridtied"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7664, 8152
            ]
            
            tag "Goto3" {
                value = "Vt_meas"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7560, 8224
                size = 58, 20
            ]
            
            tag "From2" {
                value = "P_meas"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7664, 8112
            ]
            
            tag "Goto1" {
                value = "P_meas"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7560, 8144
            ]
            
            tag "Goto4" {
                value = "Gridtied"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7704, 7944
            ]
            
            tag "From1" {
                value = "Q_meas"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7664, 7880
            ]
            
            tag "From5" {
                value = "Gridtied"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7664, 8232
            ]
            
            tag "Goto7" {
                value = "Gen_On"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 8304, 8216
            ]
            
            tag "Goto9" {
                value = "w_meas"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 8096, 8304
            ]
            
            tag "From7" {
                value = "Gen_On"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 8008, 7960
            ]
            
            tag "From8" {
                value = "w_meas"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 8008, 8000
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            tag "From9" {
                value = "dw_synch"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7944, 8176
            ]
            
            
            tag "Goto10" {
                value = "dw_synch"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7608, 7936
            ]
            
            
            
            
            port "Vf" {
                label = "Vf_out"
                
                position = right:1
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8288, 7944
            ]
            port "T" {
                label = "T_out"
                
                position = bottom:2
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8304, 8136
            ]
            port "wmeas" {
                label = "wmeas_in"
                
                position = bottom:3
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 8000, 8216
            ]
            port "T_in" {
                label = "Tin"
                
                position = bottom:4
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7432, 8280
            ]
            port "meas_in" {
                label = "meas_in"
                
                position = left:1
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7424, 8024
            ]
            port "SP_out" {
                label = "SP_out"
                
                position = top:2
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8384, 8280
            ]
            port "SP_in" {
                label = "SP_in"
                
                position = top:1
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7424, 7936
            ]
            
            junction "Junction1" sp
            [
                position = 8264, 8136
            ]
            
            junction "Junction2" sp
            [
                position = 8232, 7944
            ]
            
            junction "Junction4" sp
            [
                position = 8040, 8216
            ]
            
            junction "Junction5" sp
            [
                position = 8256, 8216
            ]
            
            junction "Junction6" sp
            [
                position = 8040, 8288
            ]
            
            junction "Junction7" sp
            [
                position = 7648, 7920
            ]
            
            connect "Bus Join1.in" Junction5 as Connection199
            
            
            connect "Bus Join1.in1" Junction6 as Connection202
            
            
            connect "Bus Split1.in" "meas_in" as Connection173
            
            
            connect "Bus Split2.out" Junction7 as Connection208
            
            
            connect "Bus Split2.in" "SP_in" as Connection205
            
            
            connect "Exciter1.Vf_out" Junction2 as Connection170
            
            
            connect From1 "Q Secondary Control1.Q_meas_in" as Connection177
            
            
            connect From2 "P Secondary Control1.Pmeas_in" as Connection178
            
            
            connect From3 "Exciter1.Vt_in" as Connection179
            
            
            connect From4 "P Secondary Control1.Gridtied" as Connection184
            
            
            connect From5 "Read_Control_mode.P_mode" as Connection187
            
            
            connect From6 "Read_Control_mode.Q_mode" as Connection188
            
            
            connect From7 "Exciter1.Gen_On" as Connection194
            
            
            connect From8 "Exciter1.w_meas" as Connection195
            
            
            connect From9 "Governor_and_Engine1.dw_synch" as Connection209
            
            
            connect Goto1 "Bus Split1.out" as Connection174
            
            
            connect Goto10 "Bus Split2.out1" as Connection210
            
            
            connect Goto2 "Bus Split1.out1" as Connection175
            
            
            connect Goto3 "Bus Split1.out2" as Connection176
            
            
            connect Goto4 Junction7 as Connection206
            
            
            connect Goto5 "Q Secondary Control1.Q_mode" as Connection185
            
            
            connect Goto7 Junction5 as Connection197
            
            
            connect Goto9 Junction6 as Connection200
            
            
            connect "Governor_and_Engine1.T_out" Junction1 as Connection167
            
            
            connect "Governor_and_Engine1.w_meas_in" Junction4 as Connection191
            
            
            connect Junction1 T as Connection168
            
            
            connect Junction2 Vf as Connection171
            
            
            connect Junction4 wmeas as Connection192
            
            
            connect Junction5 "Governor_and_Engine1.Gen_On1" as Connection198
            
            
            connect Junction6 Junction4 as Connection201
            
            
            connect Junction7 "Q Secondary Control1.gridtied" as Connection207
            [
                breakpoints =7648, 7920
            ]
            
            connect "P Secondary Control1.Delta_w_out" "Governor_and_Engine1.Delta_w_in" as Connection155
            
            
            connect "Q Secondary Control1.Delta_V_out" "Exciter1.Delta_V_in" as Connection159
            
            
            connect "SP_out" "Bus Join1.out" as Connection203
            
            
            connect "T_in" "Termination1.in" as Connection166
            
            
            connect "T_out.in" Junction1 as Connection169
            
            
            connect "Termination2.in" "Bus Split2.out2" as Connection211
            
            
            connect "Vf_exciter.in" Junction2 as Connection172
            
            
    
            
        }
        [
            position = 9432, 7880
            size = 96, 112
        ]
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        tag "Goto1" {
            value = "Gen1_synch"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8376, 7728
            rotation = left
        ]
        
        
        tag "From1" {
            value = "Gen1_control"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8608, 7864
        ]
        
        
        tag "From2" {
            value = "Gen1_synch"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 9400, 7768
            rotation = right
        ]
        
        
        tag "Goto2" {
            value = "Gen1_control"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 9456, 7768
            rotation = left
        ]
        
        
        tag "From3" {
            value = "Gen1_control"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8280, 7728
            rotation = right
        ]
        
        tag "From4" {
            value = "Gen1_synch"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8608, 7808
        ]
        
        
        tag "Goto3" {
            value = "Gen1_GCB"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8888, 7840
        ]
        
        
        tag "From5" {
            value = "Gen1_GCB"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8328, 7728
            rotation = right
        ]
        
        
        
        
        junction "Junction109" pe
        [
            position = 9536, 7968
            size = 0, 0
        ]
        
        junction "Junction110" pe
        [
            position = 9536, 8136
            size = 0, 0
        ]
        
        junction "Junction1465" pe
        [
            position = 8616, 8424
        ]
        
        junction "Junction1477" pe
        [
            position = 8616, 8424
        ]
        
        junction "Junction1478" pe
        [
            position = 8560, 8168
        ]
        
        junction "Junction1479" pe
        [
            position = 8616, 8072
        ]
        
        junction "Junction1480" pe
        [
            position = 8672, 7976
        ]
        
        connect "Control.T" "Gen1.load_in" as Connection465
        
        
        connect "Control.T_in" "Gen1.torque_out" as Connection418
        
        
        connect "Control.wmeas" "Gen1.speed_out" as Connection417
        
        
        connect "Control.Vf" "Vfd.in" as Connection466
        
        
        connect From1 "GCB_control.Gen_On" as Connection515
        
        
        connect From2 "Control.SP_in" as Connection516
        
        
        connect From3 "Sync_Check.SP_in" as Connection522
        
        
        connect From4 "GCB_control.w_ss" as Connection519
        
        
        connect From5 "Sync_Check.GCB_sts" as Connection521
        
        
        connect "G1_meas.P2" Junction1479 as Connection487
        
        
        connect "G1_meas.V" "Sync_Check.V_Gen" as Connection512
        
        
        connect "G1grid_meas.P1" "MCB.a_in" as Connection479
        
        
        connect "G1grid_meas.P2" "MCB.b_in" as Connection481
        
        
        connect "G1grid_meas.P3" "MCB.c_in" as Connection483
        
        
        connect "G1grid_meas.V" "Sync_Check.V_grid" as Connection513
        
        
        connect "GCB.c_in" Junction1478 as Connection486
        
        
        connect "GCB.b_in" Junction1479 as Connection489
        
        
        connect "GCB.a_in" Junction1480 as Connection492
        
        
        connect "GCB.b_out" "R13.p_node" as Connection494
        
        
        connect "GCB.a_out" "R67.p_node" as Connection493
        
        
        connect "GCB_control.GCB" "GCB.ctrl_in" as Connection499
        
        
        connect "Gen1.c_in" "Measurements.c" as Connection323
        
        
        connect "Gen1.b_in" "Measurements.b" as Connection318
        
        
        connect "Gen1.a_in" "Measurements.a" as Connection324
        
        
        connect Goto1 "Sync_Check.SP_out" as Connection514
        
        
        connect Goto2 "Control.SP_out" as Connection517
        
        
        connect Goto3 "GCB_control.GCB_sts" as Connection520
        
        
        connect Junction109 "Gen1.r_1" as Connection77
        [
            size = 0, 0
            breakpoints =9536, 7968;9488, 7968
        ]
        
        connect Junction109 "If.n_node" as Connection78
        
        
        connect Junction110 "Gen1.r_2" as Connection81
        
        
        connect Junction1465 "L54.n_node" as Connection290
        [
            breakpoints =8672, 8424
        ]
        
        connect Junction1477 Junction1465 as Connection358
        [
            breakpoints =8616, 8424;8616, 8424
        ]
        
        connect Junction1478 "G1_meas.P3" as Connection485
        [
            breakpoints =8560, 8168
        ]
        
        connect Junction1479 "R68.p_node" as Connection488
        [
            breakpoints =8616, 8072
        ]
        
        connect Junction1480 "G1_meas.P1" as Connection491
        [
            breakpoints =8672, 7976
        ]
        
        connect "L50.p_node" "R13.n_node" as Connection141
        
        
        connect "L52.n_node" Junction1465 as Connection289
        [
            breakpoints =8560, 8424
        ]
        
        connect "L52.p_node" "R70.n_node" as Connection285
        
        
        connect "L53.n_node" Junction1477 as Connection357
        
        
        connect "L53.p_node" "R68.n_node" as Connection287
        
        
        connect "L54.p_node" "R69.n_node" as Connection286
        
        
        connect "MCB.c_out" "G1_meas.P6" as Connection469
        
        
        connect "MCB.b_out" "G1_meas.P5" as Connection471
        
        
        connect "MCB.a_out" "G1_meas.P4" as Connection473
        
        
        connect "Measurements.Meas_out" "Control.meas_in" as Connection500
        
        
        connect "Measurements.C" "L4.n_node" as Connection503
        
        
        connect "Measurements.B" "L50.n_node" as Connection502
        
        
        connect "Measurements.A" "L51.n_node" as Connection501
        
        
        connect "R66.p_node" "GCB.c_out" as Connection495
        
        
        connect "R66.n_node" "L4.p_node" as Connection174
        
        
        connect "R67.n_node" "L51.p_node" as Connection176
        
        
        connect "R69.p_node" Junction1480 as Connection490
        
        
        connect "R70.p_node" Junction1478 as Connection484
        
        
        connect "Sync_Check.mcb" "MCB.ctrl_in" as Connection467
        
        
        connect "Vfd.p_node" "If.p_node" as Connection212
        
        
        connect "Vfd.n_node" Junction110 as Connection213
        
        
        connect "Vfield.p_node" Junction109 as Connection214
        
        
        connect "Vfield.n_node" Junction110 as Connection215
        
        
        connect "Vs1.a_node" "G1grid_meas.P4" as Connection478
        
        
        connect "Vs1.b_node" "G1grid_meas.P5" as Connection480
        
        
        connect "Vs1.c_node" "G1grid_meas.P6" as Connection482
        
        
        connect "gnd5.node" Junction1477 as Connection359
        
        
        connect "gnd6.node" "Vs1.n_node" as Connection444
        
        

        
    }

    
    
    default {
        
        ctc_tpst {
            ctrl_src = "Digital input"
            Sa = "1"
            Sa_logic = "active high"
            execution_rate = "inherit"
            initial_state = "off"
            on_delay = "0"
            off_delay = "0"
            spc_nb = "0"
            ctc_nb = "0"
            pe_connection = "not_defined"
            ctc_name = "not_defined"
        }
        
        gen_DC1A_exciter {
            Tr = "0.020"
            Tb = "0"
            Tc = "0"
            Ka = "300"
            Ta = "0.001"
            VRmax = "11.5"
            VRmin = "-11.5"
            Te = "0.1"
            Ke = "1"
            Kf = "0.001"
            Tf = "0.1"
            initial_terminal_voltage = "0"
            initial_field_voltage = "0"
            disable_Vt_transducer = "True"
            disable_fdbck_stab = "True"
            start_time = "10"
            execution_rate = "inherit"
        }
        
        gen_PQ_transform {
            filter_order = "first order"
            filter_cutoff_Hz = "30"
            initial_filter_input = "0"
            initial_filter_output = "0"
            execution_rate = "inherit"
        }
        
        gen_abs {
            execution_rate = "inherit"
        }
        
        gen_bus_join {
            inputs = "2"
            execution_rate = "inherit"
        }
        
        gen_bus_split {
            outputs = "2"
            execution_rate = "inherit"
        }
        
        gen_c_function {
            in_terminal_properties = "real in;"
            out_terminal_properties = "real out;"
            no_feed_inputs = ""
            no_feed_outputs = ""
            output_fnc = ""
            update_fnc = ""
            init_fnc = ""
            global_variables = ""
            parameters = ""
            execution_rate = "inherit"
        }
        
        gen_comparator {
            execution_rate = "inherit"
        }
        
        gen_digital_probe {
            override_signal_name = "False"
            signal_name = ""
            addr = "0"
            execution_rate = "inherit"
        }
        
        gen_gain {
            gain = "1"
            multiplication = "Element-wise(K.*u)"
            execution_rate = "inherit"
        }
        
        gen_integrator {
            show_reset = "none"
            show_init_condition = "internal"
            init_value = "0"
            limit_output = "False"
            limit_upper = "inf"
            limit_lower = "-inf"
            show_state = "False"
            state_port_type = "inherit"
            execution_rate = "inherit"
        }
        
        gen_limiter {
            upper_limit = "['inf']"
            lower_limit = "['-inf']"
            execution_rate = "inherit"
        }
        
        gen_logic_op {
            operator = "AND"
            inputs = "2"
            execution_rate = "inherit"
        }
        
        gen_math_fnc {
            mathematical_fn = "exponential"
            execution_rate = "inherit"
        }
        
        gen_pll_three_phs {
            initial_filter_output = "60"
            wn = "157.0796"
            zeta = "0.707"
            initial_rt_lim_output = "60"
            rate_high = "12"
            rate_low = "-12"
            initial_pid_output = "376.99111843"
            kp = "100"
            ki = "3200"
            kd = "1"
            N = "714.2857"
            wn_LPFdq = "62.83185307"
            execution_rate = "inherit"
        }
        
        gen_probe {
            addr = "0"
            override_signal_name = "False"
            signal_name = ""
            signal_type = "generic"
            execution_rate = "inherit"
        }
        
        gen_product {
            signs = "2"
            execution_rate = "inherit"
        }
        
        gen_rate_limiter {
            rising_limit = "1"
            falling_limit = "-1"
            execution_rate = "inherit"
        }
        
        gen_rel_op {
            relational_op = "=="
            execution_rate = "inherit"
        }
        
        gen_rms_value {
            op_mode = "PLL based"
            frequency = "50"
            period_timeout = "0.5"
            execution_rate = "inherit"
        }
        
        gen_sr_ff {
            init_value = "0"
            execution_rate = "inherit"
        }
        
        gen_sum {
            signs = "2"
            execution_rate = "inherit"
        }
        
        gen_terminator {
            execution_rate = "inherit"
        }
        
        gen_transport_delay {
            time_delay = "0.1"
            init_value = "0"
            signal_out_type = "inherit"
            execution_rate = "inherit"
        }
        
        gen_z_domain_transfer {
            b_coeff = "[1]"
            a_coeff = "[1,-1]"
            init_states = "0"
            signal_out_type = "inherit"
            execution_rate = "inherit"
        }
        
        mchn_wrsync {
            Rs = "1.62"
            Lls = "0.004527"
            Lmd = "0.1086"
            Lmq = "0.1086"
            Rf = "1.208"
            Llfd = "0.01132"
            Rkd = "3.142"
            Rkq = "4.772"
            Llkd = "0.007334"
            Llkq = "0.01015"
            Ns_div_Nfd = "1.0"
            Ns_div_Nkd = "1.0"
            Ns_div_Nkq = "1.0"
            pms = "2"
            star_delta = "star"
            Jm = "0.0923"
            friction_coeff = "0"
            unconstrained_angle = "disabled"
            load_src = "Control panel / external"
            ext_mdl_load_type = "torque"
            load_ai_pin_addr = "1"
            load_ai_offset = "0"
            load_ai_gain = "1"
            enc_ppr = "1024"
            res_pole_pairs = "1"
            res_carr_source = "internal"
            res_int_carr_f = "5e+3"
            res_ai_pin_addr = "1"
            res_ai_offset = "0"
            res_ai_gain = "1"
            theta_ab = "-pi/2"
            Rsnb_rotor = "inf"
            Rsnb_stator = "inf"
            enb_sig_out = "False"
            execution_rate = "100e-6"
            machine_id = "0"
            me_speed_out_addr = "0"
            el_torque_out_addr = "0"
        }
        
        msr_current {
            bw_limit = "False"
            frequency = "10e3"
            comparator_enable = "False"
            operator = "greater"
            threshold = "0"
            cmp_abs_value = "False"
            feed_forward = "false"
            sig_output = "False"
            execution_rate = "100e-6"
            addr = "0"
            nd_msr_estimation = "false"
            dev_cpl_msr = "false"
            host_device = "0"
            output_to_device = "0"
            dev_cpl_index = "0"
            dev_cpl_var_nb = "0"
            visible = "True"
            override_signal_name = "False"
            signal_name = ""
        }
        
        msr_voltage {
            bw_limit = "False"
            frequency = "10e3"
            comparator_enable = "False"
            operator = "greater"
            threshold = "0"
            cmp_abs_value = "False"
            feed_forward = "false"
            sig_output = "False"
            execution_rate = "100e-6"
            addr = "0"
            nd_msr_estimation = "false"
            dev_cpl_msr = "false"
            host_device = "0"
            output_to_device = "0"
            dev_cpl_index = "0"
            dev_cpl_var_nb = "0"
            visible = "True"
            override_signal_name = "False"
            signal_name = ""
        }
        
        pas_capacitor {
            capacitance = "1e-6"
            initial_voltage = "0"
        }
        
        pas_inductor {
            inductance = "1e-3"
            initial_current = "0.0"
        }
        
        pas_resistor {
            resistance = "1"
        }
        
        src_constant {
            value = "1"
            signal_type = "real"
            execution_rate = "100e-6"
        }
        
        src_cp_input {
            addr = "0"
            category = "User defined"
            group = "Example"
            format = "real"
            override_signal_name = "False"
            signal_name = ""
            signal_type = "real"
            widget_type = "real"
            widget_label = "CP_in"
            min = "-1e6"
            max = "1e6"
            def_value = "0"
            unit = " "
            execution_rate = "100e-6"
        }
        
        src_voltage_dsp_ctrl {
            addr = "0"
            spc_nb = "0"
            execution_rate = "inherit"
        }
        
        sys_signal_switch {
            criterion = "ctrl >= threshold"
            threshold = "0"
            execution_rate = "inherit"
        }
        
        "core/Current RMS" {
            op_mode = "PLL based"
            frequency = "50"
            feed_forward = "false"
        }
        
        "core/Voltage RMS" {
            op_mode = "PLL based"
            frequency = "50"
            feed_forward = "false"
        }
    }

    CODE model_init
        # Numpy module is imported as 'np'
        # Scipy module is imported as 'sp'
        
        # DSP Execution Rate
        
        Ts = 200e-6
        
        # Governor specs
        
        K = 10  # gain K
        T1 = 1.0E-4 # Time constant T1 of Electric Control Box
        T2 = 0.0 # Time constant T2 of Electric Control Box
        T3 = 0.5001 # Time constant T3 of Electric Control Box
        T4 = 0.025  # Time constant T4 of Actuator
        T5 = 0.0009  # Time constant T5 of Actuator
        T6 = 0.00574  # Time constant T6 of Actuator
        Pm0 = 0.0 #0.0005  # Initial value of Mechanic Power
        Tmax = 10 #1.1  # Max torque limit
        Tmin = -0.1  # Min torque limit
        Td = 0.024  # Engine time delay
        
        dummy = 1.0 + 2.0*T5/Ts
        coeff1 = (1.0 + 2.0*T4/Ts)/dummy
        coeff2 = (1.0 - 2.0*T4/Ts)/dummy
        coeff3 = 1.0
        coeff4 = (1.0 - 2.0*T5/Ts)/dummy
        numTF4d = [coeff1, coeff2]
        denTF4d = [coeff3, coeff4]
        
        dummy = 1.0 + 2.0*T6/Ts
        coeff1 = (1.0)/dummy
        coeff2 = (1.0)/dummy
        coeff3 = 1.0
        coeff4 = (1.0 - 2.0*T6/Ts)/dummy
        numTF3d = [coeff1, coeff2]
        denTF3d = [coeff3, coeff4]
        
        numTF1d = [(1.0+2.0*T3/Ts),2.0,(1.0-2.0*T3/Ts)]
        denTF1d = [(1.0+2.0*T1/Ts+4.0*T1*T2/(Ts**2)),(2.0-8.0*T1*T2/(Ts**2)),(4.0*T1*T2/(Ts**2)-2.0*T1/Ts+1)]
        
        # Synchronous machine specs from Simulink's 4 MVA machine in PU
        
        f = 60.0  # Synchronous speed
        pms = 2.0  # Number of mechanical pole pairs
        Sb_gen1 = 3.5e6  # Nominal/base power of machine in VA
        Vn_gen1 = 13800.0  # Machine terminal line to line rms voltage
        Rs_pu_gen1 = 0.008979  # Stator resistance per phase in pu
        Lls_pu_gen1 = 0.05  # Stator leakage inductance in pu
        Lmd_pu_gen1 = 2.35  # Direct-axis magnetizing inductance in pu
        Lmq_pu_gen1 = 1.72  # Quadrature-axis magnetizing inductance in pu
        Rf_pu_gen1 = 0.00206  # Field resistance in pu
        Llfd_pu_gen1 = 0.511  # Field leakage inductance in pu
        Rkd_pu_gen1 = 0.2826  # D-axis resistance in pu
        Rkq_pu_gen1 = 0.02545  # Q-axis resistance in pu
        Llkd_pu_gen1 = 3.738  # D-axis leakage inductance in pu
        Llkq_pu_gen1 = 0.2392  # Q-axis leakage inductance in pu
        Ns_fd_gen1 = 1.0  # Turn ratio between the stator and the field windings
        Ns_kd_gen1 = 1.0  # Turn ratio between stator and d-axis damper windings
        Ns_kq_gen1 = 1.0  # Turn ratio between stator and q-axis damper windings
        H_gen1 = 0.3468  # Inertia coefficient in seconds
        Fpu_gen1 = 0.009238  # Friction factor in pu
        
        # Base calculation
        
        Vb_gen1 = Vn_gen1*((2.0/3.0)**0.5)  # Nominal/base voltage of machine terminal in V (Peak line to neutral voltage)
        wb_gen1 = 2.0*np.pi*f  # Electrical angular speed base
        wmb_gen1 = wb_gen1/pms  # Mechanical angular speed base
        Zb_gen1 = (Vn_gen1*Vn_gen1)/Sb_gen1  # Impedance base
        Trq_b_gen1 = Sb_gen1/wmb_gen1  # Torque base
        Fb_gen1 = Trq_b_gen1/wmb_gen1  # Friction Factor base
        Lb_gen1 = Zb_gen1/wb_gen1  # Inductance base
        
        # Stator data in SI
        
        Rs_gen1 = Rs_pu_gen1*Zb_gen1
        Lls_gen1 = Lls_pu_gen1*Lb_gen1
        Lmd_gen1 = Lmd_pu_gen1*Lb_gen1
        Lmq_gen1 = Lmq_pu_gen1*Lb_gen1
        Rkd_gen1 = Rkd_pu_gen1*Zb_gen1
        Rkq_gen1 = Rkq_pu_gen1*Zb_gen1
        Llkd_gen1 = Llkd_pu_gen1*Lb_gen1
        Llkq_gen1 = Llkq_pu_gen1*Lb_gen1
        
        # Mechanical data in SI
        
        F_gen1 = Fpu_gen1*Fb_gen1  # Friction Factor in Nm.s
        J_gen1 = 2*H_gen1*Sb_gen1/(wmb_gen1*wmb_gen1)  # Inertia in kg.m2
        
        # Field base calculation
        
        Lsfd_gen1 = (2.0/3.0)*Lmd_gen1*(1.0/Ns_fd_gen1)  # Mutual inductance between stator and field
        ifn_gen1 = Vb_gen1/(Lsfd_gen1*wb_gen1)  # Nominal field current
        ifb_gen1 = ifn_gen1*Lmd_pu_gen1  # Field current base
        Vfb_gen1 = Sb_gen1/ifb_gen1  # Field voltage base
        Zfb_gen1 = Vfb_gen1/ifb_gen1  # Field impedance base
        Lfb_gen1 = Zfb_gen1/wb_gen1  # Field inductance base
        
        # Field data in SI
        
        Rf_gen1 = Rf_pu_gen1*Zfb_gen1  # Field resistance (Field side)
        Llfd_gen1 = Llfd_pu_gen1*Lfb_gen1  # Field inductance (Field side)
        Rf_prime_gen1 = Rf_gen1*(3.0/2.0)*(Ns_fd_gen1*Ns_fd_gen1)  # Field resistance referred to the stator side
        Llfd_prime_gen1 = Llfd_gen1*(3.0/2.0)*(Ns_fd_gen1*Ns_fd_gen1)  # Field inductance referred to the stator side
        
        # Exciter initialization
        
        Tr_gen1 = 20e-4  # Low pass filter time constant
        Ka_gen1 = 200  # Regulator gain
        Ta_gen1 = 2e-3  # Regulator time constant
        Ke_gen1 = 1.0  # Exciter constant
        Te_gen1 = 1e-8 #Exciter time constant
        Tb_gen1 = 1e-12  # Transient gain reduction time constant b
        Tc_gen1 = 1e-12  # Transient gain reduction time constant c
        Kf_gen1 = 0  # Damping filter gain
        Tf_gen1 = 1e-12  # Damping filter time constant
        Efmin_gen1 = -0.1 # Regulator output lower limit
        Efmax_gen1 = 5.0 #5.0  # Regulator output upper limit
        Vt0_gen1 = 0.0  # Initial terminal voltage
        Vf0_gen1 = 0.0  # Initial field voltage
        Const_gen1 = Vf0_gen1/Ka_gen1
        
        Rl_mach = 0.1 #14.283
        Ll_mach = 10e-3 #0.120472454546162
    ENDCODE
}