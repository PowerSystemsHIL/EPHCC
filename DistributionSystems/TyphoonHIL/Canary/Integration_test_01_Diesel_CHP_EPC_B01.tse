version = 4.2


//
// Model name: Integration_test_01_Diesel_CHP_EPC_B01
// Saved by sw version: 2016.3
// Save timestamp: 22-Dec-2016 @ 06:12:03 PM
//

model "Integration_test_01_Diesel_CHP_EPC_B01" {
    configuration {
        hil_device = "HIL 603"
        hil_configuration_id = 1
        simulation_method = exact
        simulation_time_step = 2e-6
        dsp_timer_periods = 100e-6, 50e-3
        ss_calc_method = "systematic elimination"
        enb_pole_shift = True
        enb_gds_oversampling = True
        show_modes = False
        cpl_stb = False
        enb_dep_sw_detect = False
        code_section = "internal memory"
        data_section = "internal memory"
        sys_sp_rate_1 = 0.0001
        sys_sp_rate_2 = 0.05
        sys_cpu_optimization = "high"
        user_cpu_optimization = "high"
    }

    
    component Subsystem "Root" {

        
        component src_voltage_3ph "Vs1" {
            
	    
        }
        [
            position = 5720, 8064
        ]
        
        component ctc_tpst "MID" {
            
            Sa = "2"
            Sa_logic = "active low"
            ctc_nb = "3"
            ctrl_src = "Model"
            spc_nb = "2"
	    
        }
        [
            position = 6104, 8064
        ]
        
        component ctc_tpst "CB3" {
            
            Sa = "8"
            ctc_nb = "3"
            ctrl_src = "Model"
            spc_nb = "2"
	    
        }
        [
            position = 7016, 8480
        ]
        
        component ctc_tpst "CB4" {
            
            Sa = "8"
            ctc_nb = "3"
            ctrl_src = "Model"
            spc_nb = "2"
	    
        }
        [
            position = 7016, 8896
        ]
        
        component ctc_tpst "SW" {
            
            Sa = "8"
            ctc_nb = "3"
            spc_nb = "2"
	    
        }
        [
            position = 7752, 9168
        ]
        
        component msr_current "If" {
            
	    
        }
        [
            position = 8040, 7992
            scale = -1, 1
        ]
        
        component msr_voltage "Vfield" {
            
	    
        }
        [
            position = 7992, 8056
            rotation = right
        ]
        
        component src_voltage_dsp_ctrl "Vfd" {
            
            execution_rate = "Ts"
	    
        }
        [
            position = 8088, 8056
            rotation = right
        ]
        
        component mchn_wrsync "Gen1" {
            
            Jm = "J_gen1"
            Llfd = "Llfd_prime_gen1"
            Llkd = "Llkd_gen1"
            Llkq = "Llkq_gen1"
            Lls = "Lls_gen1"
            Lmd = "Lmd_gen1"
            Lmq = "Lmq_gen1"
            Ns_div_Nfd = "1"
            Ns_div_Nkd = "1"
            Ns_div_Nkq = "1"
            Rf = "Rf_prime_gen1"
            Rkd = "Rkd_gen1"
            Rkq = "Rkq_gen1"
            Rs = "Rs_gen1"
            el_torque_out_addr = "8200"
            enb_sig_out = "True"
            enc_ppr = "120"
            execution_rate = "Ts"
            friction_coeff = "F_gen1"
            load_ai_pin_addr = "8"
            load_src = "Model"
            me_speed_out_addr = "8202"
            pms = "pms"
            res_int_carr_f = "5000.0"
	    
        }
        [
            position = 7832, 8064
        ]
        
        component pas_resistor "R1" {
            
            resistance = "1e-4"
	    
        }
        [
            position = 5816, 7968
        ]
        
        component pas_resistor "R2" {
            
            resistance = "1e-4"
	    
        }
        [
            position = 5816, 8064
        ]
        
        component pas_resistor "R3" {
            
            resistance = "1e-4"
	    
        }
        [
            position = 5816, 8160
        ]
        
        component pas_inductor "L1" {
            
            inductance = "1e-5"
	    
        }
        [
            position = 5912, 7968
        ]
        
        component pas_inductor "L2" {
            
            inductance = "1e-5"
	    
        }
        [
            position = 5912, 8064
        ]
        
        component pas_inductor "L3" {
            
            inductance = "1e-5"
	    
        }
        [
            position = 5912, 8160
        ]
        
        component src_digital_input "Close GCB" {
            
            addr = "6"
            execution_rate = "Ts"
	    
        }
        [
            position = 7136, 7696
        ]
        
        component src_digital_input "Open GCB" {
            
            addr = "7"
            execution_rate = "Ts"
	    
        }
        [
            position = 7136, 7752
        ]
        
        component src_digital_input "Open MCB" {
            
            addr = "9"
            execution_rate = "Ts"
	    
        }
        [
            position = 7136, 7864
        ]
        
        component src_digital_input "Close MCB" {
            
            addr = "8"
            execution_rate = "Ts"
	    
        }
        [
            position = 7136, 7808
        ]
        
        component ctc_tpst "MCB_gen1" {
            
            Sa = "8"
            ctc_nb = "3"
            ctrl_src = "Model"
            spc_nb = "2"
	    
        }
        [
            position = 7016, 8064
        ]
        
        component ctc_tpst "GCB_gen" {
            
            Sa = "8"
            ctc_nb = "3"
            ctrl_src = "Model"
            spc_nb = "2"
	    
        }
        [
            position = 7528, 8064
        ]
        
        component src_digital_input "Fuel signal off" {
            
            addr = "4"
            execution_rate = "Ts"
            invert = "true"
	    
        }
        [
            position = 8488, 7856
            scale = -1, 1
        ]
        
        component src_digital_input "Starter" {
            
            addr = "3"
            execution_rate = "Ts"
	    
        }
        [
            position = 8488, 7912
            scale = -1, 1
        ]
        
        component sys_hil_marker "DM0" {
            
	    
        }
        [
            position = 6768, 7872
        ]
        
        component sys_hil_marker "DM1" {
            
            hil_device_id = "1"
	    
        }
        [
            position = 6968, 7872
        ]
        
        component cpl_spc_3ph "CC1" {
            
            fixed_snb_i = "true"
            fixed_snb_u = "true"
            snb_type_i = "R1-C1"
            snb_type_u = "R2||L1"
	    
        }
        [
            position = 6672, 8648
            rotation = right
        ]
        
        component sys_hil_marker "DM2" {
            
            hil_device_id = "2"
	    
        }
        [
            position = 7696, 8328
        ]
        
        component gen_digital_probe "MID_fb_" {
            
	    
        }
        [
            position = 6280, 7856
        ]
        component "core/Transmission Line" "Line2"{
            
            C_sequence_metric = "c_11"
            Frequency = "sys_freq"
            L_sequence_metric = "l_11"
            Length_metric = "0.61569"
            R_sequence_metric = "r_11"
            model = "PI"
            model_def = "Sequence"
            unit_sys = "metric"
        }
        [
            position = 7320, 8064
            size = 256, 72
        ]
        
        
        component Subsystem "PCC_meas" {
            layout = dynamic
    
            
            component pas_resistor "R63" {
                
                resistance = "1e4"
    	    
            }
            [
                position = 7904, 8304
                rotation = right
            ]
            
            component pas_resistor "R64" {
                
                resistance = "1e4"
    	    
            }
            [
                position = 8000, 8304
                rotation = right
            ]
            
            component pas_resistor "R65" {
                
                resistance = "1e4"
    	    
            }
            [
                position = 8096, 8304
                rotation = right
            ]
            
            component msr_voltage "VB" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8280, 8280
                rotation = right
            ]
            
            component msr_voltage "VA" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8360, 8216
                rotation = right
            ]
            
            component msr_voltage "VC" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8200, 8344
                rotation = right
            ]
            
            component msr_current "IB" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7408, 8024
            ]
            
            component msr_current "IC" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7496, 8120
            ]
            
            component msr_current "IA" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7328, 7928
            ]
            
            component gen_gain "Gain9" {
                
                gain = "[1.0e-6]"
    	    
            }
            [
                position = 8808, 7696
            ]
            
            component gen_gain "Gain7" {
                
                gain = "[1.0e-6]"
    	    
            }
            [
                position = 8808, 7840
            ]
            
            component gen_gain "Gain8" {
                
                gain = "[1.0e-6]"
    	    
            }
            [
                position = 8808, 7768
            ]
            
            component gen_probe "P_pcc_pu" {
                
                addr = "17965"
    	    
            }
            [
                position = 8896, 7696
            ]
            
            component gen_probe "Q_pcc_pu" {
                
                addr = "17938"
    	    
            }
            [
                position = 8896, 7768
            ]
            
            component gen_probe "S_pcc_pu" {
                
                addr = "17951"
    	    
            }
            [
                position = 8896, 7840
            ]
            component "core/Voltage RMS" "VArms"{
                
            }
            [
                position = 7784, 8208
                rotation = right
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VBrms"{
                
            }
            [
                position = 7688, 8280
                rotation = right
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VCrms"{
                
            }
            [
                position = 7584, 8320
                rotation = right
                size = 64, 32
            ]
            
            component "core/Current RMS" "ICrms"{
                
            }
            [
                position = 7224, 8120
                size = 64, 32
            ]
            
            component "core/Current RMS" "IBrms"{
                
            }
            [
                position = 7224, 8024
                size = 64, 32
            ]
            
            component "core/Current RMS" "IArms"{
                
            }
            [
                position = 7224, 7928
                size = 64, 32
            ]
            
            
            component Subsystem "PQ measure" {
                layout = dynamic
        
                
                component gen_terminator "Termination1" {
                    
        	    
                }
                [
                    position = 7936, 8184
                    scale = -1, 1
                ]
                
                component gen_PQ_transform "PQ Power Meter1" {
                    
                    execution_rate = "Ts"
                    filter_cutoff_Hz = "20"
                    filter_order = "second order"
        	    
                }
                [
                    position = 8192, 8192
                    scale = -1, 1
                ]
                
                component gen_terminator "Termination2" {
                    
        	    
                }
                [
                    position = 7992, 8208
                    scale = -1, 1
                ]
                
                component gen_terminator "Termination4" {
                    
        	    
                }
                [
                    position = 8104, 8248
                    scale = -1, 1
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "P_meas_out" {
                    label = "P_meas_out"
                    
                    position = left:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8128, 8136
                    rotation = down
                    size = 25, 25
                ]
                port "Q_meas_out" {
                    label = "Q_meas_out"
                    
                    position = left:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8056, 8152
                    rotation = down
                    size = 25, 25
                ]
                port "Va_in" {
                    label = "Va_in"
                    
                    position = right:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8272, 8048
                    rotation = down
                    size = 25, 25
                ]
                port "Vb_in" {
                    label = "Vb_in"
                    
                    position = right:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8304, 8096
                    rotation = down
                    size = 25, 25
                ]
                port "Vc_in" {
                    label = "Vc_in"
                    
                    position = right:4
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8360, 8144
                    rotation = down
                    size = 25, 25
                ]
                port "Ia_in" {
                    label = "Ia_in"
                    
                    position = right:6
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8360, 8240
                    rotation = down
                    size = 25, 25
                ]
                port "Ib_in" {
                    label = "Ib_in"
                    
                    position = right:7
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8312, 8280
                    rotation = down
                    size = 25, 25
                ]
                port "Ic_in" {
                    label = "Ic_in"
                    
                    position = right:10
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8280, 8328
                    rotation = down
                    size = 25, 25
                ]
                port "S_meas_out" {
                    label = "S_meas_out"
                    
                    position = left:3
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 7944, 8272
                    rotation = down
                    size = 25, 25
                ]
                
                connect "PQ Power Meter1.ia" "Ia_in" as Connection1
                
                
                connect "PQ Power Meter1.ib" "Ib_in" as Connection2
                
                
                connect "PQ Power Meter1.ic" "Ic_in" as Connection3
                
                
                connect "PQ Power Meter1.Pdc" "P_meas_out" as Connection4
                
                
                connect "PQ Power Meter1.Qdc" "Q_meas_out" as Connection5
                
                
                connect "PQ Power Meter1.va" "Va_in" as Connection6
                
                
                connect "PQ Power Meter1.vb" "Vb_in" as Connection7
                
                
                connect "PQ Power Meter1.vc" "Vc_in" as Connection8
                
                
                connect "S_meas_out" "PQ Power Meter1.apparent" as Connection9
                
                
                connect "Termination1.in" "PQ Power Meter1.Pac" as Connection10
                
                
                connect "Termination2.in" "PQ Power Meter1.Qac" as Connection11
                
                
                connect "Termination4.in" "PQ Power Meter1.k_factor" as Connection12
                
                
        
                
            }
            [
                position = 8648, 7768
                scale = -1, 1
                size = 88, 184
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            tag "Goto10" {
                value = "Va_PCC"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8600, 8216
                size = 60, 20
            ]
            
            tag "Goto8" {
                value = "Vc_PCC"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8600, 8344
                size = 60, 20
            ]
            
            tag "Goto9" {
                value = "Vb_PCC"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8600, 8280
                size = 60, 20
            ]
            
            tag "Goto13" {
                value = "Ib_PCC"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7552, 7552
                size = 60, 20
            ]
            
            tag "Goto11" {
                value = "Ic_PCC"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7552, 7616
                size = 60, 20
            ]
            
            tag "Goto12" {
                value = "Ia_PCC"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7552, 7488
                size = 60, 20
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "P1" {
                label = "a"
                
                position = right:1
                kind = pe
            }
            [
                position = 8432, 7928
                rotation = down
            ]
            port "P2" {
                label = "b"
                
                position = right:2
                kind = pe
            }
            [
                position = 8432, 8024
                rotation = down
            ]
            port "P3" {
                label = "c"
                
                position = right:3
                kind = pe
            }
            [
                position = 8432, 8120
                rotation = down
            ]
            port "P4" {
                label = "A"
                
                position = left:1
                kind = pe
            }
            [
                position = 7104, 7928
            ]
            port "P5" {
                label = "B"
                
                position = left:2
                kind = pe
            }
            [
                position = 7104, 8024
            ]
            port "P6" {
                label = "C"
                
                position = left:3
                kind = pe
            }
            [
                position = 7104, 8120
            ]
            
            junction "Junction1421" pe
            [
                position = 8280, 8456
            ]
            
            junction "Junction1463" pe
            [
                position = 8200, 8456
            ]
            
            junction "Junction1464" pe
            [
                position = 8096, 8456
            ]
            
            junction "Junction1465" pe
            [
                position = 8000, 8456
            ]
            
            junction "Junction1466" pe
            [
                position = 8360, 7928
            ]
            
            junction "Junction1467" pe
            [
                position = 8280, 8024
            ]
            
            junction "Junction1468" pe
            [
                position = 8200, 8120
            ]
            
            junction "Junction1475" pe
            [
                position = 7904, 7928
            ]
            
            junction "Junction1476" pe
            [
                position = 8000, 8024
            ]
            
            junction "Junction1477" pe
            [
                position = 8096, 8120
            ]
            
            junction "Junction1479" pe
            [
                position = 7784, 8456
            ]
            
            junction "Junction1480" pe
            [
                position = 7904, 8456
            ]
            
            junction "Junction1481" pe
            [
                position = 7688, 8456
            ]
            
            junction "Junction1482" pe
            [
                position = 7784, 7928
            ]
            
            junction "Junction1483" pe
            [
                position = 7688, 8024
            ]
            
            junction "Junction1484" pe
            [
                position = 7584, 8120
            ]
            
            junction "Junction1485" sp
            [
                position = 7496, 7824
            ]
            
            junction "Junction1486" sp
            [
                position = 7408, 7800
            ]
            
            junction "Junction1487" sp
            [
                position = 7328, 7776
            ]
            
            junction "Junction1488" sp
            [
                position = 8480, 8344
            ]
            
            junction "Junction1489" sp
            [
                position = 8504, 8280
            ]
            
            junction "Junction1490" sp
            [
                position = 8528, 8216
            ]
            
            connect "Gain7.out" "S_pcc_pu.in" as Connection376
            
            
            connect "Gain8.in" "PQ measure.Q_meas_out" as Connection374
            
            
            connect "Gain8.out" "Q_pcc_pu.in" as Connection377
            
            
            connect Goto10 Junction1490 as Connection394
            
            
            connect Goto11 Junction1485 as Connection379
            
            
            connect Goto12 Junction1487 as Connection385
            
            
            connect Goto13 Junction1486 as Connection382
            
            
            connect Goto8 Junction1488 as Connection388
            
            
            connect Goto9 Junction1489 as Connection391
            
            
            connect "IA.n_node" Junction1482 as Connection360
            
            
            connect "IArms.n_node" "IA.p_node" as Connection340
            
            
            connect "IB.n_node" Junction1483 as Connection363
            
            
            connect "IBrms.n_node" "IB.p_node" as Connection341
            
            
            connect "IC.n_node" Junction1484 as Connection366
            
            
            connect "ICrms.n_node" "IC.p_node" as Connection342
            
            
            connect Junction1421 Junction1463 as Connection224
            [
                breakpoints =8280, 8456
            ]
            
            connect Junction1463 "VC.n_node" as Connection225
            [
                breakpoints =8200, 8456
            ]
            
            connect Junction1464 Junction1463 as Connection228
            
            
            connect Junction1465 Junction1464 as Connection231
            
            
            connect Junction1466 P1 as Connection299
            
            
            connect Junction1467 P2 as Connection301
            
            
            connect Junction1468 Junction1477 as Connection297
            [
                breakpoints =8200, 8120
            ]
            
            connect Junction1468 P3 as Connection302
            
            
            connect Junction1475 Junction1466 as Connection292
            [
                breakpoints =7904, 7928
            ]
            
            connect Junction1475 Junction1482 as Connection358
            [
                breakpoints =7904, 7928
            ]
            
            connect Junction1476 Junction1467 as Connection295
            [
                breakpoints =8000, 8024
            ]
            
            connect Junction1477 "R65.p_node" as Connection298
            [
                breakpoints =8096, 8120
            ]
            
            connect Junction1479 Junction1480 as Connection313
            
            
            connect Junction1479 "VArms.n_node" as Connection310
            [
                breakpoints =7784, 8456
            ]
            
            connect Junction1480 Junction1465 as Connection312
            
            
            connect Junction1481 Junction1479 as Connection315
            
            
            connect Junction1482 "VArms.p_node" as Connection359
            [
                breakpoints =7784, 7928
            ]
            
            connect Junction1483 Junction1476 as Connection362
            [
                breakpoints =7688, 8024
            ]
            
            connect Junction1484 Junction1477 as Connection365
            [
                breakpoints =7584, 8120
            ]
            
            connect Junction1485 "IC.out" as Connection380
            
            
            connect Junction1486 "IB.out" as Connection383
            
            
            connect Junction1487 "IA.out" as Connection386
            
            
            connect Junction1488 "VC.out" as Connection389
            
            
            connect Junction1489 "VB.out" as Connection392
            
            
            connect Junction1490 "VA.out" as Connection395
            
            
            connect P4 "IArms.p_node" as Connection355
            
            
            connect P5 "IBrms.p_node" as Connection356
            
            
            connect P6 "ICrms.p_node" as Connection357
            
            
            connect "PQ measure.S_meas_out" "Gain7.in" as Connection375
            
            
            connect "PQ measure.P_meas_out" "Gain9.in" as Connection373
            
            
            connect "PQ measure.Ic_in" Junction1485 as Connection381
            
            
            connect "PQ measure.Ib_in" Junction1486 as Connection384
            
            
            connect "PQ measure.Ia_in" Junction1487 as Connection387
            
            
            connect "PQ measure.Vc_in" Junction1488 as Connection390
            [
                breakpoints =8480, 7752;8480, 8344
            ]
            
            connect "PQ measure.Vb_in" Junction1489 as Connection393
            
            
            connect "PQ measure.Va_in" Junction1490 as Connection396
            
            
            connect "P_pcc_pu.in" "Gain9.out" as Connection378
            
            
            connect "R63.p_node" Junction1475 as Connection291
            
            
            connect "R63.n_node" Junction1480 as Connection311
            
            
            connect "R64.n_node" Junction1465 as Connection230
            
            
            connect "R64.p_node" Junction1476 as Connection294
            
            
            connect "R65.n_node" Junction1464 as Connection227
            
            
            connect "VA.n_node" Junction1421 as Connection237
            [
                breakpoints =8360, 8456
            ]
            
            connect "VA.p_node" Junction1466 as Connection240
            
            
            connect "VB.n_node" Junction1421 as Connection203
            
            
            connect "VB.p_node" Junction1467 as Connection243
            [
                breakpoints =8280, 8216;8280, 8216
            ]
            
            connect "VBrms.n_node" Junction1481 as Connection316
            
            
            connect "VBrms.p_node" Junction1483 as Connection361
            
            
            connect "VC.p_node" Junction1468 as Connection246
            [
                breakpoints =8200, 8280;8200, 8280
            ]
            
            connect "VCrms.n_node" Junction1481 as Connection314
            [
                breakpoints =7584, 8456
            ]
            
            connect "VCrms.p_node" Junction1484 as Connection364
            
            
    
            
        }
        [
            position = 6200, 8064
            size = 56, 232
        ]
        
        component Subsystem "G1_meas" {
            layout = dynamic
    
            
            component pas_resistor "R65" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 8096, 8304
                rotation = right
            ]
            
            component pas_resistor "R63" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 7904, 8304
                rotation = right
            ]
            
            component msr_voltage "VC" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8200, 8344
                rotation = right
            ]
            
            component pas_resistor "R64" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 8000, 8304
                rotation = right
            ]
            
            component msr_voltage "VB" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8280, 8280
                rotation = right
            ]
            
            component msr_voltage "VA" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8360, 8216
                rotation = right
            ]
            
            component msr_current "IC" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7480, 8120
            ]
            
            component msr_current "IB" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7392, 8024
            ]
            
            component msr_current "IA" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7312, 7928
            ]
            component "core/Voltage RMS" "VCrms"{
                
            }
            [
                position = 7584, 8320
                rotation = right
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VBrms"{
                
            }
            [
                position = 7688, 8280
                rotation = right
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VArms"{
                
            }
            [
                position = 7784, 8208
                rotation = right
                size = 64, 32
            ]
            
            component "core/Current RMS" "IBrms"{
                
            }
            [
                position = 7208, 8024
                size = 64, 32
            ]
            
            component "core/Current RMS" "ICrms"{
                
            }
            [
                position = 7208, 8120
                size = 64, 32
            ]
            
            component "core/Current RMS" "IArms"{
                
            }
            [
                position = 7208, 7928
                size = 64, 32
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            tag "Goto9" {
                value = "Vb_G1"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8480, 8280
                size = 60, 20
            ]
            
            tag "Goto10" {
                value = "Va_G1"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8480, 8216
                size = 60, 20
            ]
            
            tag "Goto8" {
                value = "Vc_G1"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8480, 8344
                size = 60, 20
            ]
            
            tag "Goto12" {
                value = "Ia_G1"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7536, 7760
                size = 60, 20
            ]
            
            tag "Goto11" {
                value = "Ic_G1"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7536, 7888
                size = 60, 20
            ]
            
            tag "Goto13" {
                value = "Ib_G1"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7536, 7824
                size = 60, 20
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "P1" {
                label = "a"
                
                position = right:1
                kind = pe
            }
            [
                position = 8432, 7928
                rotation = down
            ]
            port "P2" {
                label = "b"
                
                position = right:2
                kind = pe
            }
            [
                position = 8432, 8024
                rotation = down
            ]
            port "P3" {
                label = "c"
                
                position = right:3
                kind = pe
            }
            [
                position = 8432, 8120
                rotation = down
            ]
            port "P4" {
                label = "A"
                
                position = left:1
                kind = pe
            }
            [
                position = 7112, 7928
            ]
            port "P5" {
                label = "B"
                
                position = left:2
                kind = pe
            }
            [
                position = 7112, 8024
            ]
            port "P6" {
                label = "C"
                
                position = left:3
                kind = pe
            }
            [
                position = 7112, 8120
            ]
            
            junction "Junction1421" pe
            [
                position = 8280, 8456
            ]
            
            junction "Junction1463" pe
            [
                position = 8200, 8456
            ]
            
            junction "Junction1464" pe
            [
                position = 8096, 8456
            ]
            
            junction "Junction1465" pe
            [
                position = 8000, 8456
            ]
            
            junction "Junction1466" pe
            [
                position = 8360, 7928
            ]
            
            junction "Junction1467" pe
            [
                position = 8280, 8024
            ]
            
            junction "Junction1468" pe
            [
                position = 8200, 8120
            ]
            
            junction "Junction1475" pe
            [
                position = 7904, 7928
            ]
            
            junction "Junction1476" pe
            [
                position = 8000, 8024
            ]
            
            junction "Junction1477" pe
            [
                position = 8096, 8120
            ]
            
            junction "Junction1479" pe
            [
                position = 7784, 8456
            ]
            
            junction "Junction1480" pe
            [
                position = 7904, 8456
            ]
            
            junction "Junction1481" pe
            [
                position = 7688, 8456
            ]
            
            junction "Junction1482" pe
            [
                position = 7584, 8120
            ]
            
            junction "Junction1483" pe
            [
                position = 7688, 8024
            ]
            
            junction "Junction1484" pe
            [
                position = 7784, 7928
            ]
            
            connect Goto10 "VA.out" as Connection32
            
            
            connect Goto11 "IC.out" as Connection352
            
            
            connect Goto12 "IA.out" as Connection354
            
            
            connect Goto13 "IB.out" as Connection353
            
            
            connect Goto8 "VC.out" as Connection45
            
            
            connect Goto9 "VB.out" as Connection46
            
            
            connect "IA.n_node" Junction1484 as Connection363
            
            
            connect "IArms.n_node" "IA.p_node" as Connection340
            
            
            connect "IB.n_node" Junction1483 as Connection360
            
            
            connect "IBrms.n_node" "IB.p_node" as Connection341
            
            
            connect "IC.n_node" Junction1482 as Connection357
            
            
            connect "ICrms.n_node" "IC.p_node" as Connection342
            
            
            connect Junction1421 Junction1463 as Connection224
            
            
            connect Junction1463 "VC.n_node" as Connection225
            
            
            connect Junction1464 Junction1463 as Connection228
            
            
            connect Junction1465 Junction1464 as Connection231
            
            
            connect Junction1466 P1 as Connection299
            
            
            connect Junction1467 P2 as Connection301
            
            
            connect Junction1468 Junction1477 as Connection297
            
            
            connect Junction1468 P3 as Connection302
            
            
            connect Junction1475 Junction1466 as Connection292
            
            
            connect Junction1475 Junction1484 as Connection361
            [
                breakpoints =7904, 7928
            ]
            
            connect Junction1476 Junction1467 as Connection295
            
            
            connect Junction1477 "R65.p_node" as Connection298
            
            
            connect Junction1479 Junction1480 as Connection313
            
            
            connect Junction1479 "VArms.n_node" as Connection310
            
            
            connect Junction1480 Junction1465 as Connection312
            
            
            connect Junction1481 Junction1479 as Connection315
            
            
            connect Junction1482 Junction1477 as Connection356
            [
                breakpoints =7584, 8120
            ]
            
            connect Junction1483 Junction1476 as Connection359
            [
                breakpoints =7688, 8024
            ]
            
            connect Junction1484 "VArms.p_node" as Connection362
            [
                breakpoints =7784, 7928
            ]
            
            connect P4 "IArms.p_node" as Connection364
            
            
            connect P5 "IBrms.p_node" as Connection365
            
            
            connect P6 "ICrms.p_node" as Connection366
            
            
            connect "R63.p_node" Junction1475 as Connection291
            
            
            connect "R63.n_node" Junction1480 as Connection311
            
            
            connect "R64.n_node" Junction1465 as Connection230
            
            
            connect "R64.p_node" Junction1476 as Connection294
            
            
            connect "R65.n_node" Junction1464 as Connection227
            
            
            connect "VA.n_node" Junction1421 as Connection237
            
            
            connect "VA.p_node" Junction1466 as Connection240
            
            
            connect "VB.n_node" Junction1421 as Connection203
            
            
            connect "VB.p_node" Junction1467 as Connection243
            
            
            connect "VBrms.n_node" Junction1481 as Connection316
            
            
            connect "VBrms.p_node" Junction1483 as Connection358
            
            
            connect "VC.p_node" Junction1468 as Connection246
            
            
            connect "VCrms.n_node" Junction1481 as Connection314
            
            
            connect "VCrms.p_node" Junction1482 as Connection355
            
            
    
            
        }
        [
            position = 7112, 8064
            size = 56, 232
        ]
        
        component Subsystem "Ld1_meas" {
            layout = dynamic
    
            
            component pas_resistor "R65" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 8096, 8304
                rotation = right
            ]
            
            component msr_voltage "VA" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8360, 8216
                rotation = right
            ]
            
            component msr_voltage "VB" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8280, 8280
                rotation = right
            ]
            
            component pas_resistor "R63" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 7904, 8304
                rotation = right
            ]
            
            component pas_resistor "R64" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 8000, 8304
                rotation = right
            ]
            
            component msr_voltage "VC" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8200, 8344
                rotation = right
            ]
            
            component msr_current "IA" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7312, 7928
            ]
            
            component msr_current "IC" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7480, 8120
            ]
            
            component msr_current "IB" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7392, 8024
            ]
            
            component gen_bus_join "Bus Join1" {
                
                inputs = "3"
    	    
            }
            [
                position = 8512, 8280
            ]
            component "core/Voltage RMS" "VCrms"{
                
            }
            [
                position = 7584, 8320
                rotation = right
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VArms"{
                
            }
            [
                position = 7784, 8208
                rotation = right
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VBrms"{
                
            }
            [
                position = 7688, 8280
                rotation = right
                size = 64, 32
            ]
            
            component "core/Current RMS" "IBrms"{
                
            }
            [
                position = 7208, 8024
                size = 64, 32
            ]
            
            component "core/Current RMS" "ICrms"{
                
            }
            [
                position = 7208, 8120
                size = 64, 32
            ]
            
            component "core/Current RMS" "IArms"{
                
            }
            [
                position = 7208, 7928
                size = 64, 32
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            tag "Goto13" {
                value = "Ib_Ld1"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7536, 7824
                size = 60, 20
            ]
            
            tag "Goto12" {
                value = "Ia_Ld1"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7536, 7760
                size = 60, 20
            ]
            
            tag "Goto11" {
                value = "Ic_Ld1"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7536, 7888
                size = 60, 20
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "P1" {
                label = "a"
                
                position = right:2
                kind = pe
            }
            [
                position = 8432, 7928
                rotation = down
            ]
            port "P2" {
                label = "b"
                
                position = right:3
                kind = pe
            }
            [
                position = 8432, 8024
                rotation = down
            ]
            port "P3" {
                label = "c"
                
                position = right:4
                kind = pe
            }
            [
                position = 8432, 8120
                rotation = down
            ]
            port "P4" {
                label = "A"
                
                position = left:1
                kind = pe
            }
            [
                position = 7096, 7928
            ]
            port "P5" {
                label = "B"
                
                position = left:2
                kind = pe
            }
            [
                position = 7096, 8024
            ]
            port "P6" {
                label = "C"
                
                position = left:3
                kind = pe
            }
            [
                position = 7096, 8120
            ]
            port "Vabc" {
                label = "Vabc"
                
                position = top:1
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8592, 8280
            ]
            
            junction "Junction1421" pe
            [
                position = 8280, 8456
            ]
            
            junction "Junction1463" pe
            [
                position = 8200, 8456
            ]
            
            junction "Junction1464" pe
            [
                position = 8096, 8456
            ]
            
            junction "Junction1465" pe
            [
                position = 8000, 8456
            ]
            
            junction "Junction1466" pe
            [
                position = 8360, 7928
            ]
            
            junction "Junction1467" pe
            [
                position = 8280, 8024
            ]
            
            junction "Junction1468" pe
            [
                position = 8200, 8120
            ]
            
            junction "Junction1475" pe
            [
                position = 7904, 7928
            ]
            
            junction "Junction1476" pe
            [
                position = 8000, 8024
            ]
            
            junction "Junction1477" pe
            [
                position = 8096, 8120
            ]
            
            junction "Junction1479" pe
            [
                position = 7784, 8456
            ]
            
            junction "Junction1480" pe
            [
                position = 7904, 8456
            ]
            
            junction "Junction1481" pe
            [
                position = 7688, 8456
            ]
            
            junction "Junction1482" pe
            [
                position = 7584, 8120
            ]
            
            junction "Junction1483" pe
            [
                position = 7688, 8024
            ]
            
            junction "Junction1484" pe
            [
                position = 7784, 7928
            ]
            
            connect "Bus Join1.out" Vabc as Connection368
            
            
            connect Goto11 "IC.out" as Connection352
            
            
            connect Goto12 "IA.out" as Connection354
            
            
            connect Goto13 "IB.out" as Connection353
            
            
            connect "IA.n_node" Junction1484 as Connection363
            
            
            connect "IArms.n_node" "IA.p_node" as Connection340
            
            
            connect "IB.n_node" Junction1483 as Connection360
            
            
            connect "IBrms.n_node" "IB.p_node" as Connection341
            
            
            connect "IC.n_node" Junction1482 as Connection357
            
            
            connect "ICrms.n_node" "IC.p_node" as Connection342
            
            
            connect Junction1421 Junction1463 as Connection224
            
            
            connect Junction1463 "VC.n_node" as Connection225
            
            
            connect Junction1464 Junction1463 as Connection228
            
            
            connect Junction1465 Junction1464 as Connection231
            
            
            connect Junction1466 P1 as Connection299
            
            
            connect Junction1467 P2 as Connection301
            
            
            connect Junction1468 Junction1477 as Connection297
            
            
            connect Junction1468 P3 as Connection302
            
            
            connect Junction1475 Junction1466 as Connection292
            
            
            connect Junction1476 Junction1467 as Connection295
            
            
            connect Junction1476 Junction1483 as Connection358
            [
                breakpoints =8000, 8024
            ]
            
            connect Junction1477 "R65.p_node" as Connection298
            
            
            connect Junction1479 Junction1480 as Connection313
            
            
            connect Junction1479 "VArms.n_node" as Connection310
            
            
            connect Junction1480 Junction1465 as Connection312
            
            
            connect Junction1481 Junction1479 as Connection315
            
            
            connect Junction1482 Junction1477 as Connection356
            [
                breakpoints =7584, 8120
            ]
            
            connect Junction1483 "VBrms.p_node" as Connection359
            [
                breakpoints =7688, 8024
            ]
            
            connect Junction1484 Junction1475 as Connection362
            [
                breakpoints =7784, 7928
            ]
            
            connect P4 "IArms.p_node" as Connection364
            
            
            connect P5 "IBrms.p_node" as Connection365
            
            
            connect P6 "ICrms.p_node" as Connection366
            
            
            connect "R63.p_node" Junction1475 as Connection291
            
            
            connect "R63.n_node" Junction1480 as Connection311
            
            
            connect "R64.n_node" Junction1465 as Connection230
            
            
            connect "R64.p_node" Junction1476 as Connection294
            
            
            connect "R65.n_node" Junction1464 as Connection227
            
            
            connect "VA.out" "Bus Join1.in" as Connection369
            
            
            connect "VA.n_node" Junction1421 as Connection237
            
            
            connect "VA.p_node" Junction1466 as Connection240
            
            
            connect "VArms.p_node" Junction1484 as Connection361
            
            
            connect "VB.out" "Bus Join1.in1" as Connection367
            
            
            connect "VB.n_node" Junction1421 as Connection203
            
            
            connect "VB.p_node" Junction1467 as Connection243
            
            
            connect "VBrms.n_node" Junction1481 as Connection316
            
            
            connect "VC.out" "Bus Join1.in2" as Connection370
            
            
            connect "VC.p_node" Junction1468 as Connection246
            
            
            connect "VCrms.n_node" Junction1481 as Connection314
            
            
            connect "VCrms.p_node" Junction1482 as Connection355
            
            
    
            
        }
        [
            position = 7112, 8480
            size = 56, 232
        ]
        
        component Subsystem "B2_meas" {
            layout = dynamic
    
            
            component msr_voltage "VB" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8280, 8280
                rotation = right
            ]
            
            component msr_voltage "VA" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8360, 8216
                rotation = right
            ]
            
            component msr_current "IC" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7496, 8120
            ]
            
            component pas_resistor "R65" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 8096, 8304
                rotation = right
            ]
            
            component msr_current "IB" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7408, 8024
            ]
            
            component msr_current "IA" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7328, 7928
            ]
            
            component pas_resistor "R63" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 7904, 8304
                rotation = right
            ]
            
            component msr_voltage "VC" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8200, 8344
                rotation = right
            ]
            
            component pas_resistor "R64" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 8000, 8304
                rotation = right
            ]
            component "core/Current RMS" "ICrms"{
                
            }
            [
                position = 7224, 8120
                size = 64, 32
            ]
            
            component "core/Current RMS" "IArms"{
                
            }
            [
                position = 7224, 7928
                size = 64, 32
            ]
            
            component "core/Current RMS" "IBrms"{
                
            }
            [
                position = 7224, 8024
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VArms"{
                
            }
            [
                position = 7784, 8208
                rotation = right
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VCrms"{
                
            }
            [
                position = 7584, 8320
                rotation = right
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VBrms"{
                
            }
            [
                position = 7688, 8280
                rotation = right
                size = 64, 32
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            tag "Goto10" {
                value = "Va_B2"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8592, 8216
                size = 60, 20
            ]
            
            tag "Goto9" {
                value = "Vb_B2"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8592, 8280
                size = 60, 20
            ]
            
            tag "Goto8" {
                value = "Vc_B2"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8592, 8344
                size = 60, 20
            ]
            
            tag "Goto11" {
                value = "Ic_B2"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7552, 7888
                size = 60, 20
            ]
            
            tag "Goto12" {
                value = "Ia_B2"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7552, 7728
                size = 60, 20
            ]
            
            tag "Goto13" {
                value = "Ib_B2"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7472, 7832
                size = 60, 20
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "P1" {
                label = "a"
                
                position = right:1
                kind = pe
            }
            [
                position = 8432, 7928
                rotation = down
            ]
            port "P2" {
                label = "b"
                
                position = right:2
                kind = pe
            }
            [
                position = 8432, 8024
                rotation = down
            ]
            port "P3" {
                
                position = right:3
                kind = pe
            }
            [
                position = 8432, 8120
                rotation = down
            ]
            port "P4" {
                label = "A"
                
                position = left:1
                kind = pe
            }
            [
                position = 7128, 7928
            ]
            port "P5" {
                label = "B"
                
                position = left:2
                kind = pe
            }
            [
                position = 7128, 8024
            ]
            port "P6" {
                label = "C"
                
                position = left:3
                kind = pe
            }
            [
                position = 7128, 8120
            ]
            
            junction "Junction1421" pe
            [
                position = 8280, 8456
            ]
            
            junction "Junction1463" pe
            [
                position = 8200, 8456
            ]
            
            junction "Junction1464" pe
            [
                position = 8096, 8456
            ]
            
            junction "Junction1465" pe
            [
                position = 8000, 8456
            ]
            
            junction "Junction1466" pe
            [
                position = 8360, 7928
            ]
            
            junction "Junction1467" pe
            [
                position = 8280, 8024
            ]
            
            junction "Junction1468" pe
            [
                position = 8200, 8120
            ]
            
            junction "Junction1475" pe
            [
                position = 7904, 7928
            ]
            
            junction "Junction1476" pe
            [
                position = 8000, 8024
            ]
            
            junction "Junction1477" pe
            [
                position = 8096, 8120
            ]
            
            junction "Junction1479" pe
            [
                position = 7784, 8456
            ]
            
            junction "Junction1480" pe
            [
                position = 7904, 8456
            ]
            
            junction "Junction1481" pe
            [
                position = 7688, 8456
            ]
            
            junction "Junction1482" pe
            [
                position = 7584, 8120
            ]
            
            junction "Junction1483" pe
            [
                position = 7688, 8024
            ]
            
            junction "Junction1484" pe
            [
                position = 7784, 7928
            ]
            
            connect Goto13 "IB.out" as Connection384
            [
                breakpoints =7472, 7832;7408, 7832
            ]
            
            connect Goto8 "VC.out" as Connection381
            [
                breakpoints =8592, 8344;8520, 8344
            ]
            
            connect Goto9 "VB.out" as Connection380
            [
                breakpoints =8592, 8280;8504, 8280
            ]
            
            connect "IA.out" Goto12 as Connection382
            [
                breakpoints =7328, 7776
            ]
            
            connect "IA.n_node" Junction1484 as Connection351
            
            
            connect "IArms.n_node" "IA.p_node" as Connection340
            
            
            connect "IB.n_node" Junction1483 as Connection348
            
            
            connect "IBrms.n_node" "IB.p_node" as Connection341
            
            
            connect "IC.out" Goto11 as Connection379
            [
                breakpoints =7496, 7888
            ]
            
            connect "IC.n_node" Junction1482 as Connection345
            
            
            connect "ICrms.n_node" "IC.p_node" as Connection342
            
            
            connect Junction1421 Junction1463 as Connection224
            
            
            connect Junction1463 "VC.n_node" as Connection225
            
            
            connect Junction1464 Junction1463 as Connection228
            
            
            connect Junction1465 Junction1464 as Connection231
            
            
            connect Junction1466 P1 as Connection299
            
            
            connect Junction1467 P2 as Connection301
            
            
            connect Junction1468 Junction1477 as Connection297
            
            
            connect Junction1468 P3 as Connection302
            
            
            connect Junction1475 Junction1466 as Connection292
            
            
            connect Junction1475 Junction1484 as Connection349
            [
                breakpoints =7904, 7928
            ]
            
            connect Junction1476 Junction1467 as Connection295
            
            
            connect Junction1476 Junction1483 as Connection346
            [
                breakpoints =8000, 8024
            ]
            
            connect Junction1477 "R65.p_node" as Connection298
            
            
            connect Junction1479 Junction1480 as Connection313
            
            
            connect Junction1479 "VArms.n_node" as Connection310
            
            
            connect Junction1480 Junction1465 as Connection312
            
            
            connect Junction1481 Junction1479 as Connection315
            
            
            connect Junction1482 Junction1477 as Connection344
            [
                breakpoints =7584, 8120
            ]
            
            connect Junction1483 "VBrms.p_node" as Connection347
            [
                breakpoints =7688, 8024
            ]
            
            connect Junction1484 "VArms.p_node" as Connection350
            [
                breakpoints =7784, 7928
            ]
            
            connect P4 "IArms.p_node" as Connection337
            
            
            connect P5 "IBrms.p_node" as Connection338
            
            
            connect P6 "ICrms.p_node" as Connection339
            
            
            connect "R63.p_node" Junction1475 as Connection291
            
            
            connect "R63.n_node" Junction1480 as Connection311
            
            
            connect "R64.n_node" Junction1465 as Connection230
            
            
            connect "R64.p_node" Junction1476 as Connection294
            
            
            connect "R65.n_node" Junction1464 as Connection227
            
            
            connect "VA.out" Goto10 as Connection383
            [
                breakpoints =8488, 8216
            ]
            
            connect "VA.n_node" Junction1421 as Connection237
            
            
            connect "VA.p_node" Junction1466 as Connection240
            
            
            connect "VB.n_node" Junction1421 as Connection203
            
            
            connect "VB.p_node" Junction1467 as Connection243
            
            
            connect "VBrms.n_node" Junction1481 as Connection316
            
            
            connect "VC.p_node" Junction1468 as Connection246
            
            
            connect "VCrms.n_node" Junction1481 as Connection314
            
            
            connect "VCrms.p_node" Junction1482 as Connection343
            
            
    
            
        }
        [
            position = 6008, 8064
            size = 56, 232
        ]
        component "core/Transmission Line" "Line6"{
            
            C_sequence_metric = "c_13"
            Frequency = "sys_freq"
            L_sequence_metric = "l_13"
            Length_metric = "0.45719"
            R_sequence_metric = "r_13"
            model_def = "Sequence"
            unit_sys = "metric"
        }
        [
            position = 7320, 8480
            size = 256, 72
        ]
        
        component "core/Transmission Line" "Line7"{
            
            C_sequence_metric = "c_13"
            Frequency = "sys_freq"
            L_sequence_metric = "l_13"
            Length_metric = "0.61569"
            R_sequence_metric = "r_13"
            model_def = "Sequence"
            unit_sys = "metric"
        }
        [
            position = 7320, 8896
            size = 256, 72
        ]
        
        
        component Subsystem "Ld1_grid_meas" {
            layout = dynamic
    
            
            component pas_resistor "R63" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 7904, 8304
                rotation = right
            ]
            
            component msr_current "IB" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7392, 8024
            ]
            
            component msr_voltage "VA" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8360, 8216
                rotation = right
            ]
            
            component msr_voltage "VC" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8200, 8344
                rotation = right
            ]
            
            component msr_current "IA" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7312, 7928
            ]
            
            component pas_resistor "R65" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 8096, 8304
                rotation = right
            ]
            
            component pas_resistor "R64" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 8000, 8304
                rotation = right
            ]
            
            component msr_voltage "VB" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8280, 8280
                rotation = right
            ]
            
            component msr_current "IC" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7480, 8120
            ]
            
            component gen_bus_join "join" {
                
                inputs = "3"
    	    
            }
            [
                position = 7560, 7824
            ]
            
            component gen_bus_join "join1" {
                
                inputs = "3"
    	    
            }
            [
                position = 8656, 8280
            ]
            
            component gen_gain "Gain8" {
                
                gain = "[1.0e-6]"
    	    
            }
            [
                position = 8888, 7744
            ]
            
            component gen_gain "Gain7" {
                
                gain = "[1.0e-6]"
    	    
            }
            [
                position = 8888, 7816
            ]
            
            component gen_gain "Gain9" {
                
                gain = "[1.0e-6]"
    	    
            }
            [
                position = 8888, 7672
            ]
            
            component gen_probe "P_EPC_pu" {
                
                addr = "17965"
    	    
            }
            [
                position = 8976, 7672
            ]
            
            component gen_probe "Q_EPC_pu" {
                
                addr = "17938"
    	    
            }
            [
                position = 8976, 7744
            ]
            
            component gen_probe "S_EPC_pu" {
                
                addr = "17951"
    	    
            }
            [
                position = 8976, 7816
            ]
            component "core/Current RMS" "IBrms"{
                
            }
            [
                position = 7208, 8024
                size = 64, 32
            ]
            
            component "core/Current RMS" "IArms"{
                
            }
            [
                position = 7208, 7928
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VArms"{
                
            }
            [
                position = 7784, 8208
                rotation = right
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VBrms"{
                
            }
            [
                position = 7688, 8280
                rotation = right
                size = 64, 32
            ]
            
            component "core/Current RMS" "ICrms"{
                
            }
            [
                position = 7208, 8120
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VCrms"{
                
            }
            [
                position = 7584, 8320
                rotation = right
                size = 64, 32
            ]
            
            
            component Subsystem "PQ measure" {
                layout = dynamic
        
                
                component gen_terminator "Termination2" {
                    
        	    
                }
                [
                    position = 7992, 8208
                    scale = -1, 1
                ]
                
                component gen_terminator "Termination1" {
                    
        	    
                }
                [
                    position = 7936, 8184
                    scale = -1, 1
                ]
                
                component gen_terminator "Termination4" {
                    
        	    
                }
                [
                    position = 8104, 8248
                    scale = -1, 1
                ]
                
                component gen_PQ_transform "PQ Power Meter1" {
                    
                    execution_rate = "Ts"
                    filter_cutoff_Hz = "20"
                    filter_order = "second order"
        	    
                }
                [
                    position = 8192, 8192
                    scale = -1, 1
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "P_meas_out" {
                    label = "P_meas_out"
                    
                    position = left:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8128, 8136
                    rotation = down
                    size = 25, 25
                ]
                port "Q_meas_out" {
                    label = "Q_meas_out"
                    
                    position = left:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8056, 8152
                    rotation = down
                    size = 25, 25
                ]
                port "Va_in" {
                    label = "Va_in"
                    
                    position = right:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8272, 8048
                    rotation = down
                    size = 25, 25
                ]
                port "Vb_in" {
                    label = "Vb_in"
                    
                    position = right:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8304, 8096
                    rotation = down
                    size = 25, 25
                ]
                port "Vc_in" {
                    label = "Vc_in"
                    
                    position = right:4
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8360, 8144
                    rotation = down
                    size = 25, 25
                ]
                port "Ia_in" {
                    label = "Ia_in"
                    
                    position = right:6
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8360, 8240
                    rotation = down
                    size = 25, 25
                ]
                port "Ib_in" {
                    label = "Ib_in"
                    
                    position = right:7
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8312, 8280
                    rotation = down
                    size = 25, 25
                ]
                port "Ic_in" {
                    label = "Ic_in"
                    
                    position = right:10
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8280, 8328
                    rotation = down
                    size = 25, 25
                ]
                port "S_meas_out" {
                    label = "S_meas_out"
                    
                    position = left:3
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 7944, 8272
                    rotation = down
                    size = 25, 25
                ]
                
                connect "PQ Power Meter1.ia" "Ia_in" as Connection1
                
                
                connect "PQ Power Meter1.ib" "Ib_in" as Connection2
                
                
                connect "PQ Power Meter1.ic" "Ic_in" as Connection3
                
                
                connect "PQ Power Meter1.Pdc" "P_meas_out" as Connection4
                
                
                connect "PQ Power Meter1.Qdc" "Q_meas_out" as Connection5
                
                
                connect "PQ Power Meter1.va" "Va_in" as Connection6
                
                
                connect "PQ Power Meter1.vb" "Vb_in" as Connection7
                
                
                connect "PQ Power Meter1.vc" "Vc_in" as Connection8
                
                
                connect "S_meas_out" "PQ Power Meter1.apparent" as Connection9
                
                
                connect "Termination1.in" "PQ Power Meter1.Pac" as Connection10
                
                
                connect "Termination2.in" "PQ Power Meter1.Qac" as Connection11
                
                
                connect "Termination4.in" "PQ Power Meter1.k_factor" as Connection12
                
                
        
                
            }
            [
                position = 8728, 7744
                scale = -1, 1
                size = 88, 184
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "P1" {
                label = "a"
                
                position = right:1
                kind = pe
            }
            [
                position = 8432, 7928
                rotation = down
            ]
            port "P2" {
                label = "b"
                
                position = right:2
                kind = pe
            }
            [
                position = 8432, 8024
                rotation = down
            ]
            port "P3" {
                label = "c"
                
                position = right:3
                kind = pe
            }
            [
                position = 8432, 8120
                rotation = down
            ]
            port "P4" {
                label = "A"
                
                position = left:1
                kind = pe
            }
            [
                position = 7096, 7928
            ]
            port "P5" {
                label = "B"
                
                position = left:2
                kind = pe
            }
            [
                position = 7096, 8024
            ]
            port "P6" {
                label = "C"
                
                position = left:3
                kind = pe
            }
            [
                position = 7096, 8120
            ]
            port "Iabc" {
                label = "Iabc"
                
                position = top:1
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 7664, 7824
            ]
            port "Vabc" {
                label = "Vabc"
                
                position = top:2
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8760, 8280
            ]
            
            junction "Junction1421" pe
            [
                position = 8280, 8456
            ]
            
            junction "Junction1463" pe
            [
                position = 8200, 8456
            ]
            
            junction "Junction1464" pe
            [
                position = 8096, 8456
            ]
            
            junction "Junction1465" pe
            [
                position = 8000, 8456
            ]
            
            junction "Junction1466" pe
            [
                position = 8360, 7928
            ]
            
            junction "Junction1467" pe
            [
                position = 8280, 8024
            ]
            
            junction "Junction1468" pe
            [
                position = 8200, 8120
            ]
            
            junction "Junction1475" pe
            [
                position = 7904, 7928
            ]
            
            junction "Junction1476" pe
            [
                position = 8000, 8024
            ]
            
            junction "Junction1477" pe
            [
                position = 8096, 8120
            ]
            
            junction "Junction1479" pe
            [
                position = 7784, 8456
            ]
            
            junction "Junction1480" pe
            [
                position = 7904, 8456
            ]
            
            junction "Junction1481" pe
            [
                position = 7688, 8456
            ]
            
            junction "Junction1482" pe
            [
                position = 7584, 8120
            ]
            
            junction "Junction1483" pe
            [
                position = 7688, 8024
            ]
            
            junction "Junction1484" pe
            [
                position = 7784, 7928
            ]
            
            junction "Junction1485" sp
            [
                position = 8496, 8264
            ]
            
            junction "Junction1486" sp
            [
                position = 8520, 8280
            ]
            
            junction "Junction1487" sp
            [
                position = 8544, 8344
            ]
            
            junction "Junction1488" sp
            [
                position = 7464, 7808
            ]
            
            junction "Junction1489" sp
            [
                position = 7488, 7824
            ]
            
            junction "Junction1490" sp
            [
                position = 7480, 7872
            ]
            
            connect "Gain7.out" "S_EPC_pu.in" as Connection376
            
            
            connect "Gain8.in" "PQ measure.Q_meas_out" as Connection379
            
            
            connect "Gain8.out" "Q_EPC_pu.in" as Connection377
            
            
            connect "IA.n_node" Junction1484 as Connection363
            
            
            connect "IArms.n_node" "IA.p_node" as Connection340
            
            
            connect "IB.n_node" Junction1483 as Connection360
            
            
            connect "IBrms.n_node" "IB.p_node" as Connection341
            
            
            connect "IC.n_node" Junction1482 as Connection357
            
            
            connect "IC.out" Junction1490 as Connection408
            [
                breakpoints =7480, 7888;7480, 7888;7480, 7888
            ]
            
            connect "ICrms.n_node" "IC.p_node" as Connection342
            
            
            connect Junction1421 Junction1463 as Connection224
            
            
            connect Junction1463 "VC.n_node" as Connection225
            
            
            connect Junction1464 Junction1463 as Connection228
            
            
            connect Junction1465 Junction1464 as Connection231
            
            
            connect Junction1466 P1 as Connection299
            
            
            connect Junction1467 P2 as Connection301
            
            
            connect Junction1468 Junction1477 as Connection297
            
            
            connect Junction1468 P3 as Connection302
            
            
            connect Junction1475 Junction1466 as Connection292
            
            
            connect Junction1476 Junction1467 as Connection295
            
            
            connect Junction1476 Junction1483 as Connection358
            
            
            connect Junction1477 "R65.p_node" as Connection298
            
            
            connect Junction1479 Junction1480 as Connection313
            
            
            connect Junction1479 "VArms.n_node" as Connection310
            
            
            connect Junction1480 Junction1465 as Connection312
            
            
            connect Junction1481 Junction1479 as Connection315
            
            
            connect Junction1482 Junction1477 as Connection356
            
            
            connect Junction1483 "VBrms.p_node" as Connection359
            
            
            connect Junction1484 Junction1475 as Connection362
            
            
            connect Junction1485 "VA.out" as Connection382
            [
                breakpoints =8472, 8264;8472, 8216
            ]
            
            connect Junction1486 "VB.out" as Connection385
            
            
            connect Junction1487 "join1.in2" as Connection388
            
            
            connect Junction1488 "IA.out" as Connection391
            
            
            connect Junction1489 "IB.out" as Connection394
            [
                breakpoints =7392, 7824;7392, 8000
            ]
            
            connect Junction1490 "join.in2" as Connection409
            [
                breakpoints =7480, 7840;7520, 7840
            ]
            
            connect P4 "IArms.p_node" as Connection364
            
            
            connect P5 "IBrms.p_node" as Connection365
            
            
            connect P6 "ICrms.p_node" as Connection366
            
            
            connect "PQ measure.S_meas_out" "Gain7.in" as Connection380
            
            
            connect "PQ measure.P_meas_out" "Gain9.in" as Connection375
            
            
            connect "PQ measure.Va_in" Junction1485 as Connection383
            
            
            connect "PQ measure.Vb_in" Junction1486 as Connection386
            [
                breakpoints =8520, 7712
            ]
            
            connect "PQ measure.Vc_in" Junction1487 as Connection389
            [
                breakpoints =8544, 7728
            ]
            
            connect "PQ measure.Ia_in" Junction1488 as Connection392
            [
                breakpoints =7464, 7768
            ]
            
            connect "PQ measure.Ib_in" Junction1489 as Connection395
            
            
            connect "PQ measure.Ic_in" Junction1490 as Connection410
            [
                breakpoints =7728, 7872;7480, 7872
            ]
            
            connect "P_EPC_pu.in" "Gain9.out" as Connection378
            
            
            connect "R63.p_node" Junction1475 as Connection291
            
            
            connect "R63.n_node" Junction1480 as Connection311
            
            
            connect "R64.n_node" Junction1465 as Connection230
            
            
            connect "R64.p_node" Junction1476 as Connection294
            
            
            connect "R65.n_node" Junction1464 as Connection227
            
            
            connect "VA.n_node" Junction1421 as Connection237
            
            
            connect "VA.p_node" Junction1466 as Connection240
            
            
            connect "VArms.p_node" Junction1484 as Connection361
            
            
            connect "VB.n_node" Junction1421 as Connection203
            
            
            connect "VB.p_node" Junction1467 as Connection243
            
            
            connect "VBrms.n_node" Junction1481 as Connection316
            
            
            connect "VC.p_node" Junction1468 as Connection246
            
            
            connect "VC.out" Junction1487 as Connection387
            
            
            connect "VCrms.n_node" Junction1481 as Connection314
            
            
            connect "VCrms.p_node" Junction1482 as Connection355
            
            
            connect "join.out" Iabc as Connection370
            
            
            connect "join.in" Junction1488 as Connection390
            
            
            connect "join.in1" Junction1489 as Connection393
            
            
            connect "join1.in" Junction1485 as Connection381
            
            
            connect "join1.in1" Junction1486 as Connection384
            
            
            connect "join1.out" Vabc as Connection371
            
            
    
            
        }
        [
            position = 6912, 8480
            size = 56, 232
        ]
        
        component Subsystem "MID_Rly1" {
            layout = dynamic
    
            
            component gen_terminator "Term5" {
                
    	    
            }
            [
                position = 8152, 8136
                rotation = down
                scale = -1, 1
            ]
            
            component gen_terminator "Term4" {
                
    	    
            }
            [
                position = 8152, 8200
                rotation = down
                scale = -1, 1
            ]
            
            component gen_delay "Delay1" {
                
                del_length = "int(3.0/60.0/Ts)"
                init_value = "[1]"
    	    
            }
            [
                position = 7880, 8344
                rotation = down
            ]
            
            component src_constant "Constant2" {
                
                execution_rate = "Ts"
                value = "[0]"
    	    
            }
            [
                position = 7776, 8344
                rotation = right
            ]
            
            component src_constant "Constant1" {
                
                execution_rate = "Ts"
                value = "[0]"
    	    
            }
            [
                position = 8056, 7928
            ]
            
            component gen_bus_split "Bus Split3" {
                
                outputs = "3"
    	    
            }
            [
                position = 7576, 8000
                rotation = right
            ]
            
            component gen_bus_split "Bus Split1" {
                
                outputs = "3"
    	    
            }
            [
                position = 7832, 8000
                rotation = right
            ]
            
            component gen_probe "CB_state" {
                
    	    
            }
            [
                position = 7592, 8344
                rotation = down
            ]
            
            component gen_terminator "Term3" {
                
    	    
            }
            [
                position = 8440, 7928
            ]
            
            component gen_bus_split "Bus Split2" {
                
                outputs = "3"
    	    
            }
            [
                position = 7704, 8000
                rotation = right
            ]
            
            component sys_signal_switch "Signal switch1" {
                
                threshold = "0.5"
    	    
            }
            [
                position = 7792, 8400
                rotation = right
            ]
            component "core/ModBus Device" "ModBus Device1"{
                
                configuration = "config2"
                execution_rate = "Ts"
            }
            [
                position = 8272, 8000
                size = 184, 184
            ]
            
            
            component Subsystem "SEL_787" {
                layout = dynamic
        
                
                component tm_delay "Unit Delay4" {
                    
        	    
                }
                [
                    position = 9496, 8056
                ]
                
                component gen_gain "Gain8" {
                    
                    gain = "4"
        	    
                }
                [
                    position = 7480, 8688
                ]
                
                component gen_logic_op "Logical operator1" {
                    
                    inputs = "4"
                    operator = "OR"
        	    
                }
                [
                    position = 8720, 8128
                    rotation = left
                ]
                
                component gen_gain "Gain1" {
                    
                    gain = "2"
        	    
                }
                [
                    position = 7536, 8328
                    rotation = right
                ]
                
                component gen_bus_join "Bus Join1" {
                    
                    inputs = "25"
        	    
                }
                [
                    position = 7928, 8080
                ]
                
                component gen_gain "Gain7" {
                    
                    gain = "2"
        	    
                }
                [
                    position = 7512, 8624
                ]
                
                component tm_delay "Unit Delay2" {
                    
                    signal_out_type = "real"
        	    
                }
                [
                    position = 7728, 8304
                    rotation = left
                ]
                
                component gen_c_function "bitwise_faults" {
                    
                    in_terminal_properties = "inherit Status;inherit R25;inherit R27;inherit R50;inherit R51;inherit R59;inherit Reset;"
                    no_feed_inputs = "[]"
                    no_feed_outputs = "[]"
                    out_terminal_properties = "uint fault_status;"
                    output_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        fault_status= (uint)Status<<1 | (uint)R25<<2 | (uint)R27<<3 | (uint)R50<<4 | (uint)R51<<5 | (uint)R59<<6 | (uint)Reset<<7;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        /*End code section*/"
        	    
                }
                [
                    position = 9200, 8272
                ]
                
                component gen_sum "Sum3" {
                    
                    signs = "3"
        	    
                }
                [
                    position = 7640, 8624
                ]
                
                component gen_logic_op "not" {
                    
                    operator = "NOT"
        	    
                }
                [
                    position = 7440, 8624
                ]
                
                component tm_delay "Unit Delay5" {
                    
                    signal_out_type = "real"
        	    
                }
                [
                    position = 7840, 8392
                    rotation = left
                ]
                
                component gen_gain "Gain4" {
                    
                    gain = "4"
        	    
                }
                [
                    position = 7480, 8384
                ]
                
                component gen_gain "Gain6" {
                    
                    gain = "16"
        	    
                }
                [
                    position = 7584, 8456
                    rotation = left
                ]
                
                component gen_sum "Sum1" {
                    
                    signs = "5"
        	    
                }
                [
                    position = 7648, 8384
                ]
                
                component src_cp_input "enable" {
                    
                    execution_rate = "Ts"
                    group = "Relay"
                    max = "1"
                    min = "0"
                    unit = ""
                    widget_label = "enable"
        	    
                }
                [
                    position = 8160, 8192
                ]
                
                component gen_c_function "pf bitwise" {
                    
                    in_terminal_properties = "inherit exp_imp;inherit lag_lead;"
                    no_feed_inputs = "[u'']"
                    no_feed_outputs = "[u'']"
                    out_terminal_properties = "uint pf_states;"
                    output_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                                                                                                                pf_states=(uint)exp_imp<<1 | (uint)lag_lead<<2;
                                                                                                                                                                                                                                                                                                                                                /*End code section*/"
        	    
                }
                [
                    position = 9200, 8416
                ]
                
                component gen_gain "Gain5" {
                    
                    gain = "8"
        	    
                }
                [
                    position = 7512, 8432
                    rotation = left
                ]
                
                component Subsystem "CALC FROM MEASUREMENTS" {
                    layout = dynamic
            
                    
                    component gen_rms_value "RMS value2" {
                        
            	    
                    }
                    [
                        position = 7064, 7984
                    ]
                    
                    component gen_PQ_transform "PQ Power Meter1" {
                        
            	    
                    }
                    [
                        position = 6936, 8952
                    ]
                    
                    component gen_gain "Gain3" {
                        
                        gain = "10"
            	    
                    }
                    [
                        position = 7064, 7792
                    ]
                    
                    component gen_terminator "Termination13" {
                        
            	    
                    }
                    [
                        position = 6864, 9368
                    ]
                    
                    component gen_gain "Gain2" {
                        
                        gain = "10"
            	    
                    }
                    [
                        position = 7048, 7696
                    ]
                    
                    component gen_rms_value "RMS value5" {
                        
            	    
                    }
                    [
                        position = 7064, 8192
                    ]
                    
                    component gen_gain "Gain10" {
                        
                        gain = "100.0"
            	    
                    }
                    [
                        position = 7064, 9168
                    ]
                    
                    component gen_gain "Gain6" {
                        
                        gain = "10"
            	    
                    }
                    [
                        position = 7064, 8704
                    ]
                    
                    component gen_gain "Gain1" {
                        
                        gain = "10"
            	    
                    }
                    [
                        position = 7000, 7592
                    ]
                    
                    component gen_terminator "Termination8" {
                        
            	    
                    }
                    [
                        position = 7336, 8312
                    ]
                    
                    component gen_gain "Gain5" {
                        
                        gain = "10"
            	    
                    }
                    [
                        position = 7064, 8600
                    ]
                    
                    component gen_gain "Gain9" {
                        
                        gain = "1.0/1000.0"
            	    
                    }
                    [
                        position = 7032, 9120
                    ]
                    
                    component gen_terminator "Termination3" {
                        
            	    
                    }
                    [
                        position = 7048, 9016
                    ]
                    
                    component gen_gain "Gain4" {
                        
                        gain = "10"
            	    
                    }
                    [
                        position = 7064, 8504
                    ]
                    
                    component gen_rms_value "RMS value4" {
                        
            	    
                    }
                    [
                        position = 7064, 8128
                    ]
                    
                    component gen_terminator "Termination9" {
                        
            	    
                    }
                    [
                        position = 7336, 8368
                    ]
                    
                    component gen_gain "Gain7" {
                        
                        gain = "1.0/1000.0"
            	    
                    }
                    [
                        position = 7096, 8824
                    ]
                    
                    component gen_terminator "Termination5" {
                        
            	    
                    }
                    [
                        position = 7304, 8488
                    ]
                    
                    component gen_terminator "Termination12" {
                        
            	    
                    }
                    [
                        position = 6864, 9312
                    ]
                    
                    component msr_phasor_3ph "Three Phase Phasor1" {
                        
            	    
                    }
                    [
                        position = 6904, 7752
                    ]
                    
                    component gen_terminator "Termination10" {
                        
            	    
                    }
                    [
                        position = 6856, 9472
                    ]
                    
                    component gen_pll_three_phs "Three phase PLL2" {
                        
            	    
                    }
                    [
                        position = 6760, 9408
                    ]
                    
                    component gen_terminator "Termination1" {
                        
            	    
                    }
                    [
                        position = 7360, 8792
                    ]
                    
                    component gen_terminator "Termination4" {
                        
            	    
                    }
                    [
                        position = 7088, 9072
                    ]
                    
                    component gen_gain "Gain8" {
                        
                        gain = "1.0/1000.0"
            	    
                    }
                    [
                        position = 7096, 8976
                    ]
                    
                    component gen_terminator "Termination11" {
                        
            	    
                    }
                    [
                        position = 6864, 9256
                    ]
                    
                    component gen_terminator "Termination7" {
                        
            	    
                    }
                    [
                        position = 7336, 8256
                    ]
                    
                    component gen_pll_three_phs "Three phase PLL1" {
                        
            	    
                    }
                    [
                        position = 7224, 8392
                    ]
                    
                    component gen_rms_value "RMS value3" {
                        
            	    
                    }
                    [
                        position = 7064, 8048
                    ]
                    
                    component gen_gain "Gain11" {
                        
                        gain = "10.0"
            	    
                    }
                    [
                        position = 7432, 8400
                    ]
                    
                    component gen_rms_value "RMS value6" {
                        
            	    
                    }
                    [
                        position = 7064, 8256
                    ]
                    
                    component msr_phasor_3ph "Three Phase Phasor2" {
                        
            	    
                    }
                    [
                        position = 6968, 8560
                    ]
                    
                    component gen_terminator "Termination2" {
                        
            	    
                    }
                    [
                        position = 7400, 8864
                    ]
                    
                    component gen_rms_value "RMS value1" {
                        
            	    
                    }
                    [
                        position = 7064, 7920
                    ]
                    
                    component Subsystem "Subsystem1" {
                        layout = dynamic
                
                        
                        component gen_rel_op "Relational operator4" {
                            
                            relational_op = ">"
                	    
                        }
                        [
                            position = 7872, 8296
                        ]
                        
                        component gen_abs "Abs2" {
                            
                	    
                        }
                        [
                            position = 7720, 7896
                        ]
                        
                        component gen_rel_op "Relational operator2" {
                            
                            relational_op = ">"
                	    
                        }
                        [
                            position = 7840, 7904
                        ]
                        
                        component src_constant "Constant2" {
                            
                            execution_rate = "Ts"
                            value = "[0]"
                	    
                        }
                        [
                            position = 7760, 8344
                        ]
                        
                        component gen_abs "Abs1" {
                            
                	    
                        }
                        [
                            position = 7720, 7792
                        ]
                        
                        component gen_rel_op "Relational operator1" {
                            
                            relational_op = ">"
                	    
                        }
                        [
                            position = 7840, 7800
                        ]
                        
                        component gen_product "Product1" {
                            
                            signs = "*/"
                	    
                        }
                        [
                            position = 7880, 8112
                        ]
                        
                        component gen_abs "Abs3" {
                            
                	    
                        }
                        [
                            position = 7720, 8104
                        ]
                        
                        component gen_rel_op "Relational operator3" {
                            
                            relational_op = ">"
                	    
                        }
                        [
                            position = 7872, 8200
                        ]
                        
                        component src_constant "Constant1" {
                            
                            execution_rate = "Ts"
                	    
                        }
                        [
                            position = 7768, 7856
                        ]
                        
                        component gen_logic_op "Logical operator1" {
                            
                	    
                        }
                        [
                            position = 7976, 7856
                        ]
                        
                        component gen_c_function "Calculate S" {
                            
                            in_terminal_properties = "inherit P;inherit Q;"
                            no_feed_inputs = "[]"
                            no_feed_outputs = "[]"
                            out_terminal_properties = "real S;"
                            output_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                S=sqrt(P*P+Q*Q) ;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                /*End code section*/"
                	    
                        }
                        [
                            position = 7728, 7984
                        ]
                        
                        component Subsystem "Subsystem1" {
                            layout = dynamic
                    
                            
                            component tm_delay "Unit Delay1" {
                                
                                execution_rate = "Ts"
                                init_value = "[1]"
                                signal_out_type = "real"
                    	    
                            }
                            [
                                position = 7976, 8056
                            ]
                            
                            component sys_mp_signal_switch "Multiport signal switch1" {
                                
                                number_of_input_terminals = "2"
                    	    
                            }
                            [
                                position = 7752, 8056
                            ]
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            port "u" {
                                label = "In1"
                                
                                position = left:1
                                kind = sp
                                direction = out
                                sp_type {
                                    default = auto
                                    readonly = True
                                }
                            }
                            [
                                position = 7576, 8032
                                size = 25, 25
                            ]
                            port "E" {
                                label = "In2"
                                
                                position = left:2
                                kind = sp
                                direction = out
                                sp_type {
                                    default = auto
                                    readonly = True
                                }
                            }
                            [
                                position = 7648, 8056
                                size = 25, 25
                            ]
                            port "Out1" {
                                label = "Out1"
                                
                                position = auto:auto
                                kind = sp
                                direction = in
                                sp_type {
                                    default = inherit
                                    readonly = True
                                }
                            }
                            [
                                position = 8128, 8056
                                size = 25, 25
                            ]
                            
                            junction "Junction1" sp
                            [
                                position = 8072, 8056
                                size = 0, 0
                            ]
                            
                            connect E "Multiport signal switch1.in" as Connection1
                            
                            
                            connect Junction1 "Unit Delay1.out" as Connection2
                            
                            
                            connect "Multiport signal switch1.in1" Junction1 as Connection3
                            
                            
                            connect Out1 Junction1 as Connection4
                            
                            
                            connect "Unit Delay1.in" "Multiport signal switch1.out" as Connection5
                            
                            
                            connect u "Multiport signal switch1.ctrl" as Connection6
                            
                            
                    
                            
                        }
                        [
                            position = 8168, 8120
                            size = 112, 56
                        ]
                        
                        component Subsystem "Subsystem3" {
                            layout = dynamic
                    
                            
                            component tm_delay "Unit Delay1" {
                                
                                execution_rate = "Ts"
                                init_value = "[1]"
                                signal_out_type = "real"
                    	    
                            }
                            [
                                position = 7976, 8056
                            ]
                            
                            component sys_mp_signal_switch "Multiport signal switch1" {
                                
                                number_of_input_terminals = "2"
                    	    
                            }
                            [
                                position = 7752, 8056
                            ]
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            port "u" {
                                label = "In1"
                                
                                position = left:1
                                kind = sp
                                direction = out
                                sp_type {
                                    default = auto
                                    readonly = True
                                }
                            }
                            [
                                position = 7656, 8008
                                size = 25, 25
                            ]
                            port "Out1" {
                                label = "Out1"
                                
                                position = auto:auto
                                kind = sp
                                direction = in
                                sp_type {
                                    default = inherit
                                    readonly = True
                                }
                            }
                            [
                                position = 8128, 8056
                                size = 25, 25
                            ]
                            port "E" {
                                label = "In2"
                                
                                position = left:2
                                kind = sp
                                direction = out
                                sp_type {
                                    default = auto
                                    readonly = True
                                }
                            }
                            [
                                position = 7656, 8056
                                size = 25, 25
                            ]
                            
                            junction "Junction1" sp
                            [
                                position = 8032, 8056
                                size = 0, 0
                            ]
                            
                            connect E "Multiport signal switch1.in" as Connection1
                            
                            
                            connect Junction1 Out1 as Connection2
                            
                            
                            connect "Multiport signal switch1.in1" Junction1 as Connection3
                            
                            
                            connect "Multiport signal switch1.ctrl" u as Connection4
                            
                            
                            connect "Unit Delay1.out" Junction1 as Connection5
                            
                            
                            connect "Unit Delay1.in" "Multiport signal switch1.out" as Connection6
                            
                            
                    
                            
                        }
                        [
                            position = 8168, 8304
                            size = 112, 56
                        ]
                        
                        component Subsystem "Subsystem2" {
                            layout = dynamic
                    
                            
                            component sys_mp_signal_switch "Multiport signal switch1" {
                                
                                number_of_input_terminals = "2"
                    	    
                            }
                            [
                                position = 7752, 8056
                            ]
                            
                            component tm_delay "Unit Delay1" {
                                
                                execution_rate = "Ts"
                                init_value = "[1]"
                                signal_out_type = "real"
                    	    
                            }
                            [
                                position = 7976, 8056
                            ]
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            port "u" {
                                label = "In1"
                                
                                position = left:1
                                kind = sp
                                direction = out
                                sp_type {
                                    default = auto
                                    readonly = True
                                }
                            }
                            [
                                position = 7576, 8032
                                size = 25, 25
                            ]
                            port "E" {
                                label = "In2"
                                
                                position = left:2
                                kind = sp
                                direction = out
                                sp_type {
                                    default = auto
                                    readonly = True
                                }
                            }
                            [
                                position = 7648, 8056
                                size = 25, 25
                            ]
                            port "Out1" {
                                label = "Out1"
                                
                                position = auto:auto
                                kind = sp
                                direction = in
                                sp_type {
                                    default = inherit
                                    readonly = True
                                }
                            }
                            [
                                position = 8128, 8056
                                size = 25, 25
                            ]
                            
                            junction "Junction1" sp
                            [
                                position = 8072, 8056
                                size = 0, 0
                            ]
                            
                            connect E "Multiport signal switch1.in" as Connection1
                            
                            
                            connect Junction1 "Unit Delay1.out" as Connection2
                            
                            
                            connect "Multiport signal switch1.in1" Junction1 as Connection3
                            
                            
                            connect Out1 Junction1 as Connection4
                            
                            
                            connect "Unit Delay1.in" "Multiport signal switch1.out" as Connection5
                            
                            
                            connect u "Multiport signal switch1.ctrl" as Connection6
                            
                            
                    
                            
                        }
                        [
                            position = 8168, 8208
                            size = 112, 56
                        ]
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        port "P" {
                            label = "P"
                            
                            position = left:1
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7544, 8104
                            size = 25, 25
                        ]
                        port "Q" {
                            label = "Q"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7544, 7992
                            size = 25, 25
                        ]
                        port "S" {
                            label = "S"
                            
                            position = right:1
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8304, 7984
                            size = 25, 25
                        ]
                        port "pf" {
                            label = "pf"
                            
                            position = auto:auto
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8304, 8120
                            size = 25, 25
                        ]
                        port "Lagging or Leading" {
                            label = "Lag or Lead"
                            
                            position = auto:auto
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8304, 8304
                            size = 25, 25
                        ]
                        port "Exporting or Importing" {
                            label = "export or import"
                            
                            position = auto:auto
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8304, 8208
                            size = 25, 25
                        ]
                        
                        junction "Junction1" sp
                        [
                            position = 7576, 7992
                            size = 0, 0
                        ]
                        
                        junction "Junction4" sp
                        [
                            position = 7600, 8104
                            size = 0, 0
                        ]
                        
                        junction "Junction5" sp
                        [
                            position = 7776, 7984
                            size = 0, 0
                        ]
                        
                        junction "Junction7" sp
                        [
                            position = 7672, 8104
                            size = 0, 0
                        ]
                        
                        junction "Junction8" sp
                        [
                            position = 7632, 7992
                            size = 0, 0
                        ]
                        
                        junction "Junction11" sp
                        [
                            position = 7808, 7856
                            size = 0, 0
                        ]
                        
                        junction "Junction12" sp
                        [
                            position = 7600, 7976
                            size = 0, 0
                        ]
                        
                        junction "Junction13" sp
                        [
                            position = 7840, 8248
                            size = 0, 0
                        ]
                        
                        junction "Junction14" sp
                        [
                            position = 8080, 8128
                            size = 0, 0
                        ]
                        
                        junction "Junction15" sp
                        [
                            position = 8080, 8216
                            size = 0, 0
                        ]
                        
                        connect "Abs1.in" Junction1 as Connection1
                        
                        
                        connect "Abs1.out" "Relational operator1.in" as Connection2
                        
                        
                        connect "Abs2.out" "Relational operator2.in" as Connection3
                        
                        
                        connect "Abs3.in" Junction7 as Connection4
                        
                        
                        connect "Abs3.out" "Product1.in" as Connection5
                        
                        
                        connect "Calculate S.P" Junction12 as Connection6
                        
                        
                        connect "Calculate S.S" Junction5 as Connection7
                        
                        
                        connect "Constant1.out" Junction11 as Connection8
                        
                        
                        connect "Constant2.out" Junction13 as Connection9
                        
                        
                        connect "Exporting or Importing" "Subsystem2.Out1" as Connection10
                        
                        
                        connect Junction1 Junction8 as Connection11
                        
                        
                        connect Junction11 "Relational operator1.in1" as Connection12
                        
                        
                        connect Junction12 "Abs2.in" as Connection13
                        
                        
                        connect Junction13 "Relational operator3.in1" as Connection14
                        
                        
                        connect Junction14 "Subsystem1.E" as Connection15
                        
                        
                        connect Junction15 Junction14 as Connection16
                        
                        
                        connect Junction4 Junction12 as Connection17
                        
                        
                        connect Junction4 P as Connection18
                        
                        
                        connect Junction5 S as Connection19
                        
                        
                        connect Junction7 Junction4 as Connection20
                        
                        
                        connect Junction8 "Calculate S.Q" as Connection21
                        
                        
                        connect "Lagging or Leading" "Subsystem3.Out1" as Connection22
                        
                        
                        connect "Logical operator1.out" Junction14 as Connection23
                        
                        
                        connect "Product1.in1" Junction5 as Connection24
                        
                        
                        connect "Product1.out" "Subsystem1.u" as Connection25
                        
                        
                        connect Q Junction1 as Connection26
                        
                        
                        connect "Relational operator1.out" "Logical operator1.in" as Connection27
                        
                        
                        connect "Relational operator2.in1" Junction11 as Connection28
                        
                        
                        connect "Relational operator2.out" "Logical operator1.in1" as Connection29
                        
                        
                        connect "Relational operator3.in" Junction7 as Connection30
                        
                        
                        connect "Relational operator3.out" "Subsystem2.u" as Connection31
                        
                        
                        connect "Relational operator4.in1" Junction13 as Connection32
                        
                        
                        connect "Relational operator4.in" Junction8 as Connection33
                        
                        
                        connect "Relational operator4.out" "Subsystem3.u" as Connection34
                        
                        
                        connect "Subsystem2.E" Junction15 as Connection35
                        
                        
                        connect "Subsystem3.E" Junction15 as Connection36
                        
                        
                        connect pf "Subsystem1.Out1" as Connection37
                        
                        
                
                        
                    }
                    [
                        position = 7216, 8912
                        size = 112, 80
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "Ia" {
                        label = "Ia"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6616, 7920
                        size = 25, 25
                    ]
                    port "Ia_rms" {
                        label = "Ia_rms"
                        
                        position = right:7
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 7920
                        size = 25, 25
                    ]
                    port "Ib" {
                        label = "Ib"
                        
                        position = left:2
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6616, 7984
                        size = 25, 25
                    ]
                    port "Ib_rms" {
                        label = "Ib_rms"
                        
                        position = right:8
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 7984
                        size = 25, 25
                    ]
                    port "Ic" {
                        label = "Ic"
                        
                        position = left:3
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6616, 8048
                        size = 25, 25
                    ]
                    port "Ic_rms" {
                        label = "Ic_rms"
                        
                        position = right:9
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8048
                        size = 25, 25
                    ]
                    port "Va" {
                        label = "Va"
                        
                        position = left:4
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6616, 8128
                        size = 25, 25
                    ]
                    port "Va_rms" {
                        label = "Va_rms"
                        
                        position = right:10
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8128
                        size = 25, 25
                    ]
                    port "Vb" {
                        label = "Vb"
                        
                        position = left:5
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6616, 8192
                        size = 25, 25
                    ]
                    port "Vc" {
                        label = "Vc"
                        
                        position = left:6
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6616, 8256
                        size = 25, 25
                    ]
                    port "Vb_rms" {
                        label = "Vb_rms"
                        
                        position = right:11
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8192
                        size = 25, 25
                    ]
                    port "Vc_rms" {
                        label = "Vc_rms"
                        
                        position = right:12
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8256
                        size = 25, 25
                    ]
                    port "P" {
                        label = "P"
                        
                        position = right:19
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7160, 8824
                        size = 25, 25
                    ]
                    port "Q" {
                        label = "Q"
                        
                        position = right:20
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7168, 8976
                        size = 25, 25
                    ]
                    port "S" {
                        label = "S"
                        
                        position = right:21
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7112, 9120
                        size = 25, 25
                    ]
                    port "pf" {
                        label = "pf"
                        
                        position = right:22
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7144, 9168
                        size = 25, 25
                    ]
                    port "Ia_mag" {
                        label = "Ia_mag"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 7536
                        size = 25, 25
                    ]
                    port "Ia_phase" {
                        label = "Ia_phase"
                        
                        position = right:2
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 7592
                        size = 25, 25
                    ]
                    port "Ib_mag" {
                        label = "Ib_mag"
                        
                        position = right:3
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 7640
                        size = 25, 25
                    ]
                    port "Ib_phase" {
                        label = "Ib_phase"
                        
                        position = right:4
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 7696
                        size = 25, 25
                    ]
                    port "Ic_mag" {
                        label = "Ic_mag"
                        
                        position = right:5
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 7744
                        size = 25, 25
                    ]
                    port "Ic_phase" {
                        label = "Ic_phase"
                        
                        position = right:6
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 7792
                        size = 25, 25
                    ]
                    port "Va_mag" {
                        label = "Va_mag"
                        
                        position = right:13
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8456
                        size = 25, 25
                    ]
                    port "Va_phase" {
                        label = "Va_phase"
                        
                        position = right:14
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8504
                        size = 25, 25
                    ]
                    port "Vb_mag" {
                        label = "Vb_mag"
                        
                        position = right:15
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8552
                        size = 25, 25
                    ]
                    port "Vb_phase" {
                        label = "Vb_phase"
                        
                        position = right:16
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8600
                        size = 25, 25
                    ]
                    port "Vc_mag" {
                        label = "Vc_mag"
                        
                        position = right:17
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8648
                        size = 25, 25
                    ]
                    port "Vc_phase" {
                        label = "Vc_phase"
                        
                        position = right:18
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8704
                        size = 25, 25
                    ]
                    port "Export Import" {
                        label = "Export Import"
                        
                        position = right:28
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7360, 8976
                        size = 25, 25
                    ]
                    port "Lag Lead" {
                        label = "Lag Lead"
                        
                        position = right:27
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7456, 8920
                        size = 25, 25
                    ]
                    port "bus_freq" {
                        label = "Bus_freq"
                        
                        position = right:23
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7512, 8400
                        size = 25, 25
                    ]
                    port "bus_wt" {
                        label = "Bus_wt"
                        
                        position = right:24
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7440, 8456
                        size = 25, 25
                    ]
                    port "Vline_a" {
                        label = "In1"
                        
                        position = auto:auto
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6632, 9352
                        size = 25, 25
                    ]
                    port "Vline_b" {
                        label = "In1"
                        
                        position = auto:auto
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6632, 9408
                        size = 25, 25
                    ]
                    port "Vline_c" {
                        label = "In1"
                        
                        position = auto:auto
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6632, 9464
                        size = 25, 25
                    ]
                    port "line_freq" {
                        label = "line_freq"
                        
                        position = right:25
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7016, 9416
                        size = 25, 25
                    ]
                    port "line_wt" {
                        label = "Line_wt"
                        
                        position = right:26
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7016, 9464
                        size = 25, 25
                    ]
                    
                    junction "Junction23" sp
                    [
                        position = 6752, 8128
                        size = 0, 0
                    ]
                    
                    junction "Junction24" sp
                    [
                        position = 6768, 8192
                        size = 0, 0
                    ]
                    
                    junction "Junction25" sp
                    [
                        position = 6784, 8256
                        size = 0, 0
                    ]
                    
                    junction "Junction32" sp
                    [
                        position = 7056, 8888
                        size = 0, 0
                    ]
                    
                    junction "Junction34" sp
                    [
                        position = 6688, 8048
                        size = 0, 0
                    ]
                    
                    junction "Junction35" sp
                    [
                        position = 6656, 7920
                        size = 0, 0
                    ]
                    
                    junction "Junction37" sp
                    [
                        position = 6672, 7984
                        size = 0, 0
                    ]
                    
                    junction "Junction38" sp
                    [
                        position = 7056, 8928
                        size = 0, 0
                    ]
                    
                    junction "Junction39" sp
                    [
                        position = 6752, 8360
                        size = 0, 0
                    ]
                    
                    junction "Junction41" sp
                    [
                        position = 6768, 8392
                        size = 0, 0
                    ]
                    
                    junction "Junction42" sp
                    [
                        position = 6784, 8424
                        size = 0, 0
                    ]
                    
                    junction "Junction44" sp
                    [
                        position = 6768, 8568
                        size = 0, 0
                    ]
                    
                    junction "Junction45" sp
                    [
                        position = 6784, 8584
                        size = 0, 0
                    ]
                    
                    junction "Junction46" sp
                    [
                        position = 6688, 8048
                        size = 0, 0
                    ]
                    
                    junction "Junction47" sp
                    [
                        position = 6856, 7728
                    ]
                    
                    junction "Junction48" sp
                    [
                        position = 6752, 8536
                    ]
                    
                    junction "Junction49" sp
                    [
                        position = 6928, 8536
                    ]
                    
                    connect "Export Import" "Subsystem1.Exporting or Importing" as Connection1
                    
                    
                    connect "Gain1.out" "Ia_phase" as Connection87
                    
                    
                    connect "Gain10.in" "PQ Power Meter1.k_factor" as Connection105
                    
                    
                    connect "Gain11.in" "Three phase PLL1.freq" as Connection107
                    
                    
                    connect "Gain2.out" "Ib_phase" as Connection89
                    
                    
                    connect "Gain3.in" "Three Phase Phasor1.phase3" as Connection91
                    
                    
                    connect "Gain4.in" "Three Phase Phasor2.phase1" as Connection92
                    
                    
                    connect "Gain4.out" "Va_phase" as Connection93
                    
                    
                    connect "Gain5.out" "Vb_phase" as Connection95
                    
                    
                    connect "Gain6.in" "Three Phase Phasor2.phase3" as Connection97
                    
                    
                    connect "Gain7.in" Junction32 as Connection99
                    
                    
                    connect "Gain8.out" Q as Connection101
                    
                    
                    connect "Gain9.in" "PQ Power Meter1.apparent" as Connection103
                    
                    
                    connect Ia Junction35 as Connection2
                    
                    
                    connect "Ia_mag" "Three Phase Phasor1.out1" as Connection3
                    
                    
                    connect "Ia_rms" "RMS value1.out" as Connection4
                    
                    
                    connect Ib Junction37 as Connection5
                    
                    
                    connect "Ib_rms" "RMS value2.out" as Connection6
                    
                    
                    connect Ic Junction34 as Connection7
                    
                    
                    connect "Ic_phase" "Gain3.out" as Connection90
                    
                    
                    connect "Ic_rms" "RMS value3.out" as Connection9
                    
                    
                    connect Junction23 Junction39 as Connection10
                    
                    
                    connect Junction23 Va as Connection11
                    
                    
                    connect Junction24 Junction41 as Connection12
                    
                    
                    connect Junction24 "RMS value5.in" as Connection13
                    
                    
                    connect Junction24 Vb as Connection14
                    
                    
                    connect Junction25 Junction42 as Connection15
                    
                    
                    connect Junction25 "RMS value6.in" as Connection16
                    
                    
                    connect Junction32 "PQ Power Meter1.Pdc" as Connection17
                    
                    
                    connect Junction37 "RMS value2.in" as Connection18
                    
                    
                    connect Junction38 "Gain8.in" as Connection100
                    
                    
                    connect Junction39 "Three phase PLL1.va" as Connection20
                    
                    
                    connect Junction41 "Three phase PLL1.vb" as Connection21
                    
                    
                    connect Junction42 "Three phase PLL1.vc" as Connection22
                    
                    
                    connect Junction44 Junction41 as Connection23
                    
                    
                    connect Junction45 Junction42 as Connection24
                    
                    
                    connect Junction46 Junction34 as Connection25
                    
                    
                    connect Junction47 Junction35 as Connection26
                    
                    
                    connect Junction48 Junction39 as Connection27
                    
                    
                    connect Junction49 Junction48 as Connection28
                    
                    
                    connect P "Gain7.out" as Connection98
                    
                    
                    connect "PQ Power Meter1.ia" Junction35 as Connection30
                    
                    
                    connect "PQ Power Meter1.ib" Junction37 as Connection31
                    
                    
                    connect "PQ Power Meter1.Qdc" Junction38 as Connection32
                    
                    
                    connect "PQ Power Meter1.vb" Junction44 as Connection33
                    
                    
                    connect "PQ Power Meter1.vc" Junction45 as Connection34
                    
                    
                    connect "PQ Power Meter1.ic" Junction46 as Connection35
                    
                    
                    connect "PQ Power Meter1.va" Junction48 as Connection36
                    
                    
                    connect "RMS value1.in" Junction35 as Connection37
                    
                    
                    connect "RMS value3.in" Junction34 as Connection38
                    
                    
                    connect "RMS value4.in" Junction23 as Connection39
                    
                    
                    connect S "Gain9.out" as Connection102
                    
                    
                    connect "Subsystem1.P" Junction32 as Connection41
                    
                    
                    connect "Subsystem1.Q" Junction38 as Connection42
                    
                    
                    connect "Subsystem1.Lagging or Leading" "Lag Lead" as Connection43
                    
                    
                    connect "Subsystem1.S" "Termination1.in" as Connection44
                    
                    
                    connect "Termination10.in" "Three phase PLL2.sin_theta" as Connection45
                    
                    
                    connect "Termination11.in" "Three phase PLL2.d_axis" as Connection46
                    
                    
                    connect "Termination12.in" "Three phase PLL2.q_axis" as Connection47
                    
                    
                    connect "Termination13.in" "Three phase PLL2.zero_axis" as Connection48
                    
                    
                    connect "Termination2.in" "Subsystem1.pf" as Connection49
                    
                    
                    connect "Termination3.in" "PQ Power Meter1.Pac" as Connection50
                    
                    
                    connect "Termination4.in" "PQ Power Meter1.Qac" as Connection51
                    
                    
                    connect "Termination5.in" "Three phase PLL1.sin_theta" as Connection52
                    
                    
                    connect "Termination7.in" "Three phase PLL1.d_axis" as Connection53
                    
                    
                    connect "Termination8.in" "Three phase PLL1.q_axis" as Connection54
                    
                    
                    connect "Termination9.in" "Three phase PLL1.zero_axis" as Connection55
                    
                    
                    connect "Three Phase Phasor1.phase1" "Gain1.in" as Connection86
                    
                    
                    connect "Three Phase Phasor1.phase2" "Gain2.in" as Connection88
                    
                    
                    connect "Three Phase Phasor1.out2" "Ib_mag" as Connection57
                    
                    
                    connect "Three Phase Phasor1.out3" "Ic_mag" as Connection59
                    
                    
                    connect "Three Phase Phasor1.in2" Junction37 as Connection60
                    
                    
                    connect "Three Phase Phasor1.in3" Junction46 as Connection61
                    
                    
                    connect "Three Phase Phasor1.in_ref" Junction47 as Connection63
                    
                    
                    connect "Three Phase Phasor1.in1" Junction47 as Connection62
                    
                    
                    connect "Three Phase Phasor2.phase2" "Gain5.in" as Connection94
                    
                    
                    connect "Three Phase Phasor2.in2" Junction44 as Connection64
                    
                    
                    connect "Three Phase Phasor2.in3" Junction45 as Connection65
                    
                    
                    connect "Three Phase Phasor2.in1" Junction49 as Connection67
                    
                    
                    connect "Three Phase Phasor2.in_ref" Junction49 as Connection66
                    
                    
                    connect "Three Phase Phasor2.out1" "Va_mag" as Connection68
                    
                    
                    connect "Three Phase Phasor2.out2" "Vb_mag" as Connection70
                    
                    
                    connect "Three Phase Phasor2.out3" "Vc_mag" as Connection72
                    
                    
                    connect "Three phase PLL2.freq" "line_freq" as Connection73
                    
                    
                    connect "Va_rms" "RMS value4.out" as Connection74
                    
                    
                    connect "Vb_rms" "RMS value5.out" as Connection75
                    
                    
                    connect Vc Junction25 as Connection76
                    
                    
                    connect "Vc_phase" "Gain6.out" as Connection96
                    
                    
                    connect "Vc_rms" "RMS value6.out" as Connection78
                    
                    
                    connect "Vline_a" "Three phase PLL2.va" as Connection79
                    
                    
                    connect "Vline_b" "Three phase PLL2.vb" as Connection80
                    
                    
                    connect "Vline_c" "Three phase PLL2.vc" as Connection81
                    
                    
                    connect "bus_freq" "Gain11.out" as Connection106
                    
                    
                    connect "bus_wt" "Three phase PLL1.theta" as Connection83
                    
                    
                    connect "line_wt" "Three phase PLL2.theta" as Connection84
                    
                    
                    connect pf "Gain10.out" as Connection104
                    
                    
            
                    
                }
                [
                    position = 6992, 8104
                    size = 112, 664
                ]
                
                component Subsystem "State Condition Mng" {
                    layout = dynamic
            
                    
                    component gen_logic_op "not" {
                        
                        operator = "NOT"
            	    
                    }
                    [
                        position = 7840, 8200
                    ]
                    
                    component gen_logic_op "not1" {
                        
                        operator = "NOT"
            	    
                    }
                    [
                        position = 8032, 8264
                    ]
                    
                    component gen_terminator "Termination1" {
                        
            	    
                    }
                    [
                        position = 8200, 8336
                        scale = 1, -1
                    ]
                    
                    component gen_digital_probe "trip" {
                        
            	    
                    }
                    [
                        position = 8528, 8272
                    ]
                    
                    component gen_sr_ff "SR Flip Flop1" {
                        
            	    
                    }
                    [
                        position = 8120, 8352
                        scale = 1, -1
                    ]
                    
                    component gen_c_function "Trip_out mng fnc" {
                        
                        in_terminal_properties = "real bool_R25;inherit op_mode_in;inherit trip_in;inherit enable;inherit initial_condition;inherit activate_logic;"
                        init_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                trip_out = initial_condition;
                                                                                                                                                                                                                                                /*End code section*/"
                        no_feed_inputs = "[u'']"
                        no_feed_outputs = "[u'']"
                        out_terminal_properties = "real trip_out;"
                        output_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                if(enable && activate_logic){
                                                                                                                                                                                                                                                    if(op_mode_in==0){
                                                                                                                                                                                                                                                        trip_out = trip_in*bool_R25;
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                    else if(op_mode_in==1){
                                                                                                                                                                                                                                                        trip_out = 1*bool_R25;
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                    else if(op_mode_in==2){
                                                                                                                                                                                                                                                        trip_out=0;
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                /*End code section*/"
            	    
                    }
                    [
                        position = 8424, 8208
                    ]
                    
                    component Subsystem "detect_change" {
                        layout = dynamic
                
                        
                        component gen_rel_op "Relational operator1" {
                            
                            relational_op = "!="
                	    
                        }
                        [
                            position = 8240, 8192
                        ]
                        
                        component tm_delay "Unit Delay1" {
                            
                	    
                        }
                        [
                            position = 8144, 8200
                        ]
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        port "Out1" {
                            label = "Out"
                            
                            position = right:1
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8304, 8192
                            size = 25, 25
                        ]
                        port "In3" {
                            label = "In"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8032, 8200
                            size = 25, 25
                        ]
                        
                        junction "Junction1" sp
                        [
                            position = 8080, 8200
                            size = 0, 0
                        ]
                        
                        connect Junction1 In3 as Connection1
                        
                        
                        connect "Relational operator1.in" Junction1 as Connection2
                        
                        
                        connect "Relational operator1.out" Out1 as Connection3
                        
                        
                        connect "Unit Delay1.in" Junction1 as Connection4
                        
                        
                        connect "Unit Delay1.out" "Relational operator1.in1" as Connection5
                        
                        
                
                        
                    }
                    [
                        position = 7960, 8368
                        size = 48, 48
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "Trip_in" {
                        label = "Trip_in"
                        
                        position = left:3
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7768, 8200
                    ]
                    port "R25" {
                        label = "R25"
                        
                        position = left:2
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8232, 8128
                    ]
                    port "op_mode" {
                        label = "op_mode"
                        
                        position = left:2
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8272, 8160
                    ]
                    port "trip_out" {
                        label = "trip_out"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8536, 8208
                    ]
                    port "enable" {
                        label = "enable"
                        
                        position = left:5
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7952, 8264
                    ]
                    port "initial_condition" {
                        label = "initial_condition"
                        
                        position = left:4
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8248, 8232
                    ]
                    
                    junction "Junction2" sp
                    [
                        position = 7984, 8264
                    ]
                    
                    junction "Junction3" sp
                    [
                        position = 7904, 8200
                    ]
                    
                    junction "Junction4" sp
                    [
                        position = 8472, 8208
                    ]
                    
                    connect Junction2 enable as Connection150
                    
                    
                    connect Junction3 "not.out" as Connection158
                    
                    
                    connect Junction4 "Trip_out mng fnc.trip_out" as Connection165
                    
                    
                    connect R25 "Trip_out mng fnc.bool_R25" as Connection144
                    
                    
                    connect "SR Flip Flop1.r_in" "not1.out" as Connection136
                    
                    
                    connect "Termination1.in" "SR Flip Flop1.out_n" as Connection138
                    
                    
                    connect "Trip_out mng fnc.enable" Junction2 as Connection151
                    
                    
                    connect "Trip_out mng fnc.trip_in" Junction3 as Connection157
                    
                    
                    connect "Trip_out mng fnc.activate_logic" "SR Flip Flop1.out" as Connection154
                    
                    
                    connect "detect_change.In3" Junction3 as Connection159
                    
                    
                    connect "detect_change.Out1" "SR Flip Flop1.s_in" as Connection156
                    
                    
                    connect "initial_condition" "Trip_out mng fnc.initial_condition" as Connection152
                    
                    
                    connect "not.in" "Trip_in" as Connection139
                    
                    
                    connect "not1.in" Junction2 as Connection149
                    
                    
                    connect "op_mode" "Trip_out mng fnc.op_mode_in" as Connection145
                    
                    
                    connect "trip.in" Junction4 as Connection166
                    
                    
                    connect "trip_out" Junction4 as Connection164
                    
                    
            
                    
                }
                [
                    position = 9336, 8056
                    size = 128, 136
                ]
                
                component Subsystem "Relay_Param" {
                    layout = dynamic
            
                    
                    component gen_bus_join "Bus Join1" {
                        
                        inputs = "4"
            	    
                    }
                    [
                        position = 8248, 7736
                    ]
                    
                    component src_constant "CT_primary" {
                        
                        execution_rate = "Ts"
                        value = "CT_primary"
            	    
                    }
                    [
                        position = 8088, 7928
                    ]
                    
                    component src_constant "VRMSLL" {
                        
                        execution_rate = "Ts"
                        value = "VRMSLL"
            	    
                    }
                    [
                        position = 8088, 7648
                    ]
                    
                    component src_constant "27P_59P_tripDelay" {
                        
                        execution_rate = "Ts"
                        value = "R27P_R59P_tripDelay"
            	    
                    }
                    [
                        position = 8088, 7872
                    ]
                    
                    component sys_signal_switch "Signal switch1" {
                        
                        threshold = "0.5"
            	    
                    }
                    [
                        position = 9104, 7808
                        scale = 1, -1
                    ]
                    
                    component src_constant "Initial_status" {
                        
                        execution_rate = "Ts"
                        value = "Initial_status"
            	    
                    }
                    [
                        position = 8088, 7992
                    ]
                    
                    component src_constant "angle_threshold" {
                        
                        execution_rate = "Ts"
                        value = "angle_threshold"
            	    
                    }
                    [
                        position = 8088, 7760
                    ]
                    
                    component src_constant "dV_threshold" {
                        
                        execution_rate = "Ts"
                        value = "dV_threshold"
            	    
                    }
                    [
                        position = 8088, 7704
                    ]
                    
                    component src_constant "dF_threshold" {
                        
                        execution_rate = "Ts"
                        value = "dF_threshold"
            	    
                    }
                    [
                        position = 8088, 7816
                    ]
                    
                    component gen_bus_split "Bus Split1" {
                        
                        outputs = "3"
            	    
                    }
                    [
                        position = 8104, 8192
                        rotation = down
                        scale = -1, -1
                    ]
                    
                    component Subsystem "Grid_Tied_param" {
                        layout = dynamic
                
                        
                        component src_constant "50P_tripDelay" {
                            
                            execution_rate = "Ts"
                            value = "R50P_tripDelay1"
                	    
                        }
                        [
                            position = 8352, 7880
                            rotation = right
                        ]
                        
                        component gen_bus_join "Bus Join1" {
                            
                            inputs = "10"
                	    
                        }
                        [
                            position = 8552, 8040
                        ]
                        
                        component src_constant "59P_pickup" {
                            
                            execution_rate = "Ts"
                            value = "R59P_pickup1"
                	    
                        }
                        [
                            position = 8080, 7840
                            rotation = right
                        ]
                        
                        component src_constant "27P_pickup" {
                            
                            execution_rate = "Ts"
                            value = "R27P_pickup1"
                	    
                        }
                        [
                            position = 8120, 7880
                            rotation = right
                        ]
                        
                        component src_constant "51P_pickup" {
                            
                            execution_rate = "Ts"
                            value = "R51P_pickup1"
                	    
                        }
                        [
                            position = 8312, 7840
                            rotation = right
                        ]
                        
                        component gen_gain "divide_sqrt3" {
                            
                            gain = "1.0/np.sqrt(3.0)"
                	    
                        }
                        [
                            position = 8504, 7904
                            rotation = right
                        ]
                        
                        component src_constant "51P_curveType" {
                            
                            execution_rate = "Ts"
                            value = "R51P_curveType1"
                	    
                        }
                        [
                            position = 8240, 7880
                            rotation = right
                        ]
                        
                        component src_constant "51P_timeDial" {
                            
                            execution_rate = "Ts"
                            value = "R51P_timeDial1"
                	    
                        }
                        [
                            position = 8200, 7840
                            rotation = right
                        ]
                        
                        component src_constant "50P_pickup" {
                            
                            execution_rate = "Ts"
                            value = "R50P_pickup1"
                	    
                        }
                        [
                            position = 8416, 7840
                            rotation = right
                        ]
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        port "VRMSLL" {
                            label = "VRMSLL"
                            
                            position = left:1
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8504, 7840
                            rotation = right
                        ]
                        port "CT_primary" {
                            label = "CT_primary"
                            
                            position = left:3
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8448, 7880
                            rotation = right
                        ]
                        port "27P_59P_tripDelay" {
                            label = "27P_59P_tripDelay"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8024, 7880
                            rotation = right
                        ]
                        port "relay_param" {
                            label = "relay_param"
                            
                            position = right:auto
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8704, 8040
                        ]
                        
                        comment Comment1 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">In bus join:</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in = VRMSLN</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in1 = CT_p</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in2 = IOC_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in3 = IOC_tripDelay</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in4 = TOC_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in5 = curveType</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in6 = timeDial</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in7 = UV_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in8 = OV_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in9 = UVOV_tripDelay</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>              ENDCOMMENT 
                        [
                            position = 8776, 7936
                        ]
                        
                        connect "27P_59P_tripDelay" "Bus Join1.in9" as Connection11
                        
                        
                        connect "27P_pickup.out" "Bus Join1.in7" as Connection6
                        
                        
                        connect "50P_pickup.out" "Bus Join1.in2" as Connection1
                        
                        
                        connect "50P_tripDelay.out" "Bus Join1.in3" as Connection2
                        
                        
                        connect "51P_curveType.out" "Bus Join1.in5" as Connection4
                        
                        
                        connect "51P_pickup.out" "Bus Join1.in4" as Connection3
                        
                        
                        connect "51P_timeDial.out" "Bus Join1.in6" as Connection5
                        
                        
                        connect "59P_pickup.out" "Bus Join1.in8" as Connection7
                        
                        
                        connect "CT_primary" "Bus Join1.in1" as Connection10
                        
                        
                        connect "divide_sqrt3.out" "Bus Join1.in" as Connection9
                        
                        
                        connect "divide_sqrt3.in" VRMSLL as Connection8
                        
                        
                        connect "relay_param" "Bus Join1.out" as Connection12
                        
                        
                
                        
                    }
                    [
                        position = 8872, 7728
                        size = 216, 104
                    ]
                    
                    component Subsystem "Reset" {
                        layout = dynamic
                
                        
                        component gen_logic_op "or" {
                            
                            operator = "OR"
                	    
                        }
                        [
                            position = 8152, 8192
                        ]
                        
                        component Subsystem "detect_change" {
                            layout = dynamic
                    
                            
                            component gen_rel_op "Relational operator1" {
                                
                                relational_op = "!="
                    	    
                            }
                            [
                                position = 8240, 8192
                            ]
                            
                            component tm_delay "Unit Delay1" {
                                
                    	    
                            }
                            [
                                position = 8144, 8200
                            ]
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            port "Out1" {
                                label = "Out"
                                
                                position = right:1
                                kind = sp
                                direction = in
                                sp_type {
                                    default = inherit
                                    readonly = True
                                }
                            }
                            [
                                position = 8304, 8192
                                size = 25, 25
                            ]
                            port "In3" {
                                label = "In"
                                
                                position = left:2
                                kind = sp
                                direction = out
                                sp_type {
                                    default = auto
                                    readonly = True
                                }
                            }
                            [
                                position = 8032, 8200
                                size = 25, 25
                            ]
                            
                            junction "Junction1" sp
                            [
                                position = 8080, 8200
                                size = 0, 0
                            ]
                            
                            connect Junction1 In3 as Connection1
                            
                            
                            connect "Relational operator1.in" Junction1 as Connection2
                            
                            
                            connect "Relational operator1.out" Out1 as Connection3
                            
                            
                            connect "Unit Delay1.in" Junction1 as Connection4
                            
                            
                            connect "Unit Delay1.out" "Relational operator1.in1" as Connection5
                            
                            
                    
                            
                        }
                        [
                            position = 8248, 8192
                            size = 48, 48
                        ]
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        port "reset" {
                            label = "Reset"
                            
                            position = right:2
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8336, 8152
                            size = 25, 25
                        ]
                        port "op_mode" {
                            label = "Op_mode"
                            
                            position = right:1
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8344, 8240
                            size = 25, 25
                        ]
                        port "Reset in" {
                            label = "Reset in"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8064, 8168
                            size = 25, 25
                        ]
                        port "op_mode in" {
                            label = "op_mode in"
                            
                            position = left:1
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8064, 8224
                            size = 25, 25
                        ]
                        
                        junction "Junction1" sp
                        [
                            position = 8096, 8224
                            size = 0, 0
                        ]
                        
                        connect Junction1 "op_mode in" as Connection1
                        
                        
                        connect "detect_change.Out1" reset as Connection5
                        
                        
                        connect "op_mode" Junction1 as Connection6
                        
                        
                        connect "or.in1" Junction1 as Connection3
                        
                        
                        connect "or.in" "Reset in" as Connection2
                        
                        
                        connect "or.out" "detect_change.In3" as Connection4
                        
                        
                
                        
                    }
                    [
                        position = 8280, 8192
                        rotation = down
                        scale = -1, -1
                        size = 104, 104
                    ]
                    
                    component Subsystem "Islanded_param" {
                        layout = dynamic
                
                        
                        component src_constant "51P_pickup" {
                            
                            execution_rate = "Ts"
                            value = "R51P_pickup2"
                	    
                        }
                        [
                            position = 8296, 7856
                            rotation = right
                        ]
                        
                        component src_constant "50P_tripDelay" {
                            
                            execution_rate = "Ts"
                            value = "R50P_tripDelay2"
                	    
                        }
                        [
                            position = 8352, 7888
                            rotation = right
                        ]
                        
                        component src_constant "50P_pickup" {
                            
                            execution_rate = "Ts"
                            value = "R50P_pickup2"
                	    
                        }
                        [
                            position = 8400, 7856
                            rotation = right
                        ]
                        
                        component gen_gain "divide_sqrt3" {
                            
                            gain = "1.0/np.sqrt(3.0)"
                	    
                        }
                        [
                            position = 8504, 7920
                            rotation = right
                        ]
                        
                        component src_constant "59P_pickup" {
                            
                            execution_rate = "Ts"
                            value = "R59P_pickup2"
                	    
                        }
                        [
                            position = 8072, 7856
                            rotation = right
                        ]
                        
                        component src_constant "51P_curveType" {
                            
                            execution_rate = "Ts"
                            value = "R51P_curveType2"
                	    
                        }
                        [
                            position = 8240, 7888
                            rotation = right
                        ]
                        
                        component src_constant "51P_timeDial" {
                            
                            execution_rate = "Ts"
                            value = "R51P_timeDial2"
                	    
                        }
                        [
                            position = 8192, 7856
                            rotation = right
                        ]
                        
                        component gen_bus_join "Bus Join1" {
                            
                            inputs = "10"
                	    
                        }
                        [
                            position = 8544, 8048
                        ]
                        
                        component src_constant "27P_pickup" {
                            
                            execution_rate = "Ts"
                            value = "R27P_pickup2"
                	    
                        }
                        [
                            position = 8120, 7888
                            rotation = right
                        ]
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        port "VRMSLL" {
                            label = "VRMSLL"
                            
                            position = left:1
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8504, 7856
                            rotation = right
                        ]
                        port "CT_primary" {
                            label = "CT_primary"
                            
                            position = left:3
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8448, 7888
                            rotation = right
                        ]
                        port "27P_59P_tripDelay" {
                            label = "27P_59P_tripDelay"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8024, 7888
                            rotation = right
                        ]
                        port "relay_param" {
                            label = "relay_param"
                            
                            position = right:auto
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8696, 8048
                        ]
                        
                        comment Comment1 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">In bus join:</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in = VRMSLN</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in1 = CT_p</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in2 = IOC_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in3 = IOC_tripDelay</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in4 = TOC_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in5 = curveType</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in6 = timeDial</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in7 = UV_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in8 = OV_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in9 = UVOV_tripDelay</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>              ENDCOMMENT 
                        [
                            position = 8744, 7928
                        ]
                        
                        connect "27P_59P_tripDelay" "Bus Join1.in9" as Connection11
                        
                        
                        connect "27P_pickup.out" "Bus Join1.in7" as Connection6
                        
                        
                        connect "50P_pickup.out" "Bus Join1.in2" as Connection1
                        
                        
                        connect "50P_tripDelay.out" "Bus Join1.in3" as Connection2
                        
                        
                        connect "51P_curveType.out" "Bus Join1.in5" as Connection4
                        
                        
                        connect "51P_pickup.out" "Bus Join1.in4" as Connection3
                        
                        
                        connect "51P_timeDial.out" "Bus Join1.in6" as Connection5
                        
                        
                        connect "59P_pickup.out" "Bus Join1.in8" as Connection7
                        
                        
                        connect "CT_primary" "Bus Join1.in1" as Connection10
                        
                        
                        connect "divide_sqrt3.out" "Bus Join1.in" as Connection9
                        
                        
                        connect "divide_sqrt3.in" VRMSLL as Connection8
                        
                        
                        connect "relay_param" "Bus Join1.out" as Connection12
                        
                        
                
                        
                    }
                    [
                        position = 8872, 7872
                        size = 216, 104
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    tag "Goto4" {
                        value = "VRMSLL"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8208, 7600
                    ]
                    
                    tag "From2" {
                        value = "27P_59P_tripDelay"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8616, 7728
                    ]
                    
                    tag "Goto1" {
                        value = "protection_mode"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8232, 8280
                    ]
                    
                    tag "Goto2" {
                        value = "27P_59P_tripDelay"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8192, 7872
                    ]
                    
                    tag "From4" {
                        value = "protection_mode"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 9104, 7904
                        rotation = right
                        scale = 1, -1
                    ]
                    
                    tag "From3" {
                        value = "CT_primary"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8536, 7760
                    ]
                    
                    tag "Goto3" {
                        value = "CT_primary"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8192, 7928
                    ]
                    
                    tag "From1" {
                        value = "VRMSLL"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8536, 7696
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "op_mode" {
                        label = "op_mode"
                        
                        position = right:4
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8384, 8160
                    ]
                    port "reset" {
                        label = "reset"
                        
                        position = right:5
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8384, 8224
                    ]
                    port "relay_paramR25" {
                        label = "relay_paramR25"
                        
                        position = right:2
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8360, 7736
                    ]
                    port "Initial_condition" {
                        label = "Initial_condition"
                        
                        position = right:3
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8192, 7992
                    ]
                    port "from_Modbus" {
                        label = "from_Modbus"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7992, 8192
                    ]
                    port "relay_param" {
                        label = "relay_param"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 9200, 7808
                    ]
                    
                    junction "Junction1" sp
                    [
                        position = 8152, 7648
                    ]
                    
                    junction "Junction2" sp
                    [
                        position = 8736, 7696
                    ]
                    
                    junction "Junction3" sp
                    [
                        position = 8712, 7728
                    ]
                    
                    junction "Junction4" sp
                    [
                        position = 8688, 7760
                    ]
                    
                    connect "Bus Join1.in" Junction1 as Connection54
                    
                    
                    connect "Bus Join1.in2" "angle_threshold.out" as Connection48
                    
                    
                    connect "Bus Join1.in3" "dF_threshold.out" as Connection49
                    
                    
                    connect "Bus Join1.in1" "dV_threshold.out" as Connection47
                    
                    
                    connect "Bus Split1.out1" "Reset.Reset in" as Connection75
                    
                    
                    connect "Bus Split1.in" "from_Modbus" as Connection42
                    
                    
                    connect From1 Junction2 as Connection60
                    
                    
                    connect From2 Junction3 as Connection63
                    
                    
                    connect From3 Junction4 as Connection66
                    
                    
                    connect From4 "Signal switch1.in2" as Connection71
                    
                    
                    connect Goto1 "Bus Split1.out2" as Connection45
                    
                    
                    connect Goto2 "27P_59P_tripDelay.out" as Connection51
                    
                    
                    connect Goto3 "CT_primary.out" as Connection52
                    
                    
                    connect Goto4 Junction1 as Connection56
                    
                    
                    connect "Initial_condition" "Initial_status.out" as Connection53
                    
                    
                    connect "Islanded_param.VRMSLL" Junction2 as Connection62
                    
                    
                    connect "Islanded_param.27P_59P_tripDelay" Junction3 as Connection65
                    
                    
                    connect "Islanded_param.CT_primary" Junction4 as Connection68
                    
                    
                    connect Junction1 "VRMSLL.out" as Connection55
                    
                    
                    connect Junction2 "Grid_Tied_param.VRMSLL" as Connection61
                    
                    
                    connect Junction3 "Grid_Tied_param.27P_59P_tripDelay" as Connection64
                    
                    
                    connect Junction4 "Grid_Tied_param.CT_primary" as Connection67
                    
                    
                    connect "Reset.op_mode in" "Bus Split1.out" as Connection76
                    
                    
                    connect "Reset.op_mode" "op_mode" as Connection43
                    
                    
                    connect "Reset.reset" reset as Connection44
                    
                    
                    connect "Signal switch1.in1" "Grid_Tied_param.relay_param" as Connection73
                    
                    
                    connect "Signal switch1.in" "Islanded_param.relay_param" as Connection72
                    
                    
                    connect "relay_param" "Signal switch1.out" as Connection74
                    
                    
                    connect "relay_paramR25" "Bus Join1.out" as Connection50
                    
                    
            
                    
                }
                [
                    position = 8344, 7976
                    size = 168, 160
                ]
                
                component Subsystem "R50512761" {
                    layout = dynamic
            
                    
                    component gen_c_function "Relays" {
                        
                        global_variables = "real R50;real R51;real R27;real R59;real n50;real n51;real n59;real n27;real t59;real t50;real t51;real bool_27;real t27;real bool_59;uint i;real bool_51;real bool_50;real A;real B;real P;real Ipu50;real Ipu51;real CT_tap;real ratio[3];real M[3];real t51s[3];real Iinst[3];real Irms[3];real Vrms[3];"
                        in_terminal_properties = "real enable;inherit Ts;inherit Reset;inherit IinstA;inherit IinstB;inherit IinstC;inherit IrmsA;inherit IrmsB;inherit IrmsC;inherit VrmsA;inherit VrmsB;inherit VrmsC;inherit VRMSLN;inherit CT_p;inherit IOC_pickup;inherit IOC_tripDelay;inherit TOC_pickup;inherit curveType;inherit timeDial;inherit UV_pickup;inherit OV_pickup;inherit UVOV_tripDelay;"
                        init_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                                    R50=0;
                                                                                                                                                                                                                                                                    R51=0;
                                                                                                                                                                                                                                                                    R27=0;
                                                                                                                                                                                                                                                                    R59=0;
                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                    n50=0;
                                                                                                                                                                                                                                                                    n51=0;
                                                                                                                                                                                                                                                                    n59=0;
                                                                                                                                                                                                                                                                    n27=0;
                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                    CT_tap = 1.0;
                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                    A = 5.67;
                                                                                                                                                                                                                                                                    B = 0.0352;
                                                                                                                                                                                                                                                                    P = 2.0;
                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                    t59 = 0;
                                                                                                                                                                                                                                                                    t50 = 0;
                                                                                                                                                                                                                                                                    t51 = 0;
                                                                                                                                                                                                                                                                    t27 = 0;
                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                    bool_27 = 0;
                                                                                                                                                                                                                                                                    bool_59 = 0;
                                                                                                                                                                                                                                                                    bool_51 = 0;
                                                                                                                                                                                                                                                                    bool_50 = 0;
                                                                                                                                                                                                                                                                    /*End code section*/"
                        no_feed_inputs = "[u'']"
                        no_feed_outputs = "[u'']"
                        out_terminal_properties = "real trip50;real trip51;real trip27;real trip59;"
                        output_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                                    Iinst[0] = fabs(IinstA);
                                                                                                                                                                                                                                                                    Iinst[1] = fabs(IinstB);
                                                                                                                                                                                                                                                                    Iinst[2] = fabs(IinstC);
                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                    Irms[0] = IrmsA;
                                                                                                                                                                                                                                                                    Irms[1] = IrmsB;
                                                                                                                                                                                                                                                                    Irms[2] = IrmsC;
                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                    Vrms[0] = VrmsA;
                                                                                                                                                                                                                                                                    Vrms[1] = VrmsB;
                                                                                                                                                                                                                                                                    Vrms[2] = VrmsC;
                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                    if (Reset==1) {
                                                                                                                                                                                                                                                                        R50=0;
                                                                                                                                                                                                                                                                        R51=0;
                                                                                                                                                                                                                                                                        R59=0;
                                                                                                                                                                                                                                                                        R27=0;
                                                                                                                                                                                                                                                                        bool_50 = 0.0;
                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                    for(i=0; i<3; i++){
                                                                                                                                                                                                                                                                        Iinst[i] = Iinst[i]*5.0/CT_p;
                                                                                                                                                                                                                                                                        Irms[i] = Irms[i]*5.0/CT_p;
                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                    if(curveType==1){
                                                                                                                                                                                                                                                                        A = 0.0104;
                                                                                                                                                                                                                                                                        B = 0.0226;
                                                                                                                                                                                                                                                                        P = 0.02;
                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                    else if(curveType==2){
                                                                                                                                                                                                                                                                        A = 5.95;
                                                                                                                                                                                                                                                                        B = 0.180;
                                                                                                                                                                                                                                                                        P = 2.0;
                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                    else if(curveType==3){
                                                                                                                                                                                                                                                                        A = 3.88;
                                                                                                                                                                                                                                                                        B = 0.0923;
                                                                                                                                                                                                                                                                        P = 2.0;
                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                    else{
                                                                                                                                                                                                                                                                        A = 5.67;
                                                                                                                                                                                                                                                                        B = 0.0352;
                                                                                                                                                                                                                                                                        P = 2.0;
                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                    if (!((R50 == 1) || (R51 == 1))&&(enable==1)){
                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                        if((UV_pickup>1)||(UV_pickup==0)){
                                                                                                                                                                                                                                                                            UV_pickup = 0.9;
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                        if((OV_pickup<1)||(OV_pickup==0)){
                                                                                                                                                                                                                                                                            OV_pickup = 1.1;
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                        Ipu50 = IOC_pickup*CT_tap*sqrt(2.0);
                                                                                                                                                                                                                                                                        Ipu51 = TOC_pickup*CT_tap;
                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                        for(i=0; i<3; i++){
                                                                                                                                                                                                                                                                            ratio[i] = Vrms[i]/VRMSLN;
                                                                                                                                                                                                                                                                            M[i] = Irms[i]/Ipu51;
                                                                                                                                                                                                                                                                            if(M[i]<=1.0){
                                                                                                                                                                                                                                                                                t51s[i] = 1e6;
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                            else{
                                                                                                                                                                                                                                                                                t51s[i] = timeDial*(B+(A/(pow(M[i],P)-1)));
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                        t27 = 0.004167 + UVOV_tripDelay;
                                                                                                                                                                                                                                                                        t50 = 0.004167 + IOC_tripDelay;
                                                                                                                                                                                                                                                                        t59 = 0.004167 + UVOV_tripDelay;
                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                        if((t51s[0]<=t51s[1])&&(t51s[0]<=t51s[2])){
                                                                                                                                                                                                                                                                            t51 = t51s[0];
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                        else if(t51s[1]<=t51s[2]){
                                                                                                                                                                                                                                                                            t51 = t51s[1];
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                        else{
                                                                                                                                                                                                                                                                            t51 = t51s[2];
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                        for(i=0; i<3; i++){
                                                                                                                                                                                                                                                                            if(ratio[i]<=UV_pickup){
                                                                                                                                                                                                                                                                                bool_27 = 1;
                                                                                                                                                                                                                                                                                break;
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                            else{
                                                                                                                                                                                                                                                                                bool_27 = 0;
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                        for(i=0; i<3; i++){
                                                                                                                                                                                                                                                                            if(Irms[i]>Ipu51){
                                                                                                                                                                                                                                                                                bool_51 = 1;
                                                                                                                                                                                                                                                                                break;
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                            else{
                                                                                                                                                                                                                                                                                bool_51 = 0;
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                        for(i=0; i<3; i++){
                                                                                                                                                                                                                                                                            if(Iinst[i]>Ipu50){
                                                                                                                                                                                                                                                                                bool_50 = 1;
                                                                                                                                                                                                                                                                                break;
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                        for(i=0; i<3; i++){
                                                                                                                                                                                                                                                                            if(ratio[i]>=OV_pickup){
                                                                                                                                                                                                                                                                                bool_59 = 1;
                                                                                                                                                                                                                                                                                break;
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                            else{
                                                                                                                                                                                                                                                                                bool_59 = 0;
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                        //bool_27 = ((ratio[0]<=UV_pickup)+(ratio[1]<=UV_pickup)+(ratio[2]<=UV_pickup))>0;
                                                                                                                                                                                                                                                                        //bool_59 = ((ratio[0]>=OV_pickup)+(ratio[1]>=OV_pickup)+(ratio[2]>=OV_pickup))>0;
                                                                                                                                                                                                                                                                        //bool_50 = ((Iinst[0]>Ipu50)+(Iinst[1]>Ipu50)+(Iinst[2]>Ipu50))>0;
                                                                                                                                                                                                                                                                        //bool_51 = ((Irms[0]>Ipu51)+(Irms[1]>Ipu51)+(Irms[2]>Ipu51))>0;
                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                        n50 *= bool_50;
                                                                                                                                                                                                                                                                        n51 *= bool_51;
                                                                                                                                                                                                                                                                        n27 *= bool_27;
                                                                                                                                                                                                                                                                        n59 *= bool_59;
                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                        n50 += bool_50  * Ts;
                                                                                                                                                                                                                                                                        n51 += bool_51  * Ts;
                                                                                                                                                                                                                                                                        n27 += bool_27  * Ts;
                                                                                                                                                                                                                                                                        n59 += bool_59  * Ts;
                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                        if(n50 > t50)
                                                                                                                                                                                                                                                                            R50 = 1;
                                                                                                                                                                                                                                                                        else
                                                                                                                                                                                                                                                                            R50 = 0;
                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                        if(n51 > t51)
                                                                                                                                                                                                                                                                            R51 = 1;
                                                                                                                                                                                                                                                                        else
                                                                                                                                                                                                                                                                            R51 = 0;
                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                        if(n27 > t27)
                                                                                                                                                                                                                                                                            R27 = 1;
                                                                                                                                                                                                                                                                        else
                                                                                                                                                                                                                                                                            R27 = 0;
                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                        if(n59 > t59)
                                                                                                                                                                                                                                                                            R59 = 1;
                                                                                                                                                                                                                                                                        else
                                                                                                                                                                                                                                                                            R59 = 0;
                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                    trip50 = R50;
                                                                                                                                                                                                                                                                    trip51 = R51;
                                                                                                                                                                                                                                                                    trip27 = R27;
                                                                                                                                                                                                                                                                    trip59 = R59;
                                                                                                                                                                                                                                                                    /*End code section*/"
            	    
                    }
                    [
                        position = 7784, 8008
                    ]
                    
                    component gen_digital_probe "R59" {
                        
            	    
                    }
                    [
                        position = 8032, 8120
                    ]
                    
                    component src_constant "Ts" {
                        
                        execution_rate = "Ts"
                        value = "Ts"
            	    
                    }
                    [
                        position = 7696, 7712
                        rotation = right
                    ]
                    
                    component gen_digital_probe "R51" {
                        
            	    
                    }
                    [
                        position = 8032, 7912
                    ]
                    
                    component gen_digital_probe "R27" {
                        
            	    
                    }
                    [
                        position = 8032, 8016
                    ]
                    
                    component gen_bus_split "Bus Split1" {
                        
                        outputs = "10"
            	    
                    }
                    [
                        position = 7560, 8248
                        rotation = left
                    ]
                    
                    component gen_digital_probe "R50" {
                        
            	    
                    }
                    [
                        position = 8032, 7808
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "trip_50" {
                        label = "trip_50"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7984, 7848
                        size = 25, 25
                    ]
                    port "trip_51" {
                        label = "trip_51"
                        
                        position = right:2
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7984, 7952
                        size = 25, 25
                    ]
                    port "trip_59" {
                        label = "trip_59"
                        
                        position = right:4
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7984, 8160
                        size = 25, 25
                    ]
                    port "trip_27" {
                        label = "trip_27"
                        
                        position = right:3
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7984, 8056
                        size = 25, 25
                    ]
                    port "relay_param" {
                        label = "Relay Param"
                        
                        position = left:12
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7560, 8328
                        rotation = left
                        size = 25, 25
                    ]
                    port "Irms_c" {
                        label = "Irms_c"
                        
                        position = left:8
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7368, 7752
                        rotation = right
                        size = 25, 25
                    ]
                    port "Irms_a" {
                        label = "Irms_a"
                        
                        position = left:6
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7472, 7752
                        rotation = right
                        size = 25, 25
                    ]
                    port "Enable" {
                        label = "Enable"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7736, 7752
                        rotation = right
                        size = 25, 25
                    ]
                    port "Iinst_a" {
                        label = "Iinst_a"
                        
                        position = left:3
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7608, 7712
                        rotation = right
                        size = 25, 25
                    ]
                    port "Irms_b" {
                        label = "Irms_b"
                        
                        position = left:7
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7424, 7712
                        rotation = right
                        size = 25, 25
                    ]
                    port "Iinst_b" {
                        label = "Iinst_b"
                        
                        position = left:4
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7568, 7752
                        rotation = right
                        size = 25, 25
                    ]
                    port "Reset" {
                        label = "Reset"
                        
                        position = left:2
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7656, 7752
                        rotation = right
                        size = 25, 25
                    ]
                    port "Iinst_c" {
                        label = "Iinst_c"
                        
                        position = left:5
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7520, 7712
                        rotation = right
                        size = 25, 25
                    ]
                    port "Vrms_b" {
                        label = "Vrms_b"
                        
                        position = left:10
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7256, 7752
                        rotation = right
                        size = 25, 25
                    ]
                    port "Vrms_c" {
                        label = "Vrms_c"
                        
                        position = left:11
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7200, 7712
                        rotation = right
                        size = 25, 25
                    ]
                    port "Vrms_a" {
                        label = "Vrms_a"
                        
                        position = left:9
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7312, 7712
                        rotation = right
                        size = 25, 25
                    ]
                    
                    comment Comment1 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">In bus split:</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out = VRMSLN</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out1 = CT_p</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out2 = IOC_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out3 = IOC_tripDelay</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out4 = TOC_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out5 = curveType</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out6 = timeDial</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out7 = UV_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out8 = OV_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out9 = UVOV_tripDelay</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>              ENDCOMMENT 
                    [
                        position = 7728, 8224
                    ]
                    
                    junction "Junction1" sp
                    [
                        position = 7936, 7848
                    ]
                    
                    junction "Junction2" sp
                    [
                        position = 7936, 7952
                    ]
                    
                    junction "Junction3" sp
                    [
                        position = 7936, 8056
                    ]
                    
                    junction "Junction4" sp
                    [
                        position = 7936, 8160
                    ]
                    
                    connect "Bus Split1.out4" "Relays.TOC_pickup" as Connection42
                    
                    
                    connect "Bus Split1.out8" "Relays.OV_pickup" as Connection38
                    
                    
                    connect "Bus Split1.out9" "Relays.UVOV_tripDelay" as Connection37
                    
                    
                    connect "Bus Split1.out3" "Relays.IOC_tripDelay" as Connection43
                    
                    
                    connect "Bus Split1.out" "Relays.VRMSLN" as Connection46
                    
                    
                    connect "Bus Split1.out5" "Relays.curveType" as Connection41
                    
                    
                    connect "Bus Split1.out6" "Relays.timeDial" as Connection40
                    
                    
                    connect "Bus Split1.out7" "Relays.UV_pickup" as Connection39
                    
                    
                    connect "Bus Split1.out2" "Relays.IOC_pickup" as Connection44
                    
                    
                    connect "Bus Split1.out1" "Relays.CT_p" as Connection45
                    
                    
                    connect "Bus Split1.in" "relay_param" as Connection36
                    
                    
                    connect Enable "Relays.enable" as Connection47
                    
                    
                    connect "Iinst_a" "Relays.IinstA" as Connection50
                    
                    
                    connect "Iinst_b" "Relays.IinstB" as Connection51
                    
                    
                    connect "Iinst_c" "Relays.IinstC" as Connection52
                    
                    
                    connect "Irms_a" "Relays.IrmsA" as Connection53
                    
                    
                    connect "Irms_b" "Relays.IrmsB" as Connection54
                    
                    
                    connect "Irms_c" "Relays.IrmsC" as Connection55
                    
                    
                    connect Junction1 "trip_50" as Connection64
                    
                    
                    connect Junction2 "Relays.trip51" as Connection67
                    
                    
                    connect Junction3 "Relays.trip27" as Connection70
                    
                    
                    connect Junction4 "trip_59" as Connection73
                    
                    
                    connect "R27.in" Junction3 as Connection71
                    
                    
                    connect "R50.in" Junction1 as Connection65
                    
                    
                    connect "R51.in" Junction2 as Connection68
                    
                    
                    connect "R59.in" Junction4 as Connection74
                    
                    
                    connect "Relays.trip50" Junction1 as Connection63
                    
                    
                    connect "Relays.trip59" Junction4 as Connection72
                    
                    
                    connect Reset "Relays.Reset" as Connection49
                    
                    
                    connect "Ts.out" "Relays.Ts" as Connection48
                    
                    
                    connect "Vrms_a" "Relays.VrmsA" as Connection56
                    
                    
                    connect "Vrms_b" "Relays.VrmsB" as Connection57
                    
                    
                    connect "Vrms_c" "Relays.VrmsC" as Connection58
                    
                    
                    connect "trip_27" Junction3 as Connection69
                    
                    
                    connect "trip_51" Junction2 as Connection66
                    
                    
            
                    
                }
                [
                    position = 8424, 8328
                    size = 144, 304
                ]
                
                component Subsystem "Relay 25-Sync Check1" {
                    layout = dynamic
            
                    
                    component gen_gain "Gain3" {
                        
                        gain = "1.0/10.0"
            	    
                    }
                    [
                        position = 7776, 8080
                    ]
                    
                    component gen_logic_op "Logical operator4" {
                        
                        operator = "OR"
            	    
                    }
                    [
                        position = 8888, 8096
                    ]
                    
                    component gen_c_function "Deadbus fcn" {
                        
                        global_variables = "real threshold;uint a;uint c;uint b;"
                        in_terminal_properties = "real Vbus;real Vline;real VRMSLL;"
                        no_feed_inputs = "[u'']"
                        no_feed_outputs = "[u'']"
                        output_fnc = "/*Begin code section*/
                                                                                                                                                                                                                            if (VRMSLL > 400)
                                                                                                                                                                                                                                threshold=VRMSLL*0.003;
                                                                                                                                                                                                                            else
                                                                                                                                                                                                                                threshold = VRMSLL*0.05;
                                                                                                                                                                                                                            
                                                                                                                                                                                                                            if ((Vbus > (VRMSLL*0.90)) && (Vbus < (VRMSLL*1.20)) && (Vline < threshold))
                                                                                                                                                                                                                                a = 1;
                                                                                                                                                                                                                            else
                                                                                                                                                                                                                                a = 0;
                                                                                                                                                                                                                            
                                                                                                                                                                                                                            if ((Vline > (VRMSLL*0.90)) && (Vline < (VRMSLL*1.20)) && (Vbus < threshold))
                                                                                                                                                                                                                                b = 1;
                                                                                                                                                                                                                            else
                                                                                                                                                                                                                                b = 0;
                                                                                                                                                                                                                            
                                                                                                                                                                                                                            if ((Vline < threshold) && (Vbus < threshold))
                                                                                                                                                                                                                                c = 1;
                                                                                                                                                                                                                            else
                                                                                                                                                                                                                                c = 0;
                                                                                                                                                                                                                            
                                                                                                                                                                                                                            out = a || b || c;
                                                                                                                                                                                                                            /*End code section*/"
            	    
                    }
                    [
                        position = 8208, 7672
                    ]
                    
                    component gen_logic_op "Logical operator7" {
                        
                        operator = "OR"
            	    
                    }
                    [
                        position = 8632, 7888
                    ]
                    
                    component gen_digital_probe "phase_lock" {
                        
                        addr = "2"
            	    
                    }
                    [
                        position = 8200, 8232
                    ]
                    
                    component gen_sr_ff "SR Flip Flop1" {
                        
            	    
                    }
                    [
                        position = 8736, 7864
                    ]
                    
                    component gen_gain "Gain1" {
                        
                        gain = "np.sqrt(3)"
            	    
                    }
                    [
                        position = 7864, 7776
                    ]
                    
                    component gen_digital_probe "R25" {
                        
                        addr = "2"
            	    
                    }
                    [
                        position = 9032, 8016
                    ]
                    
                    component gen_rel_op "Relational operator1" {
                        
            	    
                    }
                    [
                        position = 8464, 7856
                    ]
                    
                    component gen_digital_probe "deadbus" {
                        
                        addr = "2"
            	    
                    }
                    [
                        position = 8584, 7704
                    ]
                    
                    component src_constant "Constant2" {
                        
                        execution_rate = "Ts"
                        value = "[2]"
            	    
                    }
                    [
                        position = 8368, 7848
                    ]
                    
                    component gen_rms_value "RMS value1" {
                        
            	    
                    }
                    [
                        position = 7784, 7776
                    ]
                    
                    component gen_bus_split "Bus Split1" {
                        
                        outputs = "4"
            	    
                    }
                    [
                        position = 7808, 8424
                    ]
                    
                    component gen_digital_probe "volt_lock" {
                        
                        addr = "2"
            	    
                    }
                    [
                        position = 8200, 7824
                    ]
                    
                    component gen_gain "Gain2" {
                        
                        gain = "np.sqrt(3)"
            	    
                    }
                    [
                        position = 7864, 7832
                    ]
                    
                    component gen_logic_op "Logical operator5" {
                        
                        operator = "OR"
            	    
                    }
                    [
                        position = 8544, 7848
                    ]
                    
                    component gen_terminator "Termination1" {
                        
            	    
                    }
                    [
                        position = 8808, 7904
                    ]
                    
                    component gen_logic_op "Logical operator3" {
                        
                        inputs = "3"
            	    
                    }
                    [
                        position = 8336, 8104
                    ]
                    
                    component gen_digital_probe "freq_lock" {
                        
                        addr = "2"
            	    
                    }
                    [
                        position = 8200, 8064
                    ]
                    
                    component gen_rms_value "RMS value2" {
                        
            	    
                    }
                    [
                        position = 7784, 7832
                    ]
                    
                    component Subsystem "Voltage Comparator" {
                        layout = dynamic
                
                        
                        component gen_c_function "C function1" {
                            
                            in_terminal_properties = "real Vbus;inherit Vline;"
                            no_feed_inputs = "[u'']"
                            no_feed_outputs = "[u'']"
                            output_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        out=fabs(Vline-Vbus);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        /*End code section*/"
                	    
                        }
                        [
                            position = 7736, 8040
                        ]
                        
                        component gen_product "Product1" {
                            
                	    
                        }
                        [
                            position = 7760, 8160
                        ]
                        
                        component gen_rel_op "Relational operator1" {
                            
                            relational_op = "<="
                	    
                        }
                        [
                            position = 7856, 8048
                        ]
                        
                        component gen_gain "Gain1" {
                            
                            gain = "0.01"
                	    
                        }
                        [
                            position = 7680, 8200
                        ]
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        port "V_bus" {
                            label = "V_bus"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7600, 8016
                            size = 25, 25
                        ]
                        port "V_line" {
                            label = "V_line"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7600, 8080
                            size = 25, 25
                        ]
                        port "Locked" {
                            label = "locked"
                            
                            position = right:1
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 7928, 8048
                            size = 25, 25
                        ]
                        port "VRMSLL" {
                            label = "VRMSLL"
                            
                            position = left:3
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7600, 8152
                            size = 25, 25
                        ]
                        port "dV_threshold" {
                            label = "dV_threshold"
                            
                            position = left:4
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7600, 8200
                            size = 25, 25
                        ]
                        
                        connect "Gain1.in" "dV_threshold" as Connection8
                        
                        
                        connect "Product1.in1" "Gain1.out" as Connection7
                        
                        
                        connect "Product1.out" "Relational operator1.in1" as Connection9
                        
                        
                        connect "Product1.in" VRMSLL as Connection6
                        
                        
                        connect "Relational operator1.in" "C function1.out" as Connection2
                        
                        
                        connect "Relational operator1.out" Locked as Connection3
                        
                        
                        connect "V_bus" "C function1.Vbus" as Connection4
                        
                        
                        connect "V_line" "C function1.Vline" as Connection5
                        
                        
                
                        
                    }
                    [
                        position = 8016, 7864
                        size = 112, 208
                    ]
                    
                    component Subsystem "Phase Comparator" {
                        layout = dynamic
                
                        
                        component gen_rel_op "Relational operator1" {
                            
                            relational_op = "<="
                	    
                        }
                        [
                            position = 7808, 8056
                        ]
                        
                        component gen_c_function "C function1" {
                            
                            global_variables = "real mod_L;real wrap_out1;real wrap_out2;real mod_B;real k;real alpha;real PI2;real PI;"
                            in_terminal_properties = "real phase_bus;real phase_line;"
                            init_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        PI = 3.1415926536;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        PI2 = 2*PI;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        /*End code section*/"
                            no_feed_inputs = "[u'']"
                            no_feed_outputs = "[u'']"
                            output_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        mod_L=fmod(phase_line, PI2);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        mod_B=fmod(phase_bus, PI2);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if (fabs(mod_L - mod_B) > PI) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if (mod_L < mod_B)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                mod_B -= PI2;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            else
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                mod_B += PI2;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        out=fabs(mod_L-mod_B)*180.0/PI;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        /*End code section*/"
                	    
                        }
                        [
                            position = 7656, 8040
                        ]
                        
                        component gen_probe "c_out" {
                            
                            addr = "17943"
                	    
                        }
                        [
                            position = 7768, 8000
                        ]
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        port "Locked" {
                            label = "locked"
                            
                            position = right:1
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 7912, 8056
                            size = 25, 25
                        ]
                        port "wt_grid" {
                            label = "wt_grid"
                            
                            position = left:1
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7376, 8008
                            size = 25, 25
                        ]
                        port "wt_gen" {
                            label = "wt_gen"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7376, 8072
                            size = 25, 25
                        ]
                        port "angle_threshold" {
                            label = "angle_threshold"
                            
                            position = left:3
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7576, 8136
                            size = 25, 25
                        ]
                        
                        junction "Junction1" sp
                        [
                            position = 7736, 8048
                            size = 0, 0
                        ]
                        
                        connect Junction1 "C function1.out" as Connection2
                        
                        
                        connect Locked "Relational operator1.out" as Connection3
                        
                        
                        connect "Relational operator1.in" Junction1 as Connection4
                        
                        
                        connect "angle_threshold" "Relational operator1.in1" as Connection8
                        
                        
                        connect "c_out.in" Junction1 as Connection5
                        
                        
                        connect "wt_gen" "C function1.phase_line" as Connection6
                        
                        
                        connect "wt_grid" "C function1.phase_bus" as Connection7
                        
                        
                
                        
                    }
                    [
                        position = 8016, 8272
                        size = 112, 88
                    ]
                    
                    component Subsystem "Freq Comparator" {
                        layout = dynamic
                
                        
                        component gen_c_function "C function1" {
                            
                            in_terminal_properties = "real fbus;inherit fline;"
                            no_feed_inputs = "[u'']"
                            no_feed_outputs = "[u'']"
                            output_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                                                                out=fabs(fline-fbus);
                                                                                                                                                                                                                                                                                                /*End code section*/"
                	    
                        }
                        [
                            position = 7736, 8040
                        ]
                        
                        component gen_rel_op "Relational operator1" {
                            
                            relational_op = "<="
                	    
                        }
                        [
                            position = 7832, 8048
                        ]
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        port "Locked" {
                            label = "locked"
                            
                            position = right:1
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 7912, 8048
                            size = 25, 25
                        ]
                        port "f_bus" {
                            label = "f_bus"
                            
                            position = left:1
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7600, 8016
                            size = 25, 25
                        ]
                        port "f_line" {
                            label = "f_line"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7600, 8080
                            size = 25, 25
                        ]
                        port "dF_threshold" {
                            label = "dF_threshold"
                            
                            position = left:3
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7728, 8112
                            size = 25, 25
                        ]
                        
                        connect "Relational operator1.in" "C function1.out" as Connection6
                        
                        
                        connect "Relational operator1.out" Locked as Connection8
                        
                        
                        connect "Relational operator1.in1" "dF_threshold" as Connection7
                        
                        
                        connect "f_bus" "C function1.fbus" as Connection4
                        
                        
                        connect "f_line" "C function1.fline" as Connection5
                        
                        
                
                        
                    }
                    [
                        position = 8016, 8104
                        size = 112, 88
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    tag "Goto2" {
                        value = "dV_threshold"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 7984, 8416
                        rotation = down
                        scale = -1, 1
                    ]
                    
                    tag "From1" {
                        value = "angle_threshold"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7896, 8296
                    ]
                    
                    tag "Goto3" {
                        value = "angle_threshold"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 7912, 8432
                    ]
                    
                    tag "From5" {
                        value = "VRMSLL"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8112, 7688
                    ]
                    
                    tag "From3" {
                        value = "dV_threshold"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7896, 7944
                    ]
                    
                    tag "Goto4" {
                        value = "dF_threshold"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 7984, 8448
                    ]
                    
                    tag "From4" {
                        value = "VRMSLL"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7896, 7888
                    ]
                    
                    tag "Goto1" {
                        value = "VRMSLL"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8056, 8400
                        rotation = down
                        scale = -1, 1
                    ]
                    
                    tag "From2" {
                        value = "dF_threshold"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7896, 8128
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "trip_or" {
                        label = "trip_or"
                        
                        position = left:8
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8368, 7792
                        size = 25, 25
                    ]
                    port "mode_in" {
                        label = "mode_in"
                        
                        position = left:7
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8368, 7896
                        size = 25, 25
                    ]
                    port "bool_R25" {
                        label = "bool_R25"
                        
                        position = auto:auto
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 9032, 8096
                        size = 25, 25
                    ]
                    port "Va" {
                        label = "Va"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7712, 7776
                        size = 25, 25
                    ]
                    port "Vline_a" {
                        label = "Vline_A"
                        
                        position = left:2
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7712, 7832
                        size = 25, 25
                    ]
                    port "bus_freq" {
                        label = "bus_freq"
                        
                        position = left:3
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7712, 8080
                        size = 25, 25
                    ]
                    port "line_freq" {
                        label = "line_freq"
                        
                        position = left:4
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7824, 8104
                        size = 25, 25
                    ]
                    port "bus_wt" {
                        label = "bus_wt"
                        
                        position = left:5
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7776, 8248
                        size = 25, 25
                    ]
                    port "line_wt" {
                        label = "line_wt"
                        
                        position = left:6
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7832, 8272
                        size = 25, 25
                    ]
                    port "relay_paramR25" {
                        label = "relay_paramR25"
                        
                        position = left:9
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7712, 8424
                        size = 25, 25
                    ]
                    
                    junction "Junction4" sp
                    [
                        position = 7920, 7832
                        size = 0, 0
                    ]
                    
                    junction "Junction5" sp
                    [
                        position = 8536, 8104
                        size = 0, 0
                    ]
                    
                    junction "Junction23" sp
                    [
                        position = 7904, 7776
                        size = 0, 0
                    ]
                    
                    junction "Junction24" sp
                    [
                        position = 8976, 8096
                        size = 0, 0
                    ]
                    
                    junction "Junction25" sp
                    [
                        position = 8144, 7864
                    ]
                    
                    junction "Junction26" sp
                    [
                        position = 8152, 8104
                    ]
                    
                    junction "Junction27" sp
                    [
                        position = 8152, 8272
                    ]
                    
                    junction "Junction28" sp
                    [
                        position = 8536, 7672
                    ]
                    
                    connect "Bus Split1.in" "relay_paramR25" as Connection69
                    
                    
                    connect "Constant2.out" "Relational operator1.in" as Connection1
                    
                    
                    connect "Deadbus fcn.Vbus" Junction23 as Connection103
                    
                    
                    connect "Deadbus fcn.out" Junction28 as Connection123
                    
                    
                    connect "Freq Comparator.Locked" Junction26 as Connection115
                    
                    
                    connect "Freq Comparator.f_line" "line_freq" as Connection133
                    
                    
                    connect From1 "Phase Comparator.angle_threshold" as Connection74
                    
                    
                    connect From2 "Freq Comparator.dF_threshold" as Connection79
                    
                    
                    connect From3 "Voltage Comparator.dV_threshold" as Connection80
                    
                    
                    connect From4 "Voltage Comparator.VRMSLL" as Connection81
                    
                    
                    connect From5 "Deadbus fcn.VRMSLL" as Connection90
                    
                    
                    connect "Gain3.out" "Freq Comparator.f_bus" as Connection132
                    
                    
                    connect Goto1 "Bus Split1.out" as Connection70
                    
                    
                    connect Goto2 "Bus Split1.out1" as Connection71
                    
                    
                    connect Goto3 "Bus Split1.out2" as Connection72
                    
                    
                    connect Goto4 "Bus Split1.out3" as Connection73
                    
                    
                    connect Junction23 "Gain1.out" as Connection16
                    
                    
                    connect Junction24 "bool_R25" as Connection17
                    
                    
                    connect Junction25 "Logical operator3.in" as Connection113
                    
                    
                    connect Junction26 "Logical operator3.in1" as Connection116
                    
                    
                    connect Junction27 "Phase Comparator.Locked" as Connection119
                    
                    
                    connect Junction28 "SR Flip Flop1.s_in" as Connection124
                    
                    
                    connect Junction4 "Deadbus fcn.Vline" as Connection104
                    
                    
                    connect Junction4 "Gain2.out" as Connection21
                    
                    
                    connect Junction5 "Logical operator4.in1" as Connection22
                    
                    
                    connect "Logical operator3.in2" Junction27 as Connection118
                    
                    
                    connect "Logical operator3.out" Junction5 as Connection24
                    
                    
                    connect "Logical operator4.out" Junction24 as Connection25
                    
                    
                    connect "Logical operator5.out" "Logical operator7.in" as Connection26
                    
                    
                    connect "Logical operator5.in1" "Relational operator1.out" as Connection27
                    
                    
                    connect "Logical operator5.in" "trip_or" as Connection28
                    
                    
                    connect "Logical operator7.in1" Junction5 as Connection29
                    
                    
                    connect "Logical operator7.out" "SR Flip Flop1.r_in" as Connection30
                    
                    
                    connect "Phase Comparator.wt_grid" "bus_wt" as Connection110
                    
                    
                    connect "R25.in" Junction24 as Connection33
                    
                    
                    connect "RMS value1.out" "Gain1.in" as Connection93
                    
                    
                    connect "RMS value2.out" "Gain2.in" as Connection97
                    
                    
                    connect "Relational operator1.in1" "mode_in" as Connection36
                    
                    
                    connect "SR Flip Flop1.out" "Logical operator4.in" as Connection37
                    
                    
                    connect "SR Flip Flop1.out_n" "Termination1.in" as Connection38
                    
                    
                    connect Va "RMS value1.in" as Connection101
                    
                    
                    connect "Vline_a" "RMS value2.in" as Connection102
                    
                    
                    connect "Voltage Comparator.V_bus" Junction23 as Connection47
                    
                    
                    connect "Voltage Comparator.Locked" Junction25 as Connection112
                    
                    
                    connect "Voltage Comparator.V_line" Junction4 as Connection48
                    
                    
                    connect "bus_freq" "Gain3.in" as Connection121
                    
                    
                    connect "deadbus.in" Junction28 as Connection125
                    
                    
                    connect "freq_lock.in" Junction26 as Connection117
                    
                    
                    connect "line_wt" "Phase Comparator.wt_gen" as Connection111
                    
                    
                    connect "phase_lock.in" Junction27 as Connection120
                    
                    
                    connect "volt_lock.in" Junction25 as Connection114
                    
                    
            
                    
                }
                [
                    position = 8888, 7800
                    size = 120, 232
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                tag "Goto10" {
                    value = "line_freq"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7120, 8272
                ]
                
                tag "Goto26" {
                    value = "enable"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8296, 8152
                ]
                
                tag "From21" {
                    value = "Ib"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8232, 8264
                ]
                
                tag "Goto27" {
                    value = "initial_condition"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8496, 7976
                    scale = 1, -1
                ]
                
                tag "From12" {
                    value = "R51"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9032, 8288
                ]
                
                tag "From16" {
                    value = "line_freq"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8528, 7776
                ]
                
                tag "From7" {
                    value = "trip_cmd"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9072, 8224
                    rotation = down
                    scale = -1, -1
                ]
                
                tag "From8" {
                    value = "R59"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9104, 8304
                ]
                
                tag "From26" {
                    value = "Vc_rms"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8160, 8432
                ]
                
                tag "Goto8" {
                    value = "Vline_a"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 6744, 8216
                ]
                
                tag "Goto23" {
                    value = "op_mode"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8576, 8000
                    scale = 1, -1
                ]
                
                tag "Goto20" {
                    value = "Vb_rms"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7232, 7760
                    rotation = left
                ]
                
                tag "From34" {
                    value = "relay_paramR25"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8760, 7896
                ]
                
                tag "From24" {
                    value = "Ia_rms"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8232, 8312
                ]
                
                tag "Goto7" {
                    value = "Reset"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8496, 8024
                    scale = 1, -1
                ]
                
                tag "From18" {
                    value = "bus_wt"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8608, 7800
                ]
                
                tag "Goto24" {
                    value = "lag_lead"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7216, 8304
                ]
                
                tag "From27" {
                    value = "Vb_rms"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8232, 8408
                ]
                
                tag "Goto3" {
                    value = "R27"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8608, 8336
                ]
                
                tag "Goto29" {
                    value = "relay_paramR25"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8576, 7952
                    scale = 1, -1
                ]
                
                tag "From28" {
                    value = "Va_rms"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8160, 8384
                ]
                
                tag "From17" {
                    value = "bus_freq"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8608, 7752
                ]
                
                tag "From35" {
                    value = "relay_param"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8232, 8456
                ]
                
                tag "From3" {
                    value = "R51"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7392, 8384
                ]
                
                tag "Goto13" {
                    value = "line_wt"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7296, 8288
                ]
                
                tag "Goto21" {
                    value = "Va_rms"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7216, 7688
                    rotation = left
                ]
                
                tag "Goto1" {
                    value = "R50"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8608, 8160
                ]
                
                tag "From19" {
                    value = "line_wt"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8528, 7824
                ]
                
                tag "Goto6" {
                    value = "trip_cmd"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 9640, 8096
                ]
                
                tag "From32" {
                    value = "enable"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9200, 8104
                ]
                
                tag "From25" {
                    value = "Ic_rms"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8232, 8360
                ]
                
                tag "From9" {
                    value = "R25"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8992, 8240
                    rotation = down
                    scale = -1, 1
                ]
                
                tag "From36" {
                    value = "Reset"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8232, 8216
                ]
                
                tag "From37" {
                    value = "op_mode"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8760, 7848
                ]
                
                tag "From4" {
                    value = "R27"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7448, 8464
                ]
                
                tag "From23" {
                    value = "Ib_rms"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8160, 8336
                ]
                
                tag "From1" {
                    value = "R25"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7600, 8280
                    rotation = right
                ]
                
                tag "Goto18" {
                    value = "Ia_rms"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7088, 7688
                    rotation = left
                ]
                
                tag "From31" {
                    value = "lag_lead"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9096, 8424
                ]
                
                tag "Goto9" {
                    value = "Va"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 6744, 8000
                ]
                
                tag "Goto11" {
                    value = "bus_freq"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7376, 8256
                ]
                
                tag "From10" {
                    value = "R50"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8952, 8272
                ]
                
                tag "Goto17" {
                    value = "Ib_rms"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7104, 7760
                    rotation = left
                ]
                
                tag "Goto5" {
                    value = "R25"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 9088, 7752
                ]
                
                tag "Goto25" {
                    value = "exp_imp"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7120, 8320
                ]
                
                tag "From11" {
                    value = "R27"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8880, 8256
                ]
                
                tag "From6" {
                    value = "trip_cmd"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7584, 8560
                    rotation = right
                ]
                
                tag "From30" {
                    value = "exp_imp"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9024, 8408
                ]
                
                tag "Goto15" {
                    value = "Ib"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 6712, 7856
                ]
                
                tag "From5" {
                    value = "R59"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7520, 8504
                ]
                
                tag "From2" {
                    value = "R50"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7480, 8288
                ]
                
                tag "From33" {
                    value = "initial_condition"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9120, 8080
                ]
                
                tag "From22" {
                    value = "Ic"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8160, 8288
                ]
                
                tag "From13" {
                    value = "Reset"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8952, 8320
                ]
                
                tag "From15" {
                    value = "Vline_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8528, 7728
                ]
                
                tag "From20" {
                    value = "Ia"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8160, 8240
                ]
                
                tag "Goto28" {
                    value = "relay_param"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8496, 7928
                    scale = 1, -1
                ]
                
                tag "From14" {
                    value = "Va"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8608, 7704
                ]
                
                tag "Goto2" {
                    value = "R51"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8608, 8248
                ]
                
                tag "Goto14" {
                    value = "Ia"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 6712, 7784
                ]
                
                tag "Goto22" {
                    value = "Vc_rms"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7248, 7832
                    rotation = left
                ]
                
                tag "Goto19" {
                    value = "Ic_rms"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7120, 7832
                    rotation = left
                ]
                
                tag "Goto16" {
                    value = "Ic"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 6712, 7928
                ]
                
                tag "Goto12" {
                    value = "bus_wt"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7224, 8256
                ]
                
                tag "From29" {
                    value = "op_mode"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9200, 8032
                ]
                
                tag "Goto4" {
                    value = "R59"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8608, 8424
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "OUTPUT" {
                    label = "OUTPUT"
                    
                    position = bottom:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 9704, 8056
                    size = 25, 25
                ]
                port "Ia" {
                    label = "Ia"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 7816
                    size = 25, 25
                ]
                port "Ib" {
                    label = "Ib"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 7888
                    size = 25, 25
                ]
                port "Ic" {
                    label = "Ic"
                    
                    position = left:3
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 7960
                    size = 25, 25
                ]
                port "Va" {
                    label = "Va"
                    
                    position = left:4
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 8032
                    size = 25, 25
                ]
                port "Vb" {
                    label = "Vb"
                    
                    position = left:5
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 8104
                    size = 25, 25
                ]
                port "Vc" {
                    label = "Vc"
                    
                    position = left:6
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 8176
                    size = 25, 25
                ]
                port "Vline_a" {
                    label = "Vline_A"
                    
                    position = left:7
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 8248
                    size = 25, 25
                ]
                port "faults_status" {
                    label = "Fault_status"
                    
                    position = right:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 9304, 8272
                    size = 25, 25
                ]
                port "TO_MODBUS" {
                    label = "To_Modbus"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8024, 8080
                    size = 25, 25
                ]
                port "Vline_b" {
                    label = "Vline_B"
                    
                    position = left:8
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 8320
                    size = 25, 25
                ]
                port "Vline_c" {
                    label = "Vline_C"
                    
                    position = left:9
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 8392
                    size = 25, 25
                ]
                port "cb_state" {
                    label = "cb_state"
                    
                    position = left:10
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7312, 8624
                    size = 25, 25
                ]
                port "pf_states" {
                    label = "pf_state"
                    
                    position = right:3
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 9304, 8416
                    scale = 1, -1
                    size = 25, 25
                ]
                port "from_Modbus" {
                    label = "From Modbus"
                    
                    position = right:4
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8144, 7976
                    size = 25, 25
                ]
                
                comment Comment3 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">52B</p></body></html>                     ENDCOMMENT 
                [
                    position = 7432, 8720
                ]
                
                comment Comment2 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">52A</p></body></html>                     ENDCOMMENT 
                [
                    position = 7400, 8568
                ]
                
                comment Comment5 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">pf_states </p></body></html>                    ENDCOMMENT 
                [
                    position = 9336, 8400
                ]
                
                comment Comment4 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Status</p></body></html>                     ENDCOMMENT 
                [
                    position = 9336, 8256
                ]
                
                junction "Junction51" sp
                [
                    position = 8720, 8056
                    size = 0, 0
                ]
                
                junction "Junction100" sp
                [
                    position = 8536, 8192
                ]
                
                junction "Junction101" sp
                [
                    position = 8536, 8280
                ]
                
                junction "Junction104" sp
                [
                    position = 9016, 7800
                ]
                
                junction "Junction105" sp
                [
                    position = 9584, 8056
                ]
                
                junction "Junction106" sp
                [
                    position = 7368, 8624
                ]
                
                junction "Junction108" sp
                [
                    position = 6688, 8248
                ]
                
                junction "Junction109" sp
                [
                    position = 6696, 8032
                ]
                
                junction "Junction110" sp
                [
                    position = 7304, 8240
                ]
                
                junction "Junction111" sp
                [
                    position = 6640, 7816
                ]
                
                junction "Junction112" sp
                [
                    position = 6640, 7888
                ]
                
                junction "Junction113" sp
                [
                    position = 6640, 7960
                ]
                
                junction "Junction114" sp
                [
                    position = 7088, 7984
                ]
                
                junction "Junction115" sp
                [
                    position = 7104, 8000
                ]
                
                junction "Junction116" sp
                [
                    position = 7120, 8016
                ]
                
                junction "Junction117" sp
                [
                    position = 7216, 8032
                ]
                
                junction "Junction118" sp
                [
                    position = 7232, 8048
                ]
                
                junction "Junction119" sp
                [
                    position = 7248, 8064
                ]
                
                junction "Junction120" sp
                [
                    position = 8536, 8368
                ]
                
                junction "Junction121" sp
                [
                    position = 8536, 8456
                ]
                
                junction "Junction122" sp
                [
                    position = 8240, 8192
                ]
                
                connect "Bus Join1.in3" "CALC FROM MEASUREMENTS.Ib_phase" as Connection132
                
                
                connect "Bus Join1.in5" "CALC FROM MEASUREMENTS.Ic_phase" as Connection133
                
                
                connect "Bus Join1.in19" "CALC FROM MEASUREMENTS.Q" as Connection142
                
                
                connect "Bus Join1.in15" "CALC FROM MEASUREMENTS.Vb_phase" as Connection135
                
                
                connect "Bus Join1.in20" "CALC FROM MEASUREMENTS.S" as Connection144
                
                
                connect "Bus Join1.in18" "CALC FROM MEASUREMENTS.P" as Connection141
                
                
                connect "Bus Join1.in21" "CALC FROM MEASUREMENTS.pf" as Connection149
                
                
                connect "Bus Join1.in13" "CALC FROM MEASUREMENTS.Va_phase" as Connection134
                
                
                connect "Bus Join1.in17" "CALC FROM MEASUREMENTS.Vc_phase" as Connection140
                
                
                connect "Bus Join1.in22" Junction110 as Connection240
                
                
                connect "Bus Join1.in6" Junction114 as Connection268
                
                
                connect "Bus Join1.in9" Junction117 as Connection283
                
                
                connect "Bus Join1.in10" Junction118 as Connection286
                
                
                connect "CALC FROM MEASUREMENTS.Ia_mag" "Bus Join1.in" as Connection5
                
                
                connect "CALC FROM MEASUREMENTS.Vc_mag" "Bus Join1.in16" as Connection4
                
                
                connect "CALC FROM MEASUREMENTS.Vb_mag" "Bus Join1.in14" as Connection1
                
                
                connect "CALC FROM MEASUREMENTS.Ia_phase" "Bus Join1.in1" as Connection131
                
                
                connect "CALC FROM MEASUREMENTS.Ib_mag" "Bus Join1.in2" as Connection6
                
                
                connect "CALC FROM MEASUREMENTS.Ic_mag" "Bus Join1.in4" as Connection2
                
                
                connect "CALC FROM MEASUREMENTS.Va_mag" "Bus Join1.in12" as Connection3
                
                
                connect "CALC FROM MEASUREMENTS.line_freq" Goto10 as Connection224
                
                
                connect "CALC FROM MEASUREMENTS.line_wt" Goto13 as Connection245
                
                
                connect "CALC FROM MEASUREMENTS.Vline_a" Junction108 as Connection217
                
                
                connect "CALC FROM MEASUREMENTS.Va" Junction109 as Connection218
                
                
                connect "CALC FROM MEASUREMENTS.Ia" Junction111 as Connection257
                
                
                connect "CALC FROM MEASUREMENTS.Ib" Junction112 as Connection256
                
                
                connect "CALC FROM MEASUREMENTS.Ic" Junction113 as Connection258
                
                
                connect "CALC FROM MEASUREMENTS.Ib_rms" Junction115 as Connection271
                
                
                connect "CALC FROM MEASUREMENTS.Ic_rms" Junction116 as Connection274
                
                
                connect "CALC FROM MEASUREMENTS.Vc_rms" Junction119 as Connection289
                
                
                connect From1 "Sum1.in" as Connection167
                
                
                connect From10 "bitwise_faults.R50" as Connection197
                
                
                connect From11 "bitwise_faults.R27" as Connection195
                
                
                connect From12 "bitwise_faults.R51" as Connection199
                
                
                connect From13 "bitwise_faults.Reset" as Connection210
                
                
                connect From14 "Relay 25-Sync Check1.Va" as Connection219
                
                
                connect From15 "Relay 25-Sync Check1.Vline_a" as Connection220
                
                
                connect From16 "Relay 25-Sync Check1.line_freq" as Connection225
                
                
                connect From17 "Relay 25-Sync Check1.bus_freq" as Connection238
                
                
                connect From18 "Relay 25-Sync Check1.bus_wt" as Connection244
                
                
                connect From19 "Relay 25-Sync Check1.line_wt" as Connection246
                
                
                connect From2 "Gain1.in" as Connection168
                
                
                connect From20 "R50512761.Iinst_a" as Connection336
                
                
                connect From21 "R50512761.Iinst_b" as Connection337
                
                
                connect From22 "R50512761.Iinst_c" as Connection338
                
                
                connect From23 "R50512761.Irms_b" as Connection340
                
                
                connect From24 "R50512761.Irms_a" as Connection339
                
                
                connect From25 "R50512761.Irms_c" as Connection341
                
                
                connect From26 "R50512761.Vrms_c" as Connection344
                
                
                connect From27 "R50512761.Vrms_b" as Connection343
                
                
                connect From28 "R50512761.Vrms_a" as Connection342
                
                
                connect From29 "State Condition Mng.op_mode" as Connection309
                
                
                connect From3 "Gain4.in" as Connection169
                
                
                connect From30 "pf bitwise.exp_imp" as Connection313
                
                
                connect From31 "pf bitwise.lag_lead" as Connection312
                
                
                connect From32 "State Condition Mng.enable" as Connection318
                
                
                connect From33 "State Condition Mng.initial_condition" as Connection319
                
                
                connect From34 "Relay 25-Sync Check1.relay_paramR25" as Connection320
                
                
                connect From35 "R50512761.relay_param" as Connection321
                
                
                connect From36 "R50512761.Reset" as Connection335
                
                
                connect From37 "Relay 25-Sync Check1.mode_in" as Connection334
                
                
                connect From4 "Gain5.in" as Connection171
                
                
                connect From5 "Gain6.in" as Connection173
                
                
                connect From7 "bitwise_faults.Status" as Connection203
                
                
                connect From8 "bitwise_faults.R59" as Connection201
                
                
                connect From9 "bitwise_faults.R25" as Connection193
                
                
                connect "Gain1.out" "Sum1.in1" as Connection21
                
                
                connect "Gain4.out" "Sum1.in2" as Connection170
                
                
                connect "Gain5.out" "Sum1.in3" as Connection172
                
                
                connect "Gain6.out" "Sum1.in4" as Connection174
                
                
                connect "Gain7.out" "Sum3.in1" as Connection180
                
                
                connect "Gain8.in" Junction106 as Connection186
                
                
                connect "Gain8.out" "Sum3.in2" as Connection183
                
                
                connect Goto1 Junction100 as Connection152
                
                
                connect Goto11 Junction110 as Connection242
                
                
                connect Goto12 "CALC FROM MEASUREMENTS.bus_wt" as Connection243
                
                
                connect Goto14 Junction111 as Connection249
                
                
                connect Goto15 Junction112 as Connection252
                
                
                connect Goto16 Junction113 as Connection255
                
                
                connect Goto17 Junction115 as Connection273
                
                
                connect Goto19 Junction116 as Connection276
                
                
                connect Goto2 Junction101 as Connection155
                
                
                connect Goto22 Junction119 as Connection367
                
                
                connect Goto23 "Relay_Param.op_mode" as Connection329
                
                
                connect Goto24 "CALC FROM MEASUREMENTS.Lag Lead" as Connection310
                
                
                connect Goto25 "CALC FROM MEASUREMENTS.Export Import" as Connection311
                
                
                connect Goto26 Junction122 as Connection351
                
                
                connect Goto27 "Relay_Param.Initial_condition" as Connection331
                
                
                connect Goto28 "Relay_Param.relay_param" as Connection333
                
                
                connect Goto29 "Relay_Param.relay_paramR25" as Connection332
                
                
                connect Goto4 Junction121 as Connection298
                
                
                connect Goto5 Junction104 as Connection164
                
                
                connect Goto6 Junction105 as Connection178
                
                
                connect Goto7 "Relay_Param.reset" as Connection330
                
                
                connect Goto8 Junction108 as Connection213
                
                
                connect Goto9 Junction109 as Connection216
                
                
                connect Ia Junction111 as Connection247
                
                
                connect Ib Junction112 as Connection250
                
                
                connect Ic Junction113 as Connection253
                
                
                connect Junction100 "Logical operator1.in" as Connection196
                
                
                connect Junction101 "Logical operator1.in1" as Connection198
                
                
                connect Junction101 "R50512761.trip_51" as Connection154
                
                
                connect Junction104 "State Condition Mng.R25" as Connection303
                
                
                connect Junction105 "Unit Delay4.out" as Connection202
                
                
                connect Junction106 "not.in" as Connection185
                
                
                connect Junction110 "CALC FROM MEASUREMENTS.bus_freq" as Connection241
                
                
                connect Junction114 "CALC FROM MEASUREMENTS.Ia_rms" as Connection269
                
                
                connect Junction114 Goto18 as Connection355
                
                
                connect Junction115 "Bus Join1.in7" as Connection272
                
                
                connect Junction116 "Bus Join1.in8" as Connection275
                
                
                connect Junction117 "CALC FROM MEASUREMENTS.Va_rms" as Connection284
                
                
                connect Junction117 Goto21 as Connection365
                
                
                connect Junction118 "CALC FROM MEASUREMENTS.Vb_rms" as Connection287
                
                
                connect Junction118 Goto20 as Connection366
                
                
                connect Junction119 "Bus Join1.in11" as Connection290
                
                
                connect Junction120 Goto3 as Connection296
                
                
                connect Junction121 "R50512761.trip_59" as Connection299
                
                
                connect Junction122 "R50512761.Enable" as Connection350
                
                
                connect Junction51 "State Condition Mng.Trip_in" as Connection302
                
                
                connect "Logical operator1.in2" Junction120 as Connection297
                
                
                connect "Logical operator1.in3" Junction121 as Connection300
                
                
                connect "Logical operator1.out" Junction51 as Connection79
                
                
                connect OUTPUT Junction105 as Connection176
                
                
                connect "R50512761.trip_50" Junction100 as Connection150
                
                
                connect "R50512761.trip_27" Junction120 as Connection295
                
                
                connect "Relay 25-Sync Check1.bool_R25" Junction104 as Connection162
                
                
                connect "Relay 25-Sync Check1.trip_or" Junction51 as Connection94
                
                
                connect "Sum3.in" From6 as Connection179
                
                
                connect "Sum3.out" "Unit Delay5.in" as Connection190
                
                
                connect "TO_MODBUS" "Bus Join1.out" as Connection101
                
                
                connect "Unit Delay2.out" "Bus Join1.in23" as Connection175
                
                
                connect "Unit Delay2.in" "Sum1.out" as Connection104
                
                
                connect "Unit Delay4.in" "State Condition Mng.trip_out" as Connection304
                
                
                connect "Unit Delay5.out" "Bus Join1.in24" as Connection191
                
                
                connect Va Junction109 as Connection214
                
                
                connect Vb "CALC FROM MEASUREMENTS.Vb" as Connection108
                
                
                connect Vc "CALC FROM MEASUREMENTS.Vc" as Connection109
                
                
                connect "Vline_a" Junction108 as Connection211
                
                
                connect "Vline_b" "CALC FROM MEASUREMENTS.Vline_b" as Connection111
                
                
                connect "Vline_c" "CALC FROM MEASUREMENTS.Vline_c" as Connection112
                
                
                connect "cb_state" Junction106 as Connection184
                
                
                connect "enable.out" Junction122 as Connection349
                
                
                connect "faults_status" "bitwise_faults.fault_status" as Connection368
                
                
                connect "from_Modbus" "Relay_Param.from_Modbus" as Connection328
                
                
                connect "not.out" "Gain7.in" as Connection181
                
                
                connect "pf bitwise.pf_states" "pf_states" as Connection369
                
                
        
                
                /*
                    Masks
                */
                mask {
                    description = "This block implements the relay SEL 787 with protective functions 25 (synchronism check), 27 (Under Voltage), 50 (Instantaneous Overcurrent), 51 (Time Overcurrent) and 59 (Overvoltage). 
                                                                                                                                                
                                                                                                                                                The relay outputs to Modbus are: 0 - Ia_mag; 1 - Ia_phase; 2 - Ib_mag; 3 - Ib_phase; 4 - Ic_mag; 5 - Ic_phase; 6 - Ia_rms; 7 - Ib_rms; 8 - Ic_rms; 9 - Va_rms; 10 - Vb_rms; 11 - Vc_rms; 12 - Va_mag; 13 - Va_phase; 14 - Vb_mag; 15 - Vb_phase; 16 - Vc_mag; 17 - Vc_phase; 18 - P; 19 - Q; 20 - S; 21 - pf; 22 - Bus_freq; 23 - protection functions status; 24 - Circuit Breaker status.
                                                                                                                                                
                                                                                                                                                The relay inputs from Modbus are: 2001 - op_mode; 2002 - Reset; 2003 - protection_mode.
                                                                                                                                                
                                                                                                                                                The trip pickups for functions 50 and 51 are defined as currents in the secondary of the current transformer. The secondary ot the CT has 5 turns."
                    
                    VRMSLL {
                        label = "Line to Line RMS voltage"
                        widget = edit
                        type = generic
                        default_value = "13800.0"
                        unit = "V"
                        group = "Base Parameters"
            	    
            	    
                    }
                    
                    dV_threshold {
                        label = "Voltage deviation threshold"
                        widget = edit
                        type = generic
                        default_value = "5.0"
                        unit = "%"
                        group = "Base Parameters"
            	    
            	    
                    }
                    
                    angle_threshold {
                        label = "Angle deviation threshold"
                        widget = edit
                        type = generic
                        default_value = "12.0"
                        unit = "degree"
                        group = "Base Parameters"
            	    
            	    
                    }
                    
                    dF_threshold {
                        label = "Frequency deviation threshold"
                        widget = edit
                        type = generic
                        default_value = "0.5"
                        unit = "Hz"
                        group = "Base Parameters"
            	    
            	    
                    }
                    
                    R27P_R59P_tripDelay {
                        label = "R27 UV and R59 OV trip delay"
                        widget = edit
                        type = generic
                        default_value = "0.5"
                        unit = "Sec"
                        group = "Base Parameters"
            	    
            	    
                    }
                    
                    CT_primary {
                        label = "CT primary turns number"
                        widget = edit
                        type = generic
                        default_value = "600"
                        group = "Base Parameters"
            	    
            	    
                    }
                    
                    Initial_status {
                        label = "Initial relay status"
                        widget = edit
                        type = generic
                        default_value = "1.0"
                        group = "Base Parameters"
            	    
            	    
                    }
                    
                    R50P_pickup1 {
                        label = "R50 IOC trip pickup 1"
                        widget = edit
                        type = generic
                        default_value = "20.0"
                        unit = "Amp sec"
                        group = "GridTied Parameters"
            	    
            	    
                    }
                    
                    R50P_tripDelay1 {
                        label = "R50 IOC trip delay 1"
                        widget = edit
                        type = generic
                        default_value = "0"
                        unit = "sec"
                        group = "GridTied Parameters"
            	    
            	    
                    }
                    
                    R51P_pickup1 {
                        label = "R51 TOC trip pickup 1"
                        widget = edit
                        type = generic
                        default_value = "0.8"
                        unit = "Amp sec"
                        group = "GridTied Parameters"
            	    
            	    
                    }
                    
                    R51P_curveType1 {
                        label = "R51 TOC curve type 1"
                        widget = edit
                        type = generic
                        default_value = "1.0"
                        group = "GridTied Parameters"
            	    
            	    
                    }
                    
                    R51P_timeDial1 {
                        label = "R51 TOC time dial 1"
                        widget = edit
                        type = generic
                        default_value = "1.0"
                        group = "GridTied Parameters"
            	    
            	    
                    }
                    
                    R27P_pickup1 {
                        label = "R27 UV trip pickup 1"
                        widget = edit
                        type = generic
                        default_value = "0.9"
                        unit = "pu"
                        group = "GridTied Parameters"
            	    
            	    
                    }
                    
                    R59P_pickup1 {
                        label = "R59 OV trip pickup 1"
                        widget = edit
                        type = generic
                        default_value = "1.1"
                        unit = "pu"
                        group = "GridTied Parameters"
            	    
            	    
                    }
                    
                    R50P_pickup2 {
                        label = "R50 IOC trip pickup 2"
                        widget = edit
                        type = generic
                        default_value = "20.0"
                        unit = "Amp sec"
                        group = "Islanded Parameters"
            	    
            	    
                    }
                    
                    R50P_tripDelay2 {
                        label = "R50 IOC trip delay 2"
                        widget = edit
                        type = generic
                        default_value = "1.0"
                        unit = "sec"
                        group = "Islanded Parameters"
            	    
            	    
                    }
                    
                    R51P_pickup2 {
                        label = "R51 TOC trip pickup 2"
                        widget = edit
                        type = generic
                        default_value = "0.7"
                        unit = "Amp sec"
                        group = "Islanded Parameters"
            	    
            	    
                    }
                    
                    R51P_curveType2 {
                        label = "R51 TOC curve type 2"
                        widget = edit
                        type = generic
                        default_value = "2.0"
                        group = "Islanded Parameters"
            	    
            	    
                    }
                    
                    R51P_timeDial2 {
                        label = "R51 TOC time dial 2"
                        widget = edit
                        type = generic
                        default_value = "3.0"
                        group = "Islanded Parameters"
            	    
            	    
                    }
                    
                    R27P_pickup2 {
                        label = "R27 UV trip pickup 2"
                        widget = edit
                        type = generic
                        default_value = "0.9"
                        unit = "pu"
                        group = "Islanded Parameters"
            	    
            	    
                    }
                    
                    R59P_pickup2 {
                        label = "R59 OV trip pickup 2"
                        widget = edit
                        type = generic
                        default_value = "1.1"
                        unit = "pu"
                        group = "Islanded Parameters"
            	    
            	    
                    }
                    
            	
                CODE component_open
                    from typhoon.apps.schematic_editor.dialogs.component_property_dialogs.general import RegularComponentPropertiesDialog
                
                    dialog = RegularComponentPropertiesDialog(
                        component=component,
                        property_container=component.masks[-1],
                        current_diagram=current_diagram
                    )
                    dialog.exec_()
                    
                ENDCODE
                }
            }
            [
                position = 7952, 8168
                size = 152, 240
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "Brk_cmd" {
                label = "Brk_cmd"
                
                position = bottom:1
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 7792, 8496
                rotation = right
                size = 25, 25
            ]
            port "IABC" {
                label = "IABC"
                
                position = left:3
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7792, 7936
            ]
            port "VABC_grid" {
                label = "VABC_grid"
                
                position = left:3
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7664, 7936
            ]
            port "VABC_load" {
                label = "VABC_load"
                
                position = right:1
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7536, 7936
            ]
            
            comment Comment1 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Reset:</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Reset the relay when input is 1</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Operation Mode:</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Op_mode == 1 force the breaker closed</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Op_mode == 0 turns on logic based operation</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Protection Mode:</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">protect_mode == 1 use islanded parameters</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">protect_mode == 0 use grid tied parameters</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>              ENDCOMMENT 
            [
                position = 7968, 8328
            ]
            
            junction "Junction1391" sp
            [
                position = 8120, 7928
            ]
            
            junction "Junction1392" sp
            [
                position = 8120, 7976
            ]
            
            junction "Junction1393" sp
            [
                position = 7952, 8344
            ]
            
            junction "Junction1396" sp
            [
                position = 7792, 8448
            ]
            
            junction "Junction1397" sp
            [
                position = 7648, 8344
            ]
            
            connect "Brk_cmd" Junction1396 as Connection899
            
            
            connect "Bus Split1.in" IABC as Connection907
            
            
            connect "Bus Split1.out" "SEL_787.Ia" as Connection908
            
            
            connect "Bus Split1.out1" "SEL_787.Ib" as Connection909
            
            
            connect "Bus Split1.out2" "SEL_787.Ic" as Connection910
            
            
            connect "Bus Split2.out1" "SEL_787.Vb" as Connection913
            
            
            connect "Bus Split2.out2" "SEL_787.Vc" as Connection914
            
            
            connect "Bus Split2.out" "SEL_787.Va" as Connection912
            
            
            connect "Bus Split3.out1" "SEL_787.Vline_b" as Connection929
            
            
            connect "Bus Split3.out2" "SEL_787.Vline_c" as Connection930
            
            
            connect "Bus Split3.out" "SEL_787.Vline_a" as Connection928
            
            
            connect "CB_state.in" Junction1397 as Connection905
            
            
            connect "Constant2.out" "Signal switch1.in1" as Connection880
            
            
            connect "Delay1.out" "Signal switch1.in" as Connection2
            
            
            connect Junction1391 "Constant1.out" as Connection852
            
            
            connect Junction1391 "ModBus Device1.coil_in" as Connection313
            
            
            connect Junction1392 Junction1391 as Connection314
            
            
            connect Junction1393 "Delay1.in" as Connection867
            
            
            connect Junction1396 "Signal switch1.out" as Connection902
            
            
            connect Junction1397 Junction1396 as Connection904
            
            
            connect "ModBus Device1.holding_in" Junction1392 as Connection466
            
            
            connect "ModBus Device1.discrete_in" Junction1392 as Connection467
            
            
            connect "ModBus Device1.holding_out" "SEL_787.from_Modbus" as Connection932
            
            
            connect "ModBus Device1.coil_out" "Term3.in" as Connection854
            
            
            connect "SEL_787.OUTPUT" Junction1393 as Connection868
            
            
            connect "SEL_787.cb_state" Junction1397 as Connection903
            
            
            connect "SEL_787.TO_MODBUS" "ModBus Device1.reg_in" as Connection931
            
            
            connect "SEL_787.pf_states" "Term4.in" as Connection897
            
            
            connect "Signal switch1.in2" Junction1393 as Connection866
            
            
            connect "Term5.in" "SEL_787.faults_status" as Connection870
            
            
            connect "VABC_grid" "Bus Split2.in" as Connection924
            
            
            connect "VABC_load" "Bus Split3.in" as Connection925
            
            
    
            
        }
        [
            position = 7016, 8280
            size = 136, 72
        ]
        
        component Subsystem "MID_Rly2" {
            layout = dynamic
    
            
            component gen_terminator "Term5" {
                
    	    
            }
            [
                position = 8152, 8136
                rotation = down
                scale = -1, 1
            ]
            
            component gen_bus_split "Bus Split3" {
                
                outputs = "3"
    	    
            }
            [
                position = 7576, 8000
                rotation = right
            ]
            
            component gen_delay "Delay1" {
                
                del_length = "int(3.0/60.0/Ts)"
                init_value = "[1]"
    	    
            }
            [
                position = 7880, 8344
                rotation = down
            ]
            
            component gen_probe "CB_state" {
                
    	    
            }
            [
                position = 7592, 8344
                rotation = down
            ]
            
            component gen_terminator "Term3" {
                
    	    
            }
            [
                position = 8440, 7928
            ]
            
            component gen_terminator "Term4" {
                
    	    
            }
            [
                position = 8152, 8200
                rotation = down
                scale = -1, 1
            ]
            
            component gen_bus_split "Bus Split1" {
                
                outputs = "3"
    	    
            }
            [
                position = 7832, 8000
                rotation = right
            ]
            
            component sys_signal_switch "Signal switch1" {
                
                threshold = "0.5"
    	    
            }
            [
                position = 7792, 8400
                rotation = right
            ]
            
            component src_constant "Constant1" {
                
                execution_rate = "Ts"
                value = "[0]"
    	    
            }
            [
                position = 8056, 7928
            ]
            
            component gen_bus_split "Bus Split2" {
                
                outputs = "3"
    	    
            }
            [
                position = 7704, 8000
                rotation = right
            ]
            
            component src_constant "Constant2" {
                
                execution_rate = "Ts"
                value = "[0]"
    	    
            }
            [
                position = 7776, 8344
                rotation = right
            ]
            component "core/ModBus Device" "ModBus Device1"{
                
                configuration = "config3"
                execution_rate = "Ts"
            }
            [
                position = 8272, 8000
                size = 184, 184
            ]
            
            
            component Subsystem "SEL_787" {
                layout = dynamic
        
                
                component gen_sum "Sum3" {
                    
                    signs = "3"
        	    
                }
                [
                    position = 7640, 8624
                ]
                
                component gen_logic_op "Logical operator1" {
                    
                    inputs = "4"
                    operator = "OR"
        	    
                }
                [
                    position = 8720, 8128
                    rotation = left
                ]
                
                component tm_delay "Unit Delay2" {
                    
                    signal_out_type = "real"
        	    
                }
                [
                    position = 7728, 8304
                    rotation = left
                ]
                
                component gen_gain "Gain4" {
                    
                    gain = "4"
        	    
                }
                [
                    position = 7480, 8384
                ]
                
                component src_cp_input "enable" {
                    
                    execution_rate = "Ts"
                    group = "Relay"
                    max = "1"
                    min = "0"
                    unit = ""
                    widget_label = "enable"
        	    
                }
                [
                    position = 8160, 8192
                ]
                
                component gen_gain "Gain5" {
                    
                    gain = "8"
        	    
                }
                [
                    position = 7512, 8432
                    rotation = left
                ]
                
                component gen_sum "Sum1" {
                    
                    signs = "5"
        	    
                }
                [
                    position = 7648, 8384
                ]
                
                component gen_c_function "bitwise_faults" {
                    
                    in_terminal_properties = "inherit Status;inherit R25;inherit R27;inherit R50;inherit R51;inherit R59;inherit Reset;"
                    no_feed_inputs = "[]"
                    no_feed_outputs = "[]"
                    out_terminal_properties = "uint fault_status;"
                    output_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        fault_status= (uint)Status<<1 | (uint)R25<<2 | (uint)R27<<3 | (uint)R50<<4 | (uint)R51<<5 | (uint)R59<<6 | (uint)Reset<<7;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        /*End code section*/"
        	    
                }
                [
                    position = 9200, 8272
                ]
                
                component gen_gain "Gain7" {
                    
                    gain = "2"
        	    
                }
                [
                    position = 7512, 8624
                ]
                
                component gen_gain "Gain8" {
                    
                    gain = "4"
        	    
                }
                [
                    position = 7480, 8688
                ]
                
                component tm_delay "Unit Delay5" {
                    
                    signal_out_type = "real"
        	    
                }
                [
                    position = 7840, 8392
                    rotation = left
                ]
                
                component gen_logic_op "not" {
                    
                    operator = "NOT"
        	    
                }
                [
                    position = 7440, 8624
                ]
                
                component gen_bus_join "Bus Join1" {
                    
                    inputs = "25"
        	    
                }
                [
                    position = 7928, 8080
                ]
                
                component gen_c_function "pf bitwise" {
                    
                    in_terminal_properties = "inherit exp_imp;inherit lag_lead;"
                    no_feed_inputs = "[u'']"
                    no_feed_outputs = "[u'']"
                    out_terminal_properties = "uint pf_states;"
                    output_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                                                                                                pf_states=(uint)exp_imp<<1 | (uint)lag_lead<<2;
                                                                                                                                                                                                                                                                                                                                /*End code section*/"
        	    
                }
                [
                    position = 9200, 8416
                ]
                
                component gen_gain "Gain1" {
                    
                    gain = "2"
        	    
                }
                [
                    position = 7536, 8328
                    rotation = right
                ]
                
                component tm_delay "Unit Delay4" {
                    
        	    
                }
                [
                    position = 9496, 8056
                ]
                
                component gen_gain "Gain6" {
                    
                    gain = "16"
        	    
                }
                [
                    position = 7584, 8456
                    rotation = left
                ]
                
                component Subsystem "CALC FROM MEASUREMENTS" {
                    layout = dynamic
            
                    
                    component gen_rms_value "RMS value5" {
                        
            	    
                    }
                    [
                        position = 7064, 8192
                    ]
                    
                    component gen_gain "Gain11" {
                        
                        gain = "10.0"
            	    
                    }
                    [
                        position = 7432, 8400
                    ]
                    
                    component gen_gain "Gain10" {
                        
                        gain = "100.0"
            	    
                    }
                    [
                        position = 7064, 9168
                    ]
                    
                    component gen_rms_value "RMS value6" {
                        
            	    
                    }
                    [
                        position = 7064, 8256
                    ]
                    
                    component gen_terminator "Termination8" {
                        
            	    
                    }
                    [
                        position = 7336, 8312
                    ]
                    
                    component gen_gain "Gain9" {
                        
                        gain = "1.0/1000.0"
            	    
                    }
                    [
                        position = 7032, 9120
                    ]
                    
                    component msr_phasor_3ph "Three Phase Phasor2" {
                        
            	    
                    }
                    [
                        position = 6968, 8560
                    ]
                    
                    component gen_pll_three_phs "Three phase PLL2" {
                        
            	    
                    }
                    [
                        position = 6760, 9408
                    ]
                    
                    component gen_terminator "Termination3" {
                        
            	    
                    }
                    [
                        position = 7048, 9016
                    ]
                    
                    component gen_gain "Gain1" {
                        
                        gain = "10"
            	    
                    }
                    [
                        position = 7000, 7592
                    ]
                    
                    component gen_rms_value "RMS value4" {
                        
            	    
                    }
                    [
                        position = 7064, 8128
                    ]
                    
                    component gen_terminator "Termination2" {
                        
            	    
                    }
                    [
                        position = 7400, 8864
                    ]
                    
                    component gen_terminator "Termination9" {
                        
            	    
                    }
                    [
                        position = 7336, 8368
                    ]
                    
                    component gen_gain "Gain2" {
                        
                        gain = "10"
            	    
                    }
                    [
                        position = 7048, 7696
                    ]
                    
                    component gen_gain "Gain6" {
                        
                        gain = "10"
            	    
                    }
                    [
                        position = 7064, 8704
                    ]
                    
                    component gen_gain "Gain7" {
                        
                        gain = "1.0/1000.0"
            	    
                    }
                    [
                        position = 7096, 8824
                    ]
                    
                    component gen_terminator "Termination1" {
                        
            	    
                    }
                    [
                        position = 7360, 8792
                    ]
                    
                    component gen_terminator "Termination10" {
                        
            	    
                    }
                    [
                        position = 6856, 9472
                    ]
                    
                    component gen_gain "Gain4" {
                        
                        gain = "10"
            	    
                    }
                    [
                        position = 7064, 8504
                    ]
                    
                    component gen_gain "Gain8" {
                        
                        gain = "1.0/1000.0"
            	    
                    }
                    [
                        position = 7096, 8976
                    ]
                    
                    component gen_rms_value "RMS value2" {
                        
            	    
                    }
                    [
                        position = 7064, 7984
                    ]
                    
                    component gen_gain "Gain3" {
                        
                        gain = "10"
            	    
                    }
                    [
                        position = 7064, 7792
                    ]
                    
                    component gen_terminator "Termination13" {
                        
            	    
                    }
                    [
                        position = 6864, 9368
                    ]
                    
                    component gen_terminator "Termination4" {
                        
            	    
                    }
                    [
                        position = 7088, 9072
                    ]
                    
                    component gen_pll_three_phs "Three phase PLL1" {
                        
            	    
                    }
                    [
                        position = 7224, 8392
                    ]
                    
                    component gen_rms_value "RMS value3" {
                        
            	    
                    }
                    [
                        position = 7064, 8048
                    ]
                    
                    component gen_gain "Gain5" {
                        
                        gain = "10"
            	    
                    }
                    [
                        position = 7064, 8600
                    ]
                    
                    component gen_PQ_transform "PQ Power Meter1" {
                        
            	    
                    }
                    [
                        position = 6936, 8952
                    ]
                    
                    component gen_rms_value "RMS value1" {
                        
            	    
                    }
                    [
                        position = 7064, 7920
                    ]
                    
                    component gen_terminator "Termination5" {
                        
            	    
                    }
                    [
                        position = 7304, 8488
                    ]
                    
                    component gen_terminator "Termination12" {
                        
            	    
                    }
                    [
                        position = 6864, 9312
                    ]
                    
                    component gen_terminator "Termination7" {
                        
            	    
                    }
                    [
                        position = 7336, 8256
                    ]
                    
                    component msr_phasor_3ph "Three Phase Phasor1" {
                        
            	    
                    }
                    [
                        position = 6904, 7752
                    ]
                    
                    component gen_terminator "Termination11" {
                        
            	    
                    }
                    [
                        position = 6864, 9256
                    ]
                    
                    component Subsystem "Subsystem1" {
                        layout = dynamic
                
                        
                        component gen_abs "Abs1" {
                            
                	    
                        }
                        [
                            position = 7720, 7792
                        ]
                        
                        component gen_rel_op "Relational operator1" {
                            
                            relational_op = ">"
                	    
                        }
                        [
                            position = 7840, 7800
                        ]
                        
                        component gen_product "Product1" {
                            
                            signs = "*/"
                	    
                        }
                        [
                            position = 7880, 8112
                        ]
                        
                        component gen_abs "Abs3" {
                            
                	    
                        }
                        [
                            position = 7720, 8104
                        ]
                        
                        component gen_rel_op "Relational operator3" {
                            
                            relational_op = ">"
                	    
                        }
                        [
                            position = 7872, 8200
                        ]
                        
                        component src_constant "Constant1" {
                            
                            execution_rate = "Ts"
                	    
                        }
                        [
                            position = 7768, 7856
                        ]
                        
                        component gen_logic_op "Logical operator1" {
                            
                	    
                        }
                        [
                            position = 7976, 7856
                        ]
                        
                        component gen_c_function "Calculate S" {
                            
                            in_terminal_properties = "inherit P;inherit Q;"
                            no_feed_inputs = "[]"
                            no_feed_outputs = "[]"
                            out_terminal_properties = "real S;"
                            output_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        S=sqrt(P*P+Q*Q) ;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        /*End code section*/"
                	    
                        }
                        [
                            position = 7728, 7984
                        ]
                        
                        component gen_rel_op "Relational operator4" {
                            
                            relational_op = ">"
                	    
                        }
                        [
                            position = 7872, 8296
                        ]
                        
                        component gen_abs "Abs2" {
                            
                	    
                        }
                        [
                            position = 7720, 7896
                        ]
                        
                        component gen_rel_op "Relational operator2" {
                            
                            relational_op = ">"
                	    
                        }
                        [
                            position = 7840, 7904
                        ]
                        
                        component src_constant "Constant2" {
                            
                            execution_rate = "Ts"
                            value = "[0]"
                	    
                        }
                        [
                            position = 7760, 8344
                        ]
                        
                        component Subsystem "Subsystem1" {
                            layout = dynamic
                    
                            
                            component sys_mp_signal_switch "Multiport signal switch1" {
                                
                                number_of_input_terminals = "2"
                    	    
                            }
                            [
                                position = 7752, 8056
                            ]
                            
                            component tm_delay "Unit Delay1" {
                                
                                execution_rate = "Ts"
                                init_value = "[1]"
                                signal_out_type = "real"
                    	    
                            }
                            [
                                position = 7976, 8056
                            ]
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            port "u" {
                                label = "In1"
                                
                                position = left:1
                                kind = sp
                                direction = out
                                sp_type {
                                    default = auto
                                    readonly = True
                                }
                            }
                            [
                                position = 7576, 8032
                                size = 25, 25
                            ]
                            port "E" {
                                label = "In2"
                                
                                position = left:2
                                kind = sp
                                direction = out
                                sp_type {
                                    default = auto
                                    readonly = True
                                }
                            }
                            [
                                position = 7648, 8056
                                size = 25, 25
                            ]
                            port "Out1" {
                                label = "Out1"
                                
                                position = auto:auto
                                kind = sp
                                direction = in
                                sp_type {
                                    default = inherit
                                    readonly = True
                                }
                            }
                            [
                                position = 8128, 8056
                                size = 25, 25
                            ]
                            
                            junction "Junction1" sp
                            [
                                position = 8072, 8056
                                size = 0, 0
                            ]
                            
                            connect E "Multiport signal switch1.in" as Connection1
                            
                            
                            connect Junction1 "Unit Delay1.out" as Connection2
                            
                            
                            connect "Multiport signal switch1.in1" Junction1 as Connection3
                            
                            
                            connect Out1 Junction1 as Connection4
                            
                            
                            connect "Unit Delay1.in" "Multiport signal switch1.out" as Connection5
                            
                            
                            connect u "Multiport signal switch1.ctrl" as Connection6
                            
                            
                    
                            
                        }
                        [
                            position = 8168, 8120
                            size = 112, 56
                        ]
                        
                        component Subsystem "Subsystem3" {
                            layout = dynamic
                    
                            
                            component tm_delay "Unit Delay1" {
                                
                                execution_rate = "Ts"
                                init_value = "[1]"
                                signal_out_type = "real"
                    	    
                            }
                            [
                                position = 7976, 8056
                            ]
                            
                            component sys_mp_signal_switch "Multiport signal switch1" {
                                
                                number_of_input_terminals = "2"
                    	    
                            }
                            [
                                position = 7752, 8056
                            ]
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            port "u" {
                                label = "In1"
                                
                                position = left:1
                                kind = sp
                                direction = out
                                sp_type {
                                    default = auto
                                    readonly = True
                                }
                            }
                            [
                                position = 7656, 8008
                                size = 25, 25
                            ]
                            port "Out1" {
                                label = "Out1"
                                
                                position = auto:auto
                                kind = sp
                                direction = in
                                sp_type {
                                    default = inherit
                                    readonly = True
                                }
                            }
                            [
                                position = 8128, 8056
                                size = 25, 25
                            ]
                            port "E" {
                                label = "In2"
                                
                                position = left:2
                                kind = sp
                                direction = out
                                sp_type {
                                    default = auto
                                    readonly = True
                                }
                            }
                            [
                                position = 7656, 8056
                                size = 25, 25
                            ]
                            
                            junction "Junction1" sp
                            [
                                position = 8032, 8056
                                size = 0, 0
                            ]
                            
                            connect E "Multiport signal switch1.in" as Connection1
                            
                            
                            connect Junction1 Out1 as Connection2
                            
                            
                            connect "Multiport signal switch1.in1" Junction1 as Connection3
                            
                            
                            connect "Multiport signal switch1.ctrl" u as Connection4
                            
                            
                            connect "Unit Delay1.out" Junction1 as Connection5
                            
                            
                            connect "Unit Delay1.in" "Multiport signal switch1.out" as Connection6
                            
                            
                    
                            
                        }
                        [
                            position = 8168, 8304
                            size = 112, 56
                        ]
                        
                        component Subsystem "Subsystem2" {
                            layout = dynamic
                    
                            
                            component tm_delay "Unit Delay1" {
                                
                                execution_rate = "Ts"
                                init_value = "[1]"
                                signal_out_type = "real"
                    	    
                            }
                            [
                                position = 7976, 8056
                            ]
                            
                            component sys_mp_signal_switch "Multiport signal switch1" {
                                
                                number_of_input_terminals = "2"
                    	    
                            }
                            [
                                position = 7752, 8056
                            ]
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            port "u" {
                                label = "In1"
                                
                                position = left:1
                                kind = sp
                                direction = out
                                sp_type {
                                    default = auto
                                    readonly = True
                                }
                            }
                            [
                                position = 7576, 8032
                                size = 25, 25
                            ]
                            port "E" {
                                label = "In2"
                                
                                position = left:2
                                kind = sp
                                direction = out
                                sp_type {
                                    default = auto
                                    readonly = True
                                }
                            }
                            [
                                position = 7648, 8056
                                size = 25, 25
                            ]
                            port "Out1" {
                                label = "Out1"
                                
                                position = auto:auto
                                kind = sp
                                direction = in
                                sp_type {
                                    default = inherit
                                    readonly = True
                                }
                            }
                            [
                                position = 8128, 8056
                                size = 25, 25
                            ]
                            
                            junction "Junction1" sp
                            [
                                position = 8072, 8056
                                size = 0, 0
                            ]
                            
                            connect E "Multiport signal switch1.in" as Connection1
                            
                            
                            connect Junction1 "Unit Delay1.out" as Connection2
                            
                            
                            connect "Multiport signal switch1.in1" Junction1 as Connection3
                            
                            
                            connect Out1 Junction1 as Connection4
                            
                            
                            connect "Unit Delay1.in" "Multiport signal switch1.out" as Connection5
                            
                            
                            connect u "Multiport signal switch1.ctrl" as Connection6
                            
                            
                    
                            
                        }
                        [
                            position = 8168, 8208
                            size = 112, 56
                        ]
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        port "P" {
                            label = "P"
                            
                            position = left:1
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7544, 8104
                            size = 25, 25
                        ]
                        port "Q" {
                            label = "Q"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7544, 7992
                            size = 25, 25
                        ]
                        port "S" {
                            label = "S"
                            
                            position = right:1
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8304, 7984
                            size = 25, 25
                        ]
                        port "pf" {
                            label = "pf"
                            
                            position = auto:auto
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8304, 8120
                            size = 25, 25
                        ]
                        port "Lagging or Leading" {
                            label = "Lag or Lead"
                            
                            position = auto:auto
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8304, 8304
                            size = 25, 25
                        ]
                        port "Exporting or Importing" {
                            label = "export or import"
                            
                            position = auto:auto
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8304, 8208
                            size = 25, 25
                        ]
                        
                        junction "Junction1" sp
                        [
                            position = 7576, 7992
                            size = 0, 0
                        ]
                        
                        junction "Junction4" sp
                        [
                            position = 7600, 8104
                            size = 0, 0
                        ]
                        
                        junction "Junction5" sp
                        [
                            position = 7776, 7984
                            size = 0, 0
                        ]
                        
                        junction "Junction7" sp
                        [
                            position = 7672, 8104
                            size = 0, 0
                        ]
                        
                        junction "Junction8" sp
                        [
                            position = 7632, 7992
                            size = 0, 0
                        ]
                        
                        junction "Junction11" sp
                        [
                            position = 7808, 7856
                            size = 0, 0
                        ]
                        
                        junction "Junction12" sp
                        [
                            position = 7600, 7976
                            size = 0, 0
                        ]
                        
                        junction "Junction13" sp
                        [
                            position = 7840, 8248
                            size = 0, 0
                        ]
                        
                        junction "Junction14" sp
                        [
                            position = 8080, 8128
                            size = 0, 0
                        ]
                        
                        junction "Junction15" sp
                        [
                            position = 8080, 8216
                            size = 0, 0
                        ]
                        
                        connect "Abs1.in" Junction1 as Connection1
                        
                        
                        connect "Abs1.out" "Relational operator1.in" as Connection2
                        
                        
                        connect "Abs2.out" "Relational operator2.in" as Connection3
                        
                        
                        connect "Abs3.in" Junction7 as Connection4
                        
                        
                        connect "Abs3.out" "Product1.in" as Connection5
                        
                        
                        connect "Calculate S.P" Junction12 as Connection6
                        
                        
                        connect "Calculate S.S" Junction5 as Connection7
                        
                        
                        connect "Constant1.out" Junction11 as Connection8
                        
                        
                        connect "Constant2.out" Junction13 as Connection9
                        
                        
                        connect "Exporting or Importing" "Subsystem2.Out1" as Connection10
                        
                        
                        connect Junction1 Junction8 as Connection11
                        
                        
                        connect Junction11 "Relational operator1.in1" as Connection12
                        
                        
                        connect Junction12 "Abs2.in" as Connection13
                        
                        
                        connect Junction13 "Relational operator3.in1" as Connection14
                        
                        
                        connect Junction14 "Subsystem1.E" as Connection15
                        
                        
                        connect Junction15 Junction14 as Connection16
                        
                        
                        connect Junction4 Junction12 as Connection17
                        
                        
                        connect Junction4 P as Connection18
                        
                        
                        connect Junction5 S as Connection19
                        
                        
                        connect Junction7 Junction4 as Connection20
                        
                        
                        connect Junction8 "Calculate S.Q" as Connection21
                        
                        
                        connect "Lagging or Leading" "Subsystem3.Out1" as Connection22
                        
                        
                        connect "Logical operator1.out" Junction14 as Connection23
                        
                        
                        connect "Product1.in1" Junction5 as Connection24
                        
                        
                        connect "Product1.out" "Subsystem1.u" as Connection25
                        
                        
                        connect Q Junction1 as Connection26
                        
                        
                        connect "Relational operator1.out" "Logical operator1.in" as Connection27
                        
                        
                        connect "Relational operator2.in1" Junction11 as Connection28
                        
                        
                        connect "Relational operator2.out" "Logical operator1.in1" as Connection29
                        
                        
                        connect "Relational operator3.in" Junction7 as Connection30
                        
                        
                        connect "Relational operator3.out" "Subsystem2.u" as Connection31
                        
                        
                        connect "Relational operator4.in1" Junction13 as Connection32
                        
                        
                        connect "Relational operator4.in" Junction8 as Connection33
                        
                        
                        connect "Relational operator4.out" "Subsystem3.u" as Connection34
                        
                        
                        connect "Subsystem2.E" Junction15 as Connection35
                        
                        
                        connect "Subsystem3.E" Junction15 as Connection36
                        
                        
                        connect pf "Subsystem1.Out1" as Connection37
                        
                        
                
                        
                    }
                    [
                        position = 7216, 8912
                        size = 112, 80
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "Ia" {
                        label = "Ia"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6616, 7920
                        size = 25, 25
                    ]
                    port "Ia_rms" {
                        label = "Ia_rms"
                        
                        position = right:7
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 7920
                        size = 25, 25
                    ]
                    port "Ib" {
                        label = "Ib"
                        
                        position = left:2
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6616, 7984
                        size = 25, 25
                    ]
                    port "Ib_rms" {
                        label = "Ib_rms"
                        
                        position = right:8
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 7984
                        size = 25, 25
                    ]
                    port "Ic" {
                        label = "Ic"
                        
                        position = left:3
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6616, 8048
                        size = 25, 25
                    ]
                    port "Ic_rms" {
                        label = "Ic_rms"
                        
                        position = right:9
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8048
                        size = 25, 25
                    ]
                    port "Va" {
                        label = "Va"
                        
                        position = left:4
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6616, 8128
                        size = 25, 25
                    ]
                    port "Va_rms" {
                        label = "Va_rms"
                        
                        position = right:10
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8128
                        size = 25, 25
                    ]
                    port "Vb" {
                        label = "Vb"
                        
                        position = left:5
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6616, 8192
                        size = 25, 25
                    ]
                    port "Vc" {
                        label = "Vc"
                        
                        position = left:6
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6616, 8256
                        size = 25, 25
                    ]
                    port "Vb_rms" {
                        label = "Vb_rms"
                        
                        position = right:11
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8192
                        size = 25, 25
                    ]
                    port "Vc_rms" {
                        label = "Vc_rms"
                        
                        position = right:12
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8256
                        size = 25, 25
                    ]
                    port "P" {
                        label = "P"
                        
                        position = right:19
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7160, 8824
                        size = 25, 25
                    ]
                    port "Q" {
                        label = "Q"
                        
                        position = right:20
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7168, 8976
                        size = 25, 25
                    ]
                    port "S" {
                        label = "S"
                        
                        position = right:21
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7112, 9120
                        size = 25, 25
                    ]
                    port "pf" {
                        label = "pf"
                        
                        position = right:22
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7144, 9168
                        size = 25, 25
                    ]
                    port "Ia_mag" {
                        label = "Ia_mag"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 7536
                        size = 25, 25
                    ]
                    port "Ia_phase" {
                        label = "Ia_phase"
                        
                        position = right:2
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 7592
                        size = 25, 25
                    ]
                    port "Ib_mag" {
                        label = "Ib_mag"
                        
                        position = right:3
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 7640
                        size = 25, 25
                    ]
                    port "Ib_phase" {
                        label = "Ib_phase"
                        
                        position = right:4
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 7696
                        size = 25, 25
                    ]
                    port "Ic_mag" {
                        label = "Ic_mag"
                        
                        position = right:5
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 7744
                        size = 25, 25
                    ]
                    port "Ic_phase" {
                        label = "Ic_phase"
                        
                        position = right:6
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 7792
                        size = 25, 25
                    ]
                    port "Va_mag" {
                        label = "Va_mag"
                        
                        position = right:13
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8456
                        size = 25, 25
                    ]
                    port "Va_phase" {
                        label = "Va_phase"
                        
                        position = right:14
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8504
                        size = 25, 25
                    ]
                    port "Vb_mag" {
                        label = "Vb_mag"
                        
                        position = right:15
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8552
                        size = 25, 25
                    ]
                    port "Vb_phase" {
                        label = "Vb_phase"
                        
                        position = right:16
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8600
                        size = 25, 25
                    ]
                    port "Vc_mag" {
                        label = "Vc_mag"
                        
                        position = right:17
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8648
                        size = 25, 25
                    ]
                    port "Vc_phase" {
                        label = "Vc_phase"
                        
                        position = right:18
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7128, 8704
                        size = 25, 25
                    ]
                    port "Export Import" {
                        label = "Export Import"
                        
                        position = right:28
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7360, 8976
                        size = 25, 25
                    ]
                    port "Lag Lead" {
                        label = "Lag Lead"
                        
                        position = right:27
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7456, 8920
                        size = 25, 25
                    ]
                    port "bus_freq" {
                        label = "Bus_freq"
                        
                        position = right:23
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7512, 8400
                        size = 25, 25
                    ]
                    port "bus_wt" {
                        label = "Bus_wt"
                        
                        position = right:24
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7440, 8456
                        size = 25, 25
                    ]
                    port "Vline_a" {
                        label = "In1"
                        
                        position = auto:auto
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6632, 9352
                        size = 25, 25
                    ]
                    port "Vline_b" {
                        label = "In1"
                        
                        position = auto:auto
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6632, 9408
                        size = 25, 25
                    ]
                    port "Vline_c" {
                        label = "In1"
                        
                        position = auto:auto
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 6632, 9464
                        size = 25, 25
                    ]
                    port "line_freq" {
                        label = "line_freq"
                        
                        position = right:25
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7016, 9416
                        size = 25, 25
                    ]
                    port "line_wt" {
                        label = "Line_wt"
                        
                        position = right:26
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7016, 9464
                        size = 25, 25
                    ]
                    
                    junction "Junction23" sp
                    [
                        position = 6752, 8128
                        size = 0, 0
                    ]
                    
                    junction "Junction24" sp
                    [
                        position = 6768, 8192
                        size = 0, 0
                    ]
                    
                    junction "Junction25" sp
                    [
                        position = 6784, 8256
                        size = 0, 0
                    ]
                    
                    junction "Junction32" sp
                    [
                        position = 7056, 8888
                        size = 0, 0
                    ]
                    
                    junction "Junction34" sp
                    [
                        position = 6688, 8048
                        size = 0, 0
                    ]
                    
                    junction "Junction35" sp
                    [
                        position = 6656, 7920
                        size = 0, 0
                    ]
                    
                    junction "Junction37" sp
                    [
                        position = 6672, 7984
                        size = 0, 0
                    ]
                    
                    junction "Junction38" sp
                    [
                        position = 7056, 8928
                        size = 0, 0
                    ]
                    
                    junction "Junction39" sp
                    [
                        position = 6752, 8360
                        size = 0, 0
                    ]
                    
                    junction "Junction41" sp
                    [
                        position = 6768, 8392
                        size = 0, 0
                    ]
                    
                    junction "Junction42" sp
                    [
                        position = 6784, 8424
                        size = 0, 0
                    ]
                    
                    junction "Junction44" sp
                    [
                        position = 6768, 8568
                        size = 0, 0
                    ]
                    
                    junction "Junction45" sp
                    [
                        position = 6784, 8584
                        size = 0, 0
                    ]
                    
                    junction "Junction46" sp
                    [
                        position = 6688, 8048
                        size = 0, 0
                    ]
                    
                    junction "Junction47" sp
                    [
                        position = 6856, 7728
                    ]
                    
                    junction "Junction48" sp
                    [
                        position = 6752, 8536
                    ]
                    
                    junction "Junction49" sp
                    [
                        position = 6928, 8536
                    ]
                    
                    connect "Export Import" "Subsystem1.Exporting or Importing" as Connection1
                    
                    
                    connect "Gain1.out" "Ia_phase" as Connection87
                    
                    
                    connect "Gain10.in" "PQ Power Meter1.k_factor" as Connection105
                    
                    
                    connect "Gain11.in" "Three phase PLL1.freq" as Connection107
                    
                    
                    connect "Gain2.out" "Ib_phase" as Connection89
                    
                    
                    connect "Gain3.in" "Three Phase Phasor1.phase3" as Connection91
                    
                    
                    connect "Gain4.in" "Three Phase Phasor2.phase1" as Connection92
                    
                    
                    connect "Gain4.out" "Va_phase" as Connection93
                    
                    
                    connect "Gain5.out" "Vb_phase" as Connection95
                    
                    
                    connect "Gain6.in" "Three Phase Phasor2.phase3" as Connection97
                    
                    
                    connect "Gain7.in" Junction32 as Connection99
                    
                    
                    connect "Gain8.out" Q as Connection101
                    
                    
                    connect "Gain9.in" "PQ Power Meter1.apparent" as Connection103
                    
                    
                    connect Ia Junction35 as Connection2
                    
                    
                    connect "Ia_mag" "Three Phase Phasor1.out1" as Connection3
                    
                    
                    connect "Ia_rms" "RMS value1.out" as Connection4
                    
                    
                    connect Ib Junction37 as Connection5
                    
                    
                    connect "Ib_rms" "RMS value2.out" as Connection6
                    
                    
                    connect Ic Junction34 as Connection7
                    
                    
                    connect "Ic_phase" "Gain3.out" as Connection90
                    
                    
                    connect "Ic_rms" "RMS value3.out" as Connection9
                    
                    
                    connect Junction23 Junction39 as Connection10
                    
                    
                    connect Junction23 Va as Connection11
                    
                    
                    connect Junction24 Junction41 as Connection12
                    
                    
                    connect Junction24 "RMS value5.in" as Connection13
                    
                    
                    connect Junction24 Vb as Connection14
                    
                    
                    connect Junction25 Junction42 as Connection15
                    
                    
                    connect Junction25 "RMS value6.in" as Connection16
                    
                    
                    connect Junction32 "PQ Power Meter1.Pdc" as Connection17
                    
                    
                    connect Junction37 "RMS value2.in" as Connection18
                    
                    
                    connect Junction38 "Gain8.in" as Connection100
                    
                    
                    connect Junction39 "Three phase PLL1.va" as Connection20
                    
                    
                    connect Junction41 "Three phase PLL1.vb" as Connection21
                    
                    
                    connect Junction42 "Three phase PLL1.vc" as Connection22
                    
                    
                    connect Junction44 Junction41 as Connection23
                    
                    
                    connect Junction45 Junction42 as Connection24
                    
                    
                    connect Junction46 Junction34 as Connection25
                    
                    
                    connect Junction47 Junction35 as Connection26
                    
                    
                    connect Junction48 Junction39 as Connection27
                    
                    
                    connect Junction49 Junction48 as Connection28
                    
                    
                    connect P "Gain7.out" as Connection98
                    
                    
                    connect "PQ Power Meter1.ia" Junction35 as Connection30
                    
                    
                    connect "PQ Power Meter1.ib" Junction37 as Connection31
                    
                    
                    connect "PQ Power Meter1.Qdc" Junction38 as Connection32
                    
                    
                    connect "PQ Power Meter1.vb" Junction44 as Connection33
                    
                    
                    connect "PQ Power Meter1.vc" Junction45 as Connection34
                    
                    
                    connect "PQ Power Meter1.ic" Junction46 as Connection35
                    
                    
                    connect "PQ Power Meter1.va" Junction48 as Connection36
                    
                    
                    connect "RMS value1.in" Junction35 as Connection37
                    
                    
                    connect "RMS value3.in" Junction34 as Connection38
                    
                    
                    connect "RMS value4.in" Junction23 as Connection39
                    
                    
                    connect S "Gain9.out" as Connection102
                    
                    
                    connect "Subsystem1.P" Junction32 as Connection41
                    
                    
                    connect "Subsystem1.Q" Junction38 as Connection42
                    
                    
                    connect "Subsystem1.Lagging or Leading" "Lag Lead" as Connection43
                    
                    
                    connect "Subsystem1.S" "Termination1.in" as Connection44
                    
                    
                    connect "Termination10.in" "Three phase PLL2.sin_theta" as Connection45
                    
                    
                    connect "Termination11.in" "Three phase PLL2.d_axis" as Connection46
                    
                    
                    connect "Termination12.in" "Three phase PLL2.q_axis" as Connection47
                    
                    
                    connect "Termination13.in" "Three phase PLL2.zero_axis" as Connection48
                    
                    
                    connect "Termination2.in" "Subsystem1.pf" as Connection49
                    
                    
                    connect "Termination3.in" "PQ Power Meter1.Pac" as Connection50
                    
                    
                    connect "Termination4.in" "PQ Power Meter1.Qac" as Connection51
                    
                    
                    connect "Termination5.in" "Three phase PLL1.sin_theta" as Connection52
                    
                    
                    connect "Termination7.in" "Three phase PLL1.d_axis" as Connection53
                    
                    
                    connect "Termination8.in" "Three phase PLL1.q_axis" as Connection54
                    
                    
                    connect "Termination9.in" "Three phase PLL1.zero_axis" as Connection55
                    
                    
                    connect "Three Phase Phasor1.phase1" "Gain1.in" as Connection86
                    
                    
                    connect "Three Phase Phasor1.phase2" "Gain2.in" as Connection88
                    
                    
                    connect "Three Phase Phasor1.out2" "Ib_mag" as Connection57
                    
                    
                    connect "Three Phase Phasor1.out3" "Ic_mag" as Connection59
                    
                    
                    connect "Three Phase Phasor1.in2" Junction37 as Connection60
                    
                    
                    connect "Three Phase Phasor1.in3" Junction46 as Connection61
                    
                    
                    connect "Three Phase Phasor1.in1" Junction47 as Connection62
                    
                    
                    connect "Three Phase Phasor1.in_ref" Junction47 as Connection63
                    
                    
                    connect "Three Phase Phasor2.phase2" "Gain5.in" as Connection94
                    
                    
                    connect "Three Phase Phasor2.in2" Junction44 as Connection64
                    
                    
                    connect "Three Phase Phasor2.in3" Junction45 as Connection65
                    
                    
                    connect "Three Phase Phasor2.in1" Junction49 as Connection67
                    
                    
                    connect "Three Phase Phasor2.in_ref" Junction49 as Connection66
                    
                    
                    connect "Three Phase Phasor2.out1" "Va_mag" as Connection68
                    
                    
                    connect "Three Phase Phasor2.out2" "Vb_mag" as Connection70
                    
                    
                    connect "Three Phase Phasor2.out3" "Vc_mag" as Connection72
                    
                    
                    connect "Three phase PLL2.freq" "line_freq" as Connection73
                    
                    
                    connect "Va_rms" "RMS value4.out" as Connection74
                    
                    
                    connect "Vb_rms" "RMS value5.out" as Connection75
                    
                    
                    connect Vc Junction25 as Connection76
                    
                    
                    connect "Vc_phase" "Gain6.out" as Connection96
                    
                    
                    connect "Vc_rms" "RMS value6.out" as Connection78
                    
                    
                    connect "Vline_a" "Three phase PLL2.va" as Connection79
                    
                    
                    connect "Vline_b" "Three phase PLL2.vb" as Connection80
                    
                    
                    connect "Vline_c" "Three phase PLL2.vc" as Connection81
                    
                    
                    connect "bus_freq" "Gain11.out" as Connection106
                    
                    
                    connect "bus_wt" "Three phase PLL1.theta" as Connection83
                    
                    
                    connect "line_wt" "Three phase PLL2.theta" as Connection84
                    
                    
                    connect pf "Gain10.out" as Connection104
                    
                    
            
                    
                }
                [
                    position = 6992, 8104
                    size = 112, 664
                ]
                
                component Subsystem "Relay 25-Sync Check1" {
                    layout = dynamic
            
                    
                    component gen_rms_value "RMS value2" {
                        
            	    
                    }
                    [
                        position = 7784, 7832
                    ]
                    
                    component gen_digital_probe "freq_lock" {
                        
                        addr = "2"
            	    
                    }
                    [
                        position = 8200, 8064
                    ]
                    
                    component gen_gain "Gain1" {
                        
                        gain = "np.sqrt(3)"
            	    
                    }
                    [
                        position = 7864, 7776
                    ]
                    
                    component gen_gain "Gain3" {
                        
                        gain = "1.0/10.0"
            	    
                    }
                    [
                        position = 7776, 8080
                    ]
                    
                    component gen_logic_op "Logical operator5" {
                        
                        operator = "OR"
            	    
                    }
                    [
                        position = 8544, 7848
                    ]
                    
                    component gen_digital_probe "deadbus" {
                        
                        addr = "2"
            	    
                    }
                    [
                        position = 8584, 7704
                    ]
                    
                    component gen_logic_op "Logical operator3" {
                        
                        inputs = "3"
            	    
                    }
                    [
                        position = 8336, 8104
                    ]
                    
                    component gen_c_function "Deadbus fcn" {
                        
                        global_variables = "real threshold;uint a;uint c;uint b;"
                        in_terminal_properties = "real Vbus;real Vline;real VRMSLL;"
                        no_feed_inputs = "[u'']"
                        no_feed_outputs = "[u'']"
                        output_fnc = "/*Begin code section*/
                                                                                                                                                                                                        if (VRMSLL > 400)
                                                                                                                                                                                                            threshold=VRMSLL*0.003;
                                                                                                                                                                                                        else
                                                                                                                                                                                                            threshold = VRMSLL*0.05;
                                                                                                                                                                                                        
                                                                                                                                                                                                        if ((Vbus > (VRMSLL*0.90)) && (Vbus < (VRMSLL*1.20)) && (Vline < threshold))
                                                                                                                                                                                                            a = 1;
                                                                                                                                                                                                        else
                                                                                                                                                                                                            a = 0;
                                                                                                                                                                                                        
                                                                                                                                                                                                        if ((Vline > (VRMSLL*0.90)) && (Vline < (VRMSLL*1.20)) && (Vbus < threshold))
                                                                                                                                                                                                            b = 1;
                                                                                                                                                                                                        else
                                                                                                                                                                                                            b = 0;
                                                                                                                                                                                                        
                                                                                                                                                                                                        if ((Vline < threshold) && (Vbus < threshold))
                                                                                                                                                                                                            c = 1;
                                                                                                                                                                                                        else
                                                                                                                                                                                                            c = 0;
                                                                                                                                                                                                        
                                                                                                                                                                                                        out = a || b || c;
                                                                                                                                                                                                        /*End code section*/"
            	    
                    }
                    [
                        position = 8208, 7672
                    ]
                    
                    component gen_logic_op "Logical operator7" {
                        
                        operator = "OR"
            	    
                    }
                    [
                        position = 8632, 7888
                    ]
                    
                    component gen_digital_probe "phase_lock" {
                        
                        addr = "2"
            	    
                    }
                    [
                        position = 8200, 8232
                    ]
                    
                    component gen_sr_ff "SR Flip Flop1" {
                        
            	    
                    }
                    [
                        position = 8736, 7864
                    ]
                    
                    component gen_rel_op "Relational operator1" {
                        
            	    
                    }
                    [
                        position = 8464, 7856
                    ]
                    
                    component gen_bus_split "Bus Split1" {
                        
                        outputs = "4"
            	    
                    }
                    [
                        position = 7808, 8424
                    ]
                    
                    component gen_rms_value "RMS value1" {
                        
            	    
                    }
                    [
                        position = 7784, 7776
                    ]
                    
                    component gen_digital_probe "R25" {
                        
                        addr = "2"
            	    
                    }
                    [
                        position = 9032, 8016
                    ]
                    
                    component src_constant "Constant2" {
                        
                        execution_rate = "Ts"
                        value = "[2]"
            	    
                    }
                    [
                        position = 8368, 7848
                    ]
                    
                    component gen_digital_probe "volt_lock" {
                        
                        addr = "2"
            	    
                    }
                    [
                        position = 8200, 7824
                    ]
                    
                    component gen_gain "Gain2" {
                        
                        gain = "np.sqrt(3)"
            	    
                    }
                    [
                        position = 7864, 7832
                    ]
                    
                    component gen_terminator "Termination1" {
                        
            	    
                    }
                    [
                        position = 8808, 7904
                    ]
                    
                    component gen_logic_op "Logical operator4" {
                        
                        operator = "OR"
            	    
                    }
                    [
                        position = 8888, 8096
                    ]
                    
                    component Subsystem "Phase Comparator" {
                        layout = dynamic
                
                        
                        component gen_probe "c_out" {
                            
                            addr = "17943"
                	    
                        }
                        [
                            position = 7768, 8000
                        ]
                        
                        component gen_c_function "C function1" {
                            
                            global_variables = "real mod_L;real wrap_out1;real wrap_out2;real mod_B;real k;real alpha;real PI2;real PI;"
                            in_terminal_properties = "real phase_bus;real phase_line;"
                            init_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                                                                                                                                                                                                                PI = 3.1415926536;
                                                                                                                                                                                                                                                                                                                                                                                                                                                PI2 = 2*PI;
                                                                                                                                                                                                                                                                                                                                                                                                                                                /*End code section*/"
                            no_feed_inputs = "[u'']"
                            no_feed_outputs = "[u'']"
                            output_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                                                                                                                                                                                                                mod_L=fmod(phase_line, PI2);
                                                                                                                                                                                                                                                                                                                                                                                                                                                mod_B=fmod(phase_bus, PI2);
                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                if (fabs(mod_L - mod_B) > PI) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                    if (mod_L < mod_B)
                                                                                                                                                                                                                                                                                                                                                                                                                                                        mod_B -= PI2;
                                                                                                                                                                                                                                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                                                                                                                                                                                                                                        mod_B += PI2;
                                                                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                out=fabs(mod_L-mod_B)*180.0/PI;
                                                                                                                                                                                                                                                                                                                                                                                                                                                /*End code section*/"
                	    
                        }
                        [
                            position = 7656, 8040
                        ]
                        
                        component gen_rel_op "Relational operator1" {
                            
                            relational_op = "<="
                	    
                        }
                        [
                            position = 7808, 8056
                        ]
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        port "Locked" {
                            label = "locked"
                            
                            position = right:1
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 7912, 8056
                            size = 25, 25
                        ]
                        port "wt_grid" {
                            label = "wt_grid"
                            
                            position = left:1
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7376, 8008
                            size = 25, 25
                        ]
                        port "wt_gen" {
                            label = "wt_gen"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7376, 8072
                            size = 25, 25
                        ]
                        port "angle_threshold" {
                            label = "angle_threshold"
                            
                            position = left:3
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7576, 8136
                            size = 25, 25
                        ]
                        
                        junction "Junction1" sp
                        [
                            position = 7736, 8048
                            size = 0, 0
                        ]
                        
                        connect Junction1 "C function1.out" as Connection2
                        
                        
                        connect Locked "Relational operator1.out" as Connection3
                        
                        
                        connect "Relational operator1.in" Junction1 as Connection4
                        
                        
                        connect "angle_threshold" "Relational operator1.in1" as Connection8
                        
                        
                        connect "c_out.in" Junction1 as Connection5
                        
                        
                        connect "wt_gen" "C function1.phase_line" as Connection6
                        
                        
                        connect "wt_grid" "C function1.phase_bus" as Connection7
                        
                        
                
                        
                    }
                    [
                        position = 8016, 8272
                        size = 112, 88
                    ]
                    
                    component Subsystem "Freq Comparator" {
                        layout = dynamic
                
                        
                        component gen_c_function "C function1" {
                            
                            in_terminal_properties = "real fbus;inherit fline;"
                            no_feed_inputs = "[u'']"
                            no_feed_outputs = "[u'']"
                            output_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                                        out=fabs(fline-fbus);
                                                                                                                                                                                                                                                                        /*End code section*/"
                	    
                        }
                        [
                            position = 7736, 8040
                        ]
                        
                        component gen_rel_op "Relational operator1" {
                            
                            relational_op = "<="
                	    
                        }
                        [
                            position = 7832, 8048
                        ]
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        port "Locked" {
                            label = "locked"
                            
                            position = right:1
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 7912, 8048
                            size = 25, 25
                        ]
                        port "f_bus" {
                            label = "f_bus"
                            
                            position = left:1
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7600, 8016
                            size = 25, 25
                        ]
                        port "f_line" {
                            label = "f_line"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7600, 8080
                            size = 25, 25
                        ]
                        port "dF_threshold" {
                            label = "dF_threshold"
                            
                            position = left:3
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7728, 8112
                            size = 25, 25
                        ]
                        
                        connect "Relational operator1.in" "C function1.out" as Connection6
                        
                        
                        connect "Relational operator1.out" Locked as Connection8
                        
                        
                        connect "Relational operator1.in1" "dF_threshold" as Connection7
                        
                        
                        connect "f_bus" "C function1.fbus" as Connection4
                        
                        
                        connect "f_line" "C function1.fline" as Connection5
                        
                        
                
                        
                    }
                    [
                        position = 8016, 8104
                        size = 112, 88
                    ]
                    
                    component Subsystem "Voltage Comparator" {
                        layout = dynamic
                
                        
                        component gen_rel_op "Relational operator1" {
                            
                            relational_op = "<="
                	    
                        }
                        [
                            position = 7856, 8048
                        ]
                        
                        component gen_gain "Gain1" {
                            
                            gain = "0.01"
                	    
                        }
                        [
                            position = 7680, 8200
                        ]
                        
                        component gen_c_function "C function1" {
                            
                            in_terminal_properties = "real Vbus;inherit Vline;"
                            no_feed_inputs = "[u'']"
                            no_feed_outputs = "[u'']"
                            output_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                                                                                                                                                                                                                out=fabs(Vline-Vbus);
                                                                                                                                                                                                                                                                                                                                                                                                                                                /*End code section*/"
                	    
                        }
                        [
                            position = 7736, 8040
                        ]
                        
                        component gen_product "Product1" {
                            
                	    
                        }
                        [
                            position = 7760, 8160
                        ]
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        port "V_bus" {
                            label = "V_bus"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7600, 8016
                            size = 25, 25
                        ]
                        port "V_line" {
                            label = "V_line"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7600, 8080
                            size = 25, 25
                        ]
                        port "Locked" {
                            label = "locked"
                            
                            position = right:1
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 7928, 8048
                            size = 25, 25
                        ]
                        port "VRMSLL" {
                            label = "VRMSLL"
                            
                            position = left:3
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7600, 8152
                            size = 25, 25
                        ]
                        port "dV_threshold" {
                            label = "dV_threshold"
                            
                            position = left:4
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7600, 8200
                            size = 25, 25
                        ]
                        
                        connect "Gain1.in" "dV_threshold" as Connection8
                        
                        
                        connect "Product1.in1" "Gain1.out" as Connection7
                        
                        
                        connect "Product1.out" "Relational operator1.in1" as Connection9
                        
                        
                        connect "Product1.in" VRMSLL as Connection6
                        
                        
                        connect "Relational operator1.in" "C function1.out" as Connection2
                        
                        
                        connect "Relational operator1.out" Locked as Connection3
                        
                        
                        connect "V_bus" "C function1.Vbus" as Connection4
                        
                        
                        connect "V_line" "C function1.Vline" as Connection5
                        
                        
                
                        
                    }
                    [
                        position = 8016, 7864
                        size = 112, 208
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    tag "Goto2" {
                        value = "dV_threshold"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 7984, 8416
                        rotation = down
                        scale = -1, 1
                    ]
                    
                    tag "From1" {
                        value = "angle_threshold"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7896, 8296
                    ]
                    
                    tag "Goto4" {
                        value = "dF_threshold"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 7984, 8448
                    ]
                    
                    tag "Goto3" {
                        value = "angle_threshold"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 7912, 8432
                    ]
                    
                    tag "From5" {
                        value = "VRMSLL"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8112, 7688
                    ]
                    
                    tag "From3" {
                        value = "dV_threshold"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7896, 7944
                    ]
                    
                    tag "From4" {
                        value = "VRMSLL"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7896, 7888
                    ]
                    
                    tag "Goto1" {
                        value = "VRMSLL"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8056, 8400
                        rotation = down
                        scale = -1, 1
                    ]
                    
                    tag "From2" {
                        value = "dF_threshold"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7896, 8128
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "trip_or" {
                        label = "trip_or"
                        
                        position = left:8
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8368, 7792
                        size = 25, 25
                    ]
                    port "mode_in" {
                        label = "mode_in"
                        
                        position = left:7
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8368, 7896
                        size = 25, 25
                    ]
                    port "bool_R25" {
                        label = "bool_R25"
                        
                        position = auto:auto
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 9032, 8096
                        size = 25, 25
                    ]
                    port "Va" {
                        label = "Va"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7712, 7776
                        size = 25, 25
                    ]
                    port "Vline_a" {
                        label = "Vline_A"
                        
                        position = left:2
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7712, 7832
                        size = 25, 25
                    ]
                    port "bus_freq" {
                        label = "bus_freq"
                        
                        position = left:3
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7712, 8080
                        size = 25, 25
                    ]
                    port "line_freq" {
                        label = "line_freq"
                        
                        position = left:4
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7824, 8104
                        size = 25, 25
                    ]
                    port "bus_wt" {
                        label = "bus_wt"
                        
                        position = left:5
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7776, 8248
                        size = 25, 25
                    ]
                    port "line_wt" {
                        label = "line_wt"
                        
                        position = left:6
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7832, 8272
                        size = 25, 25
                    ]
                    port "relay_paramR25" {
                        label = "relay_paramR25"
                        
                        position = left:9
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7712, 8424
                        size = 25, 25
                    ]
                    
                    junction "Junction4" sp
                    [
                        position = 7920, 7832
                        size = 0, 0
                    ]
                    
                    junction "Junction5" sp
                    [
                        position = 8536, 8104
                        size = 0, 0
                    ]
                    
                    junction "Junction23" sp
                    [
                        position = 7904, 7776
                        size = 0, 0
                    ]
                    
                    junction "Junction24" sp
                    [
                        position = 8976, 8096
                        size = 0, 0
                    ]
                    
                    junction "Junction25" sp
                    [
                        position = 8144, 7864
                    ]
                    
                    junction "Junction26" sp
                    [
                        position = 8152, 8104
                    ]
                    
                    junction "Junction27" sp
                    [
                        position = 8152, 8272
                    ]
                    
                    junction "Junction28" sp
                    [
                        position = 8536, 7672
                    ]
                    
                    connect "Bus Split1.in" "relay_paramR25" as Connection69
                    
                    
                    connect "Constant2.out" "Relational operator1.in" as Connection1
                    
                    
                    connect "Deadbus fcn.Vbus" Junction23 as Connection103
                    
                    
                    connect "Deadbus fcn.out" Junction28 as Connection123
                    
                    
                    connect "Freq Comparator.Locked" Junction26 as Connection115
                    
                    
                    connect "Freq Comparator.f_line" "line_freq" as Connection133
                    
                    
                    connect From1 "Phase Comparator.angle_threshold" as Connection74
                    
                    
                    connect From2 "Freq Comparator.dF_threshold" as Connection79
                    
                    
                    connect From3 "Voltage Comparator.dV_threshold" as Connection80
                    
                    
                    connect From4 "Voltage Comparator.VRMSLL" as Connection81
                    
                    
                    connect From5 "Deadbus fcn.VRMSLL" as Connection90
                    
                    
                    connect "Gain3.out" "Freq Comparator.f_bus" as Connection132
                    
                    
                    connect Goto1 "Bus Split1.out" as Connection70
                    
                    
                    connect Goto2 "Bus Split1.out1" as Connection71
                    
                    
                    connect Goto3 "Bus Split1.out2" as Connection72
                    
                    
                    connect Goto4 "Bus Split1.out3" as Connection73
                    
                    
                    connect Junction23 "Gain1.out" as Connection16
                    
                    
                    connect Junction24 "bool_R25" as Connection17
                    
                    
                    connect Junction25 "Logical operator3.in" as Connection113
                    
                    
                    connect Junction26 "Logical operator3.in1" as Connection116
                    
                    
                    connect Junction27 "Phase Comparator.Locked" as Connection119
                    
                    
                    connect Junction28 "SR Flip Flop1.s_in" as Connection124
                    
                    
                    connect Junction4 "Deadbus fcn.Vline" as Connection104
                    
                    
                    connect Junction4 "Gain2.out" as Connection21
                    
                    
                    connect Junction5 "Logical operator4.in1" as Connection22
                    
                    
                    connect "Logical operator3.in2" Junction27 as Connection118
                    
                    
                    connect "Logical operator3.out" Junction5 as Connection24
                    
                    
                    connect "Logical operator4.out" Junction24 as Connection25
                    
                    
                    connect "Logical operator5.out" "Logical operator7.in" as Connection26
                    
                    
                    connect "Logical operator5.in1" "Relational operator1.out" as Connection27
                    
                    
                    connect "Logical operator5.in" "trip_or" as Connection28
                    
                    
                    connect "Logical operator7.in1" Junction5 as Connection29
                    
                    
                    connect "Logical operator7.out" "SR Flip Flop1.r_in" as Connection30
                    
                    
                    connect "Phase Comparator.wt_grid" "bus_wt" as Connection110
                    
                    
                    connect "R25.in" Junction24 as Connection33
                    
                    
                    connect "RMS value1.out" "Gain1.in" as Connection93
                    
                    
                    connect "RMS value2.out" "Gain2.in" as Connection97
                    
                    
                    connect "Relational operator1.in1" "mode_in" as Connection36
                    
                    
                    connect "SR Flip Flop1.out" "Logical operator4.in" as Connection37
                    
                    
                    connect "SR Flip Flop1.out_n" "Termination1.in" as Connection38
                    
                    
                    connect Va "RMS value1.in" as Connection101
                    
                    
                    connect "Vline_a" "RMS value2.in" as Connection102
                    
                    
                    connect "Voltage Comparator.V_bus" Junction23 as Connection47
                    
                    
                    connect "Voltage Comparator.Locked" Junction25 as Connection112
                    
                    
                    connect "Voltage Comparator.V_line" Junction4 as Connection48
                    
                    
                    connect "bus_freq" "Gain3.in" as Connection121
                    
                    
                    connect "deadbus.in" Junction28 as Connection125
                    
                    
                    connect "freq_lock.in" Junction26 as Connection117
                    
                    
                    connect "line_wt" "Phase Comparator.wt_gen" as Connection111
                    
                    
                    connect "phase_lock.in" Junction27 as Connection120
                    
                    
                    connect "volt_lock.in" Junction25 as Connection114
                    
                    
            
                    
                }
                [
                    position = 8888, 7800
                    size = 120, 232
                ]
                
                component Subsystem "Relay_Param" {
                    layout = dynamic
            
                    
                    component src_constant "27P_59P_tripDelay" {
                        
                        execution_rate = "Ts"
                        value = "R27P_R59P_tripDelay"
            	    
                    }
                    [
                        position = 8088, 7872
                    ]
                    
                    component src_constant "Initial_status" {
                        
                        execution_rate = "Ts"
                        value = "Initial_status"
            	    
                    }
                    [
                        position = 8088, 7992
                    ]
                    
                    component src_constant "VRMSLL" {
                        
                        execution_rate = "Ts"
                        value = "VRMSLL"
            	    
                    }
                    [
                        position = 8088, 7648
                    ]
                    
                    component src_constant "dF_threshold" {
                        
                        execution_rate = "Ts"
                        value = "dF_threshold"
            	    
                    }
                    [
                        position = 8088, 7816
                    ]
                    
                    component src_constant "angle_threshold" {
                        
                        execution_rate = "Ts"
                        value = "angle_threshold"
            	    
                    }
                    [
                        position = 8088, 7760
                    ]
                    
                    component sys_signal_switch "Signal switch1" {
                        
                        threshold = "0.5"
            	    
                    }
                    [
                        position = 9104, 7808
                        scale = 1, -1
                    ]
                    
                    component gen_bus_split "Bus Split1" {
                        
                        outputs = "3"
            	    
                    }
                    [
                        position = 8104, 8192
                        rotation = down
                        scale = -1, -1
                    ]
                    
                    component src_constant "CT_primary" {
                        
                        execution_rate = "Ts"
                        value = "CT_primary"
            	    
                    }
                    [
                        position = 8088, 7928
                    ]
                    
                    component gen_bus_join "Bus Join1" {
                        
                        inputs = "4"
            	    
                    }
                    [
                        position = 8248, 7736
                    ]
                    
                    component src_constant "dV_threshold" {
                        
                        execution_rate = "Ts"
                        value = "dV_threshold"
            	    
                    }
                    [
                        position = 8088, 7704
                    ]
                    
                    component Subsystem "Grid_Tied_param" {
                        layout = dynamic
                
                        
                        component src_constant "27P_pickup" {
                            
                            execution_rate = "Ts"
                            value = "R27P_pickup1"
                	    
                        }
                        [
                            position = 8120, 7880
                            rotation = right
                        ]
                        
                        component src_constant "51P_pickup" {
                            
                            execution_rate = "Ts"
                            value = "R51P_pickup1"
                	    
                        }
                        [
                            position = 8312, 7840
                            rotation = right
                        ]
                        
                        component gen_gain "divide_sqrt3" {
                            
                            gain = "1.0/np.sqrt(3.0)"
                	    
                        }
                        [
                            position = 8504, 7904
                            rotation = right
                        ]
                        
                        component src_constant "51P_curveType" {
                            
                            execution_rate = "Ts"
                            value = "R51P_curveType1"
                	    
                        }
                        [
                            position = 8240, 7880
                            rotation = right
                        ]
                        
                        component src_constant "51P_timeDial" {
                            
                            execution_rate = "Ts"
                            value = "R51P_timeDial1"
                	    
                        }
                        [
                            position = 8200, 7840
                            rotation = right
                        ]
                        
                        component src_constant "50P_pickup" {
                            
                            execution_rate = "Ts"
                            value = "R50P_pickup1"
                	    
                        }
                        [
                            position = 8416, 7840
                            rotation = right
                        ]
                        
                        component src_constant "50P_tripDelay" {
                            
                            execution_rate = "Ts"
                            value = "R50P_tripDelay1"
                	    
                        }
                        [
                            position = 8352, 7880
                            rotation = right
                        ]
                        
                        component gen_bus_join "Bus Join1" {
                            
                            inputs = "10"
                	    
                        }
                        [
                            position = 8552, 8040
                        ]
                        
                        component src_constant "59P_pickup" {
                            
                            execution_rate = "Ts"
                            value = "R59P_pickup1"
                	    
                        }
                        [
                            position = 8080, 7840
                            rotation = right
                        ]
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        port "VRMSLL" {
                            label = "VRMSLL"
                            
                            position = left:1
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8504, 7840
                            rotation = right
                        ]
                        port "CT_primary" {
                            label = "CT_primary"
                            
                            position = left:3
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8448, 7880
                            rotation = right
                        ]
                        port "27P_59P_tripDelay" {
                            label = "27P_59P_tripDelay"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8024, 7880
                            rotation = right
                        ]
                        port "relay_param" {
                            label = "relay_param"
                            
                            position = right:auto
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8704, 8040
                        ]
                        
                        comment Comment1 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">In bus join:</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in = VRMSLN</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in1 = CT_p</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in2 = IOC_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in3 = IOC_tripDelay</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in4 = TOC_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in5 = curveType</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in6 = timeDial</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in7 = UV_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in8 = OV_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in9 = UVOV_tripDelay</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>             ENDCOMMENT 
                        [
                            position = 8776, 7936
                        ]
                        
                        connect "27P_59P_tripDelay" "Bus Join1.in9" as Connection11
                        
                        
                        connect "27P_pickup.out" "Bus Join1.in7" as Connection6
                        
                        
                        connect "50P_pickup.out" "Bus Join1.in2" as Connection1
                        
                        
                        connect "50P_tripDelay.out" "Bus Join1.in3" as Connection2
                        
                        
                        connect "51P_curveType.out" "Bus Join1.in5" as Connection4
                        
                        
                        connect "51P_pickup.out" "Bus Join1.in4" as Connection3
                        
                        
                        connect "51P_timeDial.out" "Bus Join1.in6" as Connection5
                        
                        
                        connect "59P_pickup.out" "Bus Join1.in8" as Connection7
                        
                        
                        connect "CT_primary" "Bus Join1.in1" as Connection10
                        
                        
                        connect "divide_sqrt3.out" "Bus Join1.in" as Connection9
                        
                        
                        connect "divide_sqrt3.in" VRMSLL as Connection8
                        
                        
                        connect "relay_param" "Bus Join1.out" as Connection12
                        
                        
                
                        
                    }
                    [
                        position = 8872, 7728
                        size = 216, 104
                    ]
                    
                    component Subsystem "Reset" {
                        layout = dynamic
                
                        
                        component gen_logic_op "or" {
                            
                            operator = "OR"
                	    
                        }
                        [
                            position = 8152, 8192
                        ]
                        
                        component Subsystem "detect_change" {
                            layout = dynamic
                    
                            
                            component tm_delay "Unit Delay1" {
                                
                    	    
                            }
                            [
                                position = 8144, 8200
                            ]
                            
                            component gen_rel_op "Relational operator1" {
                                
                                relational_op = "!="
                    	    
                            }
                            [
                                position = 8240, 8192
                            ]
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            port "Out1" {
                                label = "Out"
                                
                                position = right:1
                                kind = sp
                                direction = in
                                sp_type {
                                    default = inherit
                                    readonly = True
                                }
                            }
                            [
                                position = 8304, 8192
                                size = 25, 25
                            ]
                            port "In3" {
                                label = "In"
                                
                                position = left:2
                                kind = sp
                                direction = out
                                sp_type {
                                    default = auto
                                    readonly = True
                                }
                            }
                            [
                                position = 8032, 8200
                                size = 25, 25
                            ]
                            
                            junction "Junction1" sp
                            [
                                position = 8080, 8200
                                size = 0, 0
                            ]
                            
                            connect Junction1 In3 as Connection1
                            
                            
                            connect "Relational operator1.in" Junction1 as Connection2
                            
                            
                            connect "Relational operator1.out" Out1 as Connection3
                            
                            
                            connect "Unit Delay1.in" Junction1 as Connection4
                            
                            
                            connect "Unit Delay1.out" "Relational operator1.in1" as Connection5
                            
                            
                    
                            
                        }
                        [
                            position = 8248, 8192
                            size = 48, 48
                        ]
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        port "reset" {
                            label = "Reset"
                            
                            position = right:2
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8336, 8152
                            size = 25, 25
                        ]
                        port "op_mode" {
                            label = "Op_mode"
                            
                            position = right:1
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8344, 8240
                            size = 25, 25
                        ]
                        port "Reset in" {
                            label = "Reset in"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8064, 8168
                            size = 25, 25
                        ]
                        port "op_mode in" {
                            label = "op_mode in"
                            
                            position = left:1
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8064, 8224
                            size = 25, 25
                        ]
                        
                        junction "Junction1" sp
                        [
                            position = 8096, 8224
                            size = 0, 0
                        ]
                        
                        connect Junction1 "op_mode in" as Connection1
                        
                        
                        connect "detect_change.Out1" reset as Connection5
                        
                        
                        connect "op_mode" Junction1 as Connection6
                        
                        
                        connect "or.in1" Junction1 as Connection3
                        
                        
                        connect "or.in" "Reset in" as Connection2
                        
                        
                        connect "or.out" "detect_change.In3" as Connection4
                        
                        
                
                        
                    }
                    [
                        position = 8280, 8192
                        rotation = down
                        scale = -1, -1
                        size = 104, 104
                    ]
                    
                    component Subsystem "Islanded_param" {
                        layout = dynamic
                
                        
                        component src_constant "59P_pickup" {
                            
                            execution_rate = "Ts"
                            value = "R59P_pickup2"
                	    
                        }
                        [
                            position = 8072, 7856
                            rotation = right
                        ]
                        
                        component src_constant "51P_curveType" {
                            
                            execution_rate = "Ts"
                            value = "R51P_curveType2"
                	    
                        }
                        [
                            position = 8240, 7888
                            rotation = right
                        ]
                        
                        component src_constant "51P_timeDial" {
                            
                            execution_rate = "Ts"
                            value = "R51P_timeDial2"
                	    
                        }
                        [
                            position = 8192, 7856
                            rotation = right
                        ]
                        
                        component src_constant "27P_pickup" {
                            
                            execution_rate = "Ts"
                            value = "R27P_pickup2"
                	    
                        }
                        [
                            position = 8120, 7888
                            rotation = right
                        ]
                        
                        component gen_bus_join "Bus Join1" {
                            
                            inputs = "10"
                	    
                        }
                        [
                            position = 8544, 8048
                        ]
                        
                        component gen_gain "divide_sqrt3" {
                            
                            gain = "1.0/np.sqrt(3.0)"
                	    
                        }
                        [
                            position = 8504, 7920
                            rotation = right
                        ]
                        
                        component src_constant "51P_pickup" {
                            
                            execution_rate = "Ts"
                            value = "R51P_pickup2"
                	    
                        }
                        [
                            position = 8296, 7856
                            rotation = right
                        ]
                        
                        component src_constant "50P_tripDelay" {
                            
                            execution_rate = "Ts"
                            value = "R50P_tripDelay2"
                	    
                        }
                        [
                            position = 8352, 7888
                            rotation = right
                        ]
                        
                        component src_constant "50P_pickup" {
                            
                            execution_rate = "Ts"
                            value = "R50P_pickup2"
                	    
                        }
                        [
                            position = 8400, 7856
                            rotation = right
                        ]
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        port "VRMSLL" {
                            label = "VRMSLL"
                            
                            position = left:1
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8504, 7856
                            rotation = right
                        ]
                        port "CT_primary" {
                            label = "CT_primary"
                            
                            position = left:3
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8448, 7888
                            rotation = right
                        ]
                        port "27P_59P_tripDelay" {
                            label = "27P_59P_tripDelay"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8024, 7888
                            rotation = right
                        ]
                        port "relay_param" {
                            label = "relay_param"
                            
                            position = right:auto
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8696, 8048
                        ]
                        
                        comment Comment1 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">In bus join:</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in = VRMSLN</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in1 = CT_p</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in2 = IOC_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in3 = IOC_tripDelay</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in4 = TOC_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in5 = curveType</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in6 = timeDial</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in7 = UV_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in8 = OV_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">in9 = UVOV_tripDelay</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>             ENDCOMMENT 
                        [
                            position = 8744, 7928
                        ]
                        
                        connect "27P_59P_tripDelay" "Bus Join1.in9" as Connection11
                        
                        
                        connect "27P_pickup.out" "Bus Join1.in7" as Connection6
                        
                        
                        connect "50P_pickup.out" "Bus Join1.in2" as Connection1
                        
                        
                        connect "50P_tripDelay.out" "Bus Join1.in3" as Connection2
                        
                        
                        connect "51P_curveType.out" "Bus Join1.in5" as Connection4
                        
                        
                        connect "51P_pickup.out" "Bus Join1.in4" as Connection3
                        
                        
                        connect "51P_timeDial.out" "Bus Join1.in6" as Connection5
                        
                        
                        connect "59P_pickup.out" "Bus Join1.in8" as Connection7
                        
                        
                        connect "CT_primary" "Bus Join1.in1" as Connection10
                        
                        
                        connect "divide_sqrt3.out" "Bus Join1.in" as Connection9
                        
                        
                        connect "divide_sqrt3.in" VRMSLL as Connection8
                        
                        
                        connect "relay_param" "Bus Join1.out" as Connection12
                        
                        
                
                        
                    }
                    [
                        position = 8872, 7872
                        size = 216, 104
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    tag "Goto1" {
                        value = "protection_mode"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8232, 8280
                    ]
                    
                    tag "Goto2" {
                        value = "27P_59P_tripDelay"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8192, 7872
                    ]
                    
                    tag "From4" {
                        value = "protection_mode"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 9104, 7904
                        rotation = right
                        scale = 1, -1
                    ]
                    
                    tag "From3" {
                        value = "CT_primary"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8536, 7760
                    ]
                    
                    tag "Goto3" {
                        value = "CT_primary"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8192, 7928
                    ]
                    
                    tag "From1" {
                        value = "VRMSLL"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8536, 7696
                    ]
                    
                    tag "Goto4" {
                        value = "VRMSLL"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8208, 7600
                    ]
                    
                    tag "From2" {
                        value = "27P_59P_tripDelay"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8616, 7728
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "op_mode" {
                        label = "op_mode"
                        
                        position = right:4
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8384, 8160
                    ]
                    port "reset" {
                        label = "reset"
                        
                        position = right:5
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8384, 8224
                    ]
                    port "relay_paramR25" {
                        label = "relay_paramR25"
                        
                        position = right:2
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8360, 7736
                    ]
                    port "Initial_condition" {
                        label = "Initial_condition"
                        
                        position = right:3
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8192, 7992
                    ]
                    port "from_Modbus" {
                        label = "from_Modbus"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7992, 8192
                    ]
                    port "relay_param" {
                        label = "relay_param"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 9200, 7808
                    ]
                    
                    junction "Junction1" sp
                    [
                        position = 8152, 7648
                    ]
                    
                    junction "Junction2" sp
                    [
                        position = 8736, 7696
                    ]
                    
                    junction "Junction3" sp
                    [
                        position = 8712, 7728
                    ]
                    
                    junction "Junction4" sp
                    [
                        position = 8688, 7760
                    ]
                    
                    connect "Bus Join1.in" Junction1 as Connection54
                    
                    
                    connect "Bus Join1.in2" "angle_threshold.out" as Connection48
                    
                    
                    connect "Bus Join1.in3" "dF_threshold.out" as Connection49
                    
                    
                    connect "Bus Join1.in1" "dV_threshold.out" as Connection47
                    
                    
                    connect "Bus Split1.out1" "Reset.Reset in" as Connection75
                    
                    
                    connect "Bus Split1.in" "from_Modbus" as Connection42
                    
                    
                    connect From1 Junction2 as Connection60
                    
                    
                    connect From2 Junction3 as Connection63
                    
                    
                    connect From3 Junction4 as Connection66
                    
                    
                    connect From4 "Signal switch1.in2" as Connection71
                    
                    
                    connect Goto1 "Bus Split1.out2" as Connection45
                    
                    
                    connect Goto2 "27P_59P_tripDelay.out" as Connection51
                    
                    
                    connect Goto3 "CT_primary.out" as Connection52
                    
                    
                    connect Goto4 Junction1 as Connection56
                    
                    
                    connect "Initial_condition" "Initial_status.out" as Connection53
                    
                    
                    connect "Islanded_param.VRMSLL" Junction2 as Connection62
                    
                    
                    connect "Islanded_param.27P_59P_tripDelay" Junction3 as Connection65
                    
                    
                    connect "Islanded_param.CT_primary" Junction4 as Connection68
                    
                    
                    connect Junction1 "VRMSLL.out" as Connection55
                    
                    
                    connect Junction2 "Grid_Tied_param.VRMSLL" as Connection61
                    
                    
                    connect Junction3 "Grid_Tied_param.27P_59P_tripDelay" as Connection64
                    
                    
                    connect Junction4 "Grid_Tied_param.CT_primary" as Connection67
                    
                    
                    connect "Reset.op_mode in" "Bus Split1.out" as Connection76
                    
                    
                    connect "Reset.op_mode" "op_mode" as Connection43
                    
                    
                    connect "Reset.reset" reset as Connection44
                    
                    
                    connect "Signal switch1.in1" "Grid_Tied_param.relay_param" as Connection73
                    
                    
                    connect "Signal switch1.in" "Islanded_param.relay_param" as Connection72
                    
                    
                    connect "relay_param" "Signal switch1.out" as Connection74
                    
                    
                    connect "relay_paramR25" "Bus Join1.out" as Connection50
                    
                    
            
                    
                }
                [
                    position = 8344, 7976
                    size = 168, 160
                ]
                
                component Subsystem "R50512761" {
                    layout = dynamic
            
                    
                    component gen_digital_probe "R51" {
                        
            	    
                    }
                    [
                        position = 8032, 7912
                    ]
                    
                    component gen_digital_probe "R27" {
                        
            	    
                    }
                    [
                        position = 8032, 8016
                    ]
                    
                    component gen_digital_probe "R50" {
                        
            	    
                    }
                    [
                        position = 8032, 7808
                    ]
                    
                    component gen_c_function "Relays" {
                        
                        global_variables = "real R50;real R51;real R27;real R59;real n50;real n51;real n59;real n27;real t59;real t50;real t51;real bool_27;real t27;real bool_59;uint i;real bool_51;real bool_50;real A;real B;real P;real Ipu50;real Ipu51;real CT_tap;real ratio[3];real M[3];real t51s[3];real Iinst[3];real Irms[3];real Vrms[3];"
                        in_terminal_properties = "real enable;inherit Ts;inherit Reset;inherit IinstA;inherit IinstB;inherit IinstC;inherit IrmsA;inherit IrmsB;inherit IrmsC;inherit VrmsA;inherit VrmsB;inherit VrmsC;inherit VRMSLN;inherit CT_p;inherit IOC_pickup;inherit IOC_tripDelay;inherit TOC_pickup;inherit curveType;inherit timeDial;inherit UV_pickup;inherit OV_pickup;inherit UVOV_tripDelay;"
                        init_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                R50=0;
                                                                                                                                                                                                                                                R51=0;
                                                                                                                                                                                                                                                R27=0;
                                                                                                                                                                                                                                                R59=0;
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                n50=0;
                                                                                                                                                                                                                                                n51=0;
                                                                                                                                                                                                                                                n59=0;
                                                                                                                                                                                                                                                n27=0;
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                CT_tap = 1.0;
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                A = 5.67;
                                                                                                                                                                                                                                                B = 0.0352;
                                                                                                                                                                                                                                                P = 2.0;
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                t59 = 0;
                                                                                                                                                                                                                                                t50 = 0;
                                                                                                                                                                                                                                                t51 = 0;
                                                                                                                                                                                                                                                t27 = 0;
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                bool_27 = 0;
                                                                                                                                                                                                                                                bool_59 = 0;
                                                                                                                                                                                                                                                bool_51 = 0;
                                                                                                                                                                                                                                                bool_50 = 0;
                                                                                                                                                                                                                                                /*End code section*/"
                        no_feed_inputs = "[u'']"
                        no_feed_outputs = "[u'']"
                        out_terminal_properties = "real trip50;real trip51;real trip27;real trip59;"
                        output_fnc = "/*Begin code section*/
                                                                                                                                                                                                                                                Iinst[0] = fabs(IinstA);
                                                                                                                                                                                                                                                Iinst[1] = fabs(IinstB);
                                                                                                                                                                                                                                                Iinst[2] = fabs(IinstC);
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                Irms[0] = IrmsA;
                                                                                                                                                                                                                                                Irms[1] = IrmsB;
                                                                                                                                                                                                                                                Irms[2] = IrmsC;
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                Vrms[0] = VrmsA;
                                                                                                                                                                                                                                                Vrms[1] = VrmsB;
                                                                                                                                                                                                                                                Vrms[2] = VrmsC;
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                if (Reset==1) {
                                                                                                                                                                                                                                                    R50=0;
                                                                                                                                                                                                                                                    R51=0;
                                                                                                                                                                                                                                                    R59=0;
                                                                                                                                                                                                                                                    R27=0;
                                                                                                                                                                                                                                                    bool_50 = 0.0;
                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                for(i=0; i<3; i++){
                                                                                                                                                                                                                                                    Iinst[i] = Iinst[i]*5.0/CT_p;
                                                                                                                                                                                                                                                    Irms[i] = Irms[i]*5.0/CT_p;
                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                if(curveType==1){
                                                                                                                                                                                                                                                    A = 0.0104;
                                                                                                                                                                                                                                                    B = 0.0226;
                                                                                                                                                                                                                                                    P = 0.02;
                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                else if(curveType==2){
                                                                                                                                                                                                                                                    A = 5.95;
                                                                                                                                                                                                                                                    B = 0.180;
                                                                                                                                                                                                                                                    P = 2.0;
                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                else if(curveType==3){
                                                                                                                                                                                                                                                    A = 3.88;
                                                                                                                                                                                                                                                    B = 0.0923;
                                                                                                                                                                                                                                                    P = 2.0;
                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                else{
                                                                                                                                                                                                                                                    A = 5.67;
                                                                                                                                                                                                                                                    B = 0.0352;
                                                                                                                                                                                                                                                    P = 2.0;
                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                if (!((R50 == 1) || (R51 == 1))&&(enable==1)){
                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                    if((UV_pickup>1)||(UV_pickup==0)){
                                                                                                                                                                                                                                                        UV_pickup = 0.9;
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                    if((OV_pickup<1)||(OV_pickup==0)){
                                                                                                                                                                                                                                                        OV_pickup = 1.1;
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                    Ipu50 = IOC_pickup*CT_tap*sqrt(2.0);
                                                                                                                                                                                                                                                    Ipu51 = TOC_pickup*CT_tap;
                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                    for(i=0; i<3; i++){
                                                                                                                                                                                                                                                        ratio[i] = Vrms[i]/VRMSLN;
                                                                                                                                                                                                                                                        M[i] = Irms[i]/Ipu51;
                                                                                                                                                                                                                                                        if(M[i]<=1.0){
                                                                                                                                                                                                                                                            t51s[i] = 1e6;
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                        else{
                                                                                                                                                                                                                                                            t51s[i] = timeDial*(B+(A/(pow(M[i],P)-1)));
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                    t27 = 0.004167 + UVOV_tripDelay;
                                                                                                                                                                                                                                                    t50 = 0.004167 + IOC_tripDelay;
                                                                                                                                                                                                                                                    t59 = 0.004167 + UVOV_tripDelay;
                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                    if((t51s[0]<=t51s[1])&&(t51s[0]<=t51s[2])){
                                                                                                                                                                                                                                                        t51 = t51s[0];
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                    else if(t51s[1]<=t51s[2]){
                                                                                                                                                                                                                                                        t51 = t51s[1];
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                    else{
                                                                                                                                                                                                                                                        t51 = t51s[2];
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                    for(i=0; i<3; i++){
                                                                                                                                                                                                                                                        if(ratio[i]<=UV_pickup){
                                                                                                                                                                                                                                                            bool_27 = 1;
                                                                                                                                                                                                                                                            break;
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                        else{
                                                                                                                                                                                                                                                            bool_27 = 0;
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                    for(i=0; i<3; i++){
                                                                                                                                                                                                                                                        if(Irms[i]>Ipu51){
                                                                                                                                                                                                                                                            bool_51 = 1;
                                                                                                                                                                                                                                                            break;
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                        else{
                                                                                                                                                                                                                                                            bool_51 = 0;
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                    for(i=0; i<3; i++){
                                                                                                                                                                                                                                                        if(Iinst[i]>Ipu50){
                                                                                                                                                                                                                                                            bool_50 = 1;
                                                                                                                                                                                                                                                            break;
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                    for(i=0; i<3; i++){
                                                                                                                                                                                                                                                        if(ratio[i]>=OV_pickup){
                                                                                                                                                                                                                                                            bool_59 = 1;
                                                                                                                                                                                                                                                            break;
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                        else{
                                                                                                                                                                                                                                                            bool_59 = 0;
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                    //bool_27 = ((ratio[0]<=UV_pickup)+(ratio[1]<=UV_pickup)+(ratio[2]<=UV_pickup))>0;
                                                                                                                                                                                                                                                    //bool_59 = ((ratio[0]>=OV_pickup)+(ratio[1]>=OV_pickup)+(ratio[2]>=OV_pickup))>0;
                                                                                                                                                                                                                                                    //bool_50 = ((Iinst[0]>Ipu50)+(Iinst[1]>Ipu50)+(Iinst[2]>Ipu50))>0;
                                                                                                                                                                                                                                                    //bool_51 = ((Irms[0]>Ipu51)+(Irms[1]>Ipu51)+(Irms[2]>Ipu51))>0;
                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                    n50 *= bool_50;
                                                                                                                                                                                                                                                    n51 *= bool_51;
                                                                                                                                                                                                                                                    n27 *= bool_27;
                                                                                                                                                                                                                                                    n59 *= bool_59;
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                    n50 += bool_50  * Ts;
                                                                                                                                                                                                                                                    n51 += bool_51  * Ts;
                                                                                                                                                                                                                                                    n27 += bool_27  * Ts;
                                                                                                                                                                                                                                                    n59 += bool_59  * Ts;
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                    if(n50 > t50)
                                                                                                                                                                                                                                                        R50 = 1;
                                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                                        R50 = 0;
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                    if(n51 > t51)
                                                                                                                                                                                                                                                        R51 = 1;
                                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                                        R51 = 0;
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                    if(n27 > t27)
                                                                                                                                                                                                                                                        R27 = 1;
                                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                                        R27 = 0;
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                    if(n59 > t59)
                                                                                                                                                                                                                                                        R59 = 1;
                                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                                        R59 = 0;
                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                trip50 = R50;
                                                                                                                                                                                                                                                trip51 = R51;
                                                                                                                                                                                                                                                trip27 = R27;
                                                                                                                                                                                                                                                trip59 = R59;
                                                                                                                                                                                                                                                /*End code section*/"
            	    
                    }
                    [
                        position = 7784, 8008
                    ]
                    
                    component gen_digital_probe "R59" {
                        
            	    
                    }
                    [
                        position = 8032, 8120
                    ]
                    
                    component gen_bus_split "Bus Split1" {
                        
                        outputs = "10"
            	    
                    }
                    [
                        position = 7560, 8248
                        rotation = left
                    ]
                    
                    component src_constant "Ts" {
                        
                        execution_rate = "Ts"
                        value = "Ts"
            	    
                    }
                    [
                        position = 7696, 7712
                        rotation = right
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "trip_50" {
                        label = "trip_50"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7984, 7848
                        size = 25, 25
                    ]
                    port "trip_51" {
                        label = "trip_51"
                        
                        position = right:2
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7984, 7952
                        size = 25, 25
                    ]
                    port "trip_59" {
                        label = "trip_59"
                        
                        position = right:4
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7984, 8160
                        size = 25, 25
                    ]
                    port "trip_27" {
                        label = "trip_27"
                        
                        position = right:3
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7984, 8056
                        size = 25, 25
                    ]
                    port "relay_param" {
                        label = "Relay Param"
                        
                        position = left:12
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7560, 8328
                        rotation = left
                        size = 25, 25
                    ]
                    port "Irms_c" {
                        label = "Irms_c"
                        
                        position = left:8
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7368, 7752
                        rotation = right
                        size = 25, 25
                    ]
                    port "Irms_a" {
                        label = "Irms_a"
                        
                        position = left:6
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7472, 7752
                        rotation = right
                        size = 25, 25
                    ]
                    port "Enable" {
                        label = "Enable"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7736, 7752
                        rotation = right
                        size = 25, 25
                    ]
                    port "Iinst_a" {
                        label = "Iinst_a"
                        
                        position = left:3
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7608, 7712
                        rotation = right
                        size = 25, 25
                    ]
                    port "Irms_b" {
                        label = "Irms_b"
                        
                        position = left:7
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7424, 7712
                        rotation = right
                        size = 25, 25
                    ]
                    port "Iinst_b" {
                        label = "Iinst_b"
                        
                        position = left:4
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7568, 7752
                        rotation = right
                        size = 25, 25
                    ]
                    port "Reset" {
                        label = "Reset"
                        
                        position = left:2
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7656, 7752
                        rotation = right
                        size = 25, 25
                    ]
                    port "Iinst_c" {
                        label = "Iinst_c"
                        
                        position = left:5
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7520, 7712
                        rotation = right
                        size = 25, 25
                    ]
                    port "Vrms_b" {
                        label = "Vrms_b"
                        
                        position = left:10
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7256, 7752
                        rotation = right
                        size = 25, 25
                    ]
                    port "Vrms_c" {
                        label = "Vrms_c"
                        
                        position = left:11
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7200, 7712
                        rotation = right
                        size = 25, 25
                    ]
                    port "Vrms_a" {
                        label = "Vrms_a"
                        
                        position = left:9
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7312, 7712
                        rotation = right
                        size = 25, 25
                    ]
                    
                    comment Comment1 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">In bus split:</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out = VRMSLN</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out1 = CT_p</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out2 = IOC_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out3 = IOC_tripDelay</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out4 = TOC_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out5 = curveType</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out6 = timeDial</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out7 = UV_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out8 = OV_pickup</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">out9 = UVOV_tripDelay</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>             ENDCOMMENT 
                    [
                        position = 7728, 8224
                    ]
                    
                    junction "Junction1" sp
                    [
                        position = 7936, 7848
                    ]
                    
                    junction "Junction2" sp
                    [
                        position = 7936, 7952
                    ]
                    
                    junction "Junction3" sp
                    [
                        position = 7936, 8056
                    ]
                    
                    junction "Junction4" sp
                    [
                        position = 7936, 8160
                    ]
                    
                    connect "Bus Split1.out5" "Relays.curveType" as Connection41
                    
                    
                    connect "Bus Split1.out6" "Relays.timeDial" as Connection40
                    
                    
                    connect "Bus Split1.out2" "Relays.IOC_pickup" as Connection44
                    
                    
                    connect "Bus Split1.out7" "Relays.UV_pickup" as Connection39
                    
                    
                    connect "Bus Split1.out1" "Relays.CT_p" as Connection45
                    
                    
                    connect "Bus Split1.out4" "Relays.TOC_pickup" as Connection42
                    
                    
                    connect "Bus Split1.out8" "Relays.OV_pickup" as Connection38
                    
                    
                    connect "Bus Split1.out" "Relays.VRMSLN" as Connection46
                    
                    
                    connect "Bus Split1.out3" "Relays.IOC_tripDelay" as Connection43
                    
                    
                    connect "Bus Split1.out9" "Relays.UVOV_tripDelay" as Connection37
                    
                    
                    connect "Bus Split1.in" "relay_param" as Connection36
                    
                    
                    connect Enable "Relays.enable" as Connection47
                    
                    
                    connect "Iinst_a" "Relays.IinstA" as Connection50
                    
                    
                    connect "Iinst_b" "Relays.IinstB" as Connection51
                    
                    
                    connect "Iinst_c" "Relays.IinstC" as Connection52
                    
                    
                    connect "Irms_a" "Relays.IrmsA" as Connection53
                    
                    
                    connect "Irms_b" "Relays.IrmsB" as Connection54
                    
                    
                    connect "Irms_c" "Relays.IrmsC" as Connection55
                    
                    
                    connect Junction1 "trip_50" as Connection64
                    
                    
                    connect Junction2 "Relays.trip51" as Connection67
                    
                    
                    connect Junction3 "Relays.trip27" as Connection70
                    
                    
                    connect Junction4 "trip_59" as Connection73
                    
                    
                    connect "R27.in" Junction3 as Connection71
                    
                    
                    connect "R50.in" Junction1 as Connection65
                    
                    
                    connect "R51.in" Junction2 as Connection68
                    
                    
                    connect "R59.in" Junction4 as Connection74
                    
                    
                    connect "Relays.trip50" Junction1 as Connection63
                    
                    
                    connect "Relays.trip59" Junction4 as Connection72
                    
                    
                    connect Reset "Relays.Reset" as Connection49
                    
                    
                    connect "Ts.out" "Relays.Ts" as Connection48
                    
                    
                    connect "Vrms_a" "Relays.VrmsA" as Connection56
                    
                    
                    connect "Vrms_b" "Relays.VrmsB" as Connection57
                    
                    
                    connect "Vrms_c" "Relays.VrmsC" as Connection58
                    
                    
                    connect "trip_27" Junction3 as Connection69
                    
                    
                    connect "trip_51" Junction2 as Connection66
                    
                    
            
                    
                }
                [
                    position = 8424, 8328
                    size = 144, 304
                ]
                
                component Subsystem "State Condition Mng" {
                    layout = dynamic
            
                    
                    component gen_logic_op "not1" {
                        
                        operator = "NOT"
            	    
                    }
                    [
                        position = 8032, 8264
                    ]
                    
                    component gen_terminator "Termination1" {
                        
            	    
                    }
                    [
                        position = 8200, 8336
                        scale = 1, -1
                    ]
                    
                    component gen_logic_op "not" {
                        
                        operator = "NOT"
            	    
                    }
                    [
                        position = 7840, 8200
                    ]
                    
                    component gen_sr_ff "SR Flip Flop1" {
                        
            	    
                    }
                    [
                        position = 8120, 8352
                        scale = 1, -1
                    ]
                    
                    component gen_digital_probe "trip" {
                        
            	    
                    }
                    [
                        position = 8528, 8272
                    ]
                    
                    component gen_c_function "Trip_out mng fnc" {
                        
                        in_terminal_properties = "real bool_R25;inherit op_mode_in;inherit trip_in;inherit enable;inherit initial_condition;inherit activate_logic;"
                        init_fnc = "/*Begin code section*/
                                                                                                                                                                                                                            trip_out = initial_condition;
                                                                                                                                                                                                                            /*End code section*/"
                        no_feed_inputs = "[u'']"
                        no_feed_outputs = "[u'']"
                        out_terminal_properties = "real trip_out;"
                        output_fnc = "/*Begin code section*/
                                                                                                                                                                                                                            if(enable && activate_logic){
                                                                                                                                                                                                                                if(op_mode_in==0){
                                                                                                                                                                                                                                    trip_out = trip_in*bool_R25;
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                else if(op_mode_in==1){
                                                                                                                                                                                                                                    trip_out = 1*bool_R25;
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                else if(op_mode_in==2){
                                                                                                                                                                                                                                    trip_out=0;
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                            /*End code section*/"
            	    
                    }
                    [
                        position = 8424, 8208
                    ]
                    
                    component Subsystem "detect_change" {
                        layout = dynamic
                
                        
                        component tm_delay "Unit Delay1" {
                            
                	    
                        }
                        [
                            position = 8144, 8200
                        ]
                        
                        component gen_rel_op "Relational operator1" {
                            
                            relational_op = "!="
                	    
                        }
                        [
                            position = 8240, 8192
                        ]
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        port "Out1" {
                            label = "Out"
                            
                            position = right:1
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8304, 8192
                            size = 25, 25
                        ]
                        port "In3" {
                            label = "In"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8032, 8200
                            size = 25, 25
                        ]
                        
                        junction "Junction1" sp
                        [
                            position = 8080, 8200
                            size = 0, 0
                        ]
                        
                        connect Junction1 In3 as Connection1
                        
                        
                        connect "Relational operator1.in" Junction1 as Connection2
                        
                        
                        connect "Relational operator1.out" Out1 as Connection3
                        
                        
                        connect "Unit Delay1.in" Junction1 as Connection4
                        
                        
                        connect "Unit Delay1.out" "Relational operator1.in1" as Connection5
                        
                        
                
                        
                    }
                    [
                        position = 7960, 8368
                        size = 48, 48
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "Trip_in" {
                        label = "Trip_in"
                        
                        position = left:3
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7768, 8200
                    ]
                    port "R25" {
                        label = "R25"
                        
                        position = left:2
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8232, 8128
                    ]
                    port "op_mode" {
                        label = "op_mode"
                        
                        position = left:2
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8272, 8160
                    ]
                    port "trip_out" {
                        label = "trip_out"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8536, 8208
                    ]
                    port "enable" {
                        label = "enable"
                        
                        position = left:5
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7952, 8264
                    ]
                    port "initial_condition" {
                        label = "initial_condition"
                        
                        position = left:4
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8248, 8232
                    ]
                    
                    junction "Junction2" sp
                    [
                        position = 7984, 8264
                    ]
                    
                    junction "Junction3" sp
                    [
                        position = 7904, 8200
                    ]
                    
                    junction "Junction4" sp
                    [
                        position = 8472, 8208
                    ]
                    
                    connect Junction2 enable as Connection150
                    
                    
                    connect Junction3 "not.out" as Connection158
                    
                    
                    connect Junction4 "Trip_out mng fnc.trip_out" as Connection165
                    
                    
                    connect R25 "Trip_out mng fnc.bool_R25" as Connection144
                    
                    
                    connect "SR Flip Flop1.r_in" "not1.out" as Connection136
                    
                    
                    connect "Termination1.in" "SR Flip Flop1.out_n" as Connection138
                    
                    
                    connect "Trip_out mng fnc.enable" Junction2 as Connection151
                    
                    
                    connect "Trip_out mng fnc.trip_in" Junction3 as Connection157
                    
                    
                    connect "Trip_out mng fnc.activate_logic" "SR Flip Flop1.out" as Connection154
                    
                    
                    connect "detect_change.In3" Junction3 as Connection159
                    
                    
                    connect "detect_change.Out1" "SR Flip Flop1.s_in" as Connection156
                    
                    
                    connect "initial_condition" "Trip_out mng fnc.initial_condition" as Connection152
                    
                    
                    connect "not.in" "Trip_in" as Connection139
                    
                    
                    connect "not1.in" Junction2 as Connection149
                    
                    
                    connect "op_mode" "Trip_out mng fnc.op_mode_in" as Connection145
                    
                    
                    connect "trip.in" Junction4 as Connection166
                    
                    
                    connect "trip_out" Junction4 as Connection164
                    
                    
            
                    
                }
                [
                    position = 9336, 8056
                    size = 128, 136
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                tag "From30" {
                    value = "exp_imp"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9024, 8408
                ]
                
                tag "From20" {
                    value = "Ia"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8160, 8240
                ]
                
                tag "From33" {
                    value = "initial_condition"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9120, 8080
                ]
                
                tag "From34" {
                    value = "relay_paramR25"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8760, 7896
                ]
                
                tag "Goto3" {
                    value = "R27"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8608, 8336
                ]
                
                tag "From15" {
                    value = "Vline_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8528, 7728
                ]
                
                tag "Goto19" {
                    value = "Ic_rms"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7120, 7832
                    rotation = left
                ]
                
                tag "From1" {
                    value = "R25"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7600, 8280
                    rotation = right
                ]
                
                tag "Goto5" {
                    value = "R25"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 9088, 7752
                ]
                
                tag "Goto14" {
                    value = "Ia"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 6712, 7784
                ]
                
                tag "From22" {
                    value = "Ic"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8160, 8288
                ]
                
                tag "From21" {
                    value = "Ib"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8232, 8264
                ]
                
                tag "From11" {
                    value = "R27"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8880, 8256
                ]
                
                tag "From13" {
                    value = "Reset"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8952, 8320
                ]
                
                tag "From25" {
                    value = "Ic_rms"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8232, 8360
                ]
                
                tag "From18" {
                    value = "bus_wt"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8608, 7800
                ]
                
                tag "From28" {
                    value = "Va_rms"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8160, 8384
                ]
                
                tag "From24" {
                    value = "Ia_rms"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8232, 8312
                ]
                
                tag "From36" {
                    value = "Reset"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8232, 8216
                ]
                
                tag "Goto13" {
                    value = "line_wt"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7296, 8288
                ]
                
                tag "From32" {
                    value = "enable"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9200, 8104
                ]
                
                tag "Goto4" {
                    value = "R59"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8608, 8424
                ]
                
                tag "From29" {
                    value = "op_mode"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9200, 8032
                ]
                
                tag "Goto28" {
                    value = "relay_param"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8496, 7928
                    scale = 1, -1
                ]
                
                tag "Goto12" {
                    value = "bus_wt"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7224, 8256
                ]
                
                tag "From10" {
                    value = "R50"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8952, 8272
                ]
                
                tag "Goto16" {
                    value = "Ic"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 6712, 7928
                ]
                
                tag "Goto1" {
                    value = "R50"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8608, 8160
                ]
                
                tag "Goto8" {
                    value = "Vline_a"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 6744, 8216
                ]
                
                tag "From6" {
                    value = "trip_cmd"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7584, 8560
                    rotation = right
                ]
                
                tag "Goto6" {
                    value = "trip_cmd"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 9640, 8096
                ]
                
                tag "Goto23" {
                    value = "op_mode"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8576, 8000
                    scale = 1, -1
                ]
                
                tag "Goto10" {
                    value = "line_freq"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7120, 8272
                ]
                
                tag "From4" {
                    value = "R27"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7448, 8464
                ]
                
                tag "From2" {
                    value = "R50"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7480, 8288
                ]
                
                tag "Goto2" {
                    value = "R51"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8608, 8248
                ]
                
                tag "Goto20" {
                    value = "Vb_rms"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7232, 7760
                    rotation = left
                ]
                
                tag "From8" {
                    value = "R59"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9104, 8304
                ]
                
                tag "From14" {
                    value = "Va"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8608, 7704
                ]
                
                tag "Goto26" {
                    value = "enable"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8296, 8152
                ]
                
                tag "Goto7" {
                    value = "Reset"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8496, 8024
                    scale = 1, -1
                ]
                
                tag "From7" {
                    value = "trip_cmd"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9072, 8224
                    rotation = down
                    scale = -1, -1
                ]
                
                tag "Goto29" {
                    value = "relay_paramR25"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8576, 7952
                    scale = 1, -1
                ]
                
                tag "From35" {
                    value = "relay_param"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8232, 8456
                ]
                
                tag "From23" {
                    value = "Ib_rms"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8160, 8336
                ]
                
                tag "From3" {
                    value = "R51"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7392, 8384
                ]
                
                tag "From9" {
                    value = "R25"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8992, 8240
                    rotation = down
                    scale = -1, 1
                ]
                
                tag "Goto27" {
                    value = "initial_condition"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8496, 7976
                    scale = 1, -1
                ]
                
                tag "From12" {
                    value = "R51"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9032, 8288
                ]
                
                tag "From26" {
                    value = "Vc_rms"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8160, 8432
                ]
                
                tag "Goto24" {
                    value = "lag_lead"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7216, 8304
                ]
                
                tag "From27" {
                    value = "Vb_rms"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8232, 8408
                ]
                
                tag "Goto9" {
                    value = "Va"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 6744, 8000
                ]
                
                tag "From37" {
                    value = "op_mode"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8760, 7848
                ]
                
                tag "From19" {
                    value = "line_wt"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8528, 7824
                ]
                
                tag "Goto11" {
                    value = "bus_freq"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7376, 8256
                ]
                
                tag "Goto17" {
                    value = "Ib_rms"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7104, 7760
                    rotation = left
                ]
                
                tag "From16" {
                    value = "line_freq"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8528, 7776
                ]
                
                tag "Goto25" {
                    value = "exp_imp"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7120, 8320
                ]
                
                tag "Goto21" {
                    value = "Va_rms"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7216, 7688
                    rotation = left
                ]
                
                tag "From17" {
                    value = "bus_freq"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8608, 7752
                ]
                
                tag "From5" {
                    value = "R59"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7520, 8504
                ]
                
                tag "Goto15" {
                    value = "Ib"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 6712, 7856
                ]
                
                tag "From31" {
                    value = "lag_lead"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9096, 8424
                ]
                
                tag "Goto18" {
                    value = "Ia_rms"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7088, 7688
                    rotation = left
                ]
                
                tag "Goto22" {
                    value = "Vc_rms"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7248, 7832
                    rotation = left
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "OUTPUT" {
                    label = "OUTPUT"
                    
                    position = bottom:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 9704, 8056
                    size = 25, 25
                ]
                port "Ia" {
                    label = "Ia"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 7816
                    size = 25, 25
                ]
                port "Ib" {
                    label = "Ib"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 7888
                    size = 25, 25
                ]
                port "Ic" {
                    label = "Ic"
                    
                    position = left:3
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 7960
                    size = 25, 25
                ]
                port "Va" {
                    label = "Va"
                    
                    position = left:4
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 8032
                    size = 25, 25
                ]
                port "Vb" {
                    label = "Vb"
                    
                    position = left:5
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 8104
                    size = 25, 25
                ]
                port "Vc" {
                    label = "Vc"
                    
                    position = left:6
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 8176
                    size = 25, 25
                ]
                port "Vline_a" {
                    label = "Vline_A"
                    
                    position = left:7
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 8248
                    size = 25, 25
                ]
                port "faults_status" {
                    label = "Fault_status"
                    
                    position = right:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 9304, 8272
                    size = 25, 25
                ]
                port "TO_MODBUS" {
                    label = "To_Modbus"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8024, 8080
                    size = 25, 25
                ]
                port "Vline_b" {
                    label = "Vline_B"
                    
                    position = left:8
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 8320
                    size = 25, 25
                ]
                port "Vline_c" {
                    label = "Vline_C"
                    
                    position = left:9
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6592, 8392
                    size = 25, 25
                ]
                port "cb_state" {
                    label = "cb_state"
                    
                    position = left:10
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7312, 8624
                    size = 25, 25
                ]
                port "pf_states" {
                    label = "pf_state"
                    
                    position = right:3
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 9304, 8416
                    scale = 1, -1
                    size = 25, 25
                ]
                port "from_Modbus" {
                    label = "From Modbus"
                    
                    position = right:4
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8144, 7976
                    size = 25, 25
                ]
                
                comment Comment2 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">52A</p></body></html>                    ENDCOMMENT 
                [
                    position = 7400, 8568
                ]
                
                comment Comment4 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Status</p></body></html>                    ENDCOMMENT 
                [
                    position = 9336, 8256
                ]
                
                comment Comment3 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">52B</p></body></html>                    ENDCOMMENT 
                [
                    position = 7432, 8720
                ]
                
                comment Comment5 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">pf_states </p></body></html>                   ENDCOMMENT 
                [
                    position = 9336, 8400
                ]
                
                junction "Junction51" sp
                [
                    position = 8720, 8056
                    size = 0, 0
                ]
                
                junction "Junction100" sp
                [
                    position = 8536, 8192
                ]
                
                junction "Junction101" sp
                [
                    position = 8536, 8280
                ]
                
                junction "Junction104" sp
                [
                    position = 9016, 7800
                ]
                
                junction "Junction105" sp
                [
                    position = 9584, 8056
                ]
                
                junction "Junction106" sp
                [
                    position = 7368, 8624
                ]
                
                junction "Junction108" sp
                [
                    position = 6688, 8248
                ]
                
                junction "Junction109" sp
                [
                    position = 6696, 8032
                ]
                
                junction "Junction110" sp
                [
                    position = 7304, 8240
                ]
                
                junction "Junction111" sp
                [
                    position = 6640, 7816
                ]
                
                junction "Junction112" sp
                [
                    position = 6640, 7888
                ]
                
                junction "Junction113" sp
                [
                    position = 6640, 7960
                ]
                
                junction "Junction114" sp
                [
                    position = 7088, 7984
                ]
                
                junction "Junction115" sp
                [
                    position = 7104, 8000
                ]
                
                junction "Junction116" sp
                [
                    position = 7120, 8016
                ]
                
                junction "Junction117" sp
                [
                    position = 7216, 8032
                ]
                
                junction "Junction118" sp
                [
                    position = 7232, 8048
                ]
                
                junction "Junction119" sp
                [
                    position = 7248, 8064
                ]
                
                junction "Junction120" sp
                [
                    position = 8536, 8368
                ]
                
                junction "Junction121" sp
                [
                    position = 8536, 8456
                ]
                
                junction "Junction122" sp
                [
                    position = 8240, 8192
                ]
                
                connect "Bus Join1.in3" "CALC FROM MEASUREMENTS.Ib_phase" as Connection132
                
                
                connect "Bus Join1.in19" "CALC FROM MEASUREMENTS.Q" as Connection142
                
                
                connect "Bus Join1.in13" "CALC FROM MEASUREMENTS.Va_phase" as Connection134
                
                
                connect "Bus Join1.in20" "CALC FROM MEASUREMENTS.S" as Connection144
                
                
                connect "Bus Join1.in17" "CALC FROM MEASUREMENTS.Vc_phase" as Connection140
                
                
                connect "Bus Join1.in18" "CALC FROM MEASUREMENTS.P" as Connection141
                
                
                connect "Bus Join1.in21" "CALC FROM MEASUREMENTS.pf" as Connection149
                
                
                connect "Bus Join1.in15" "CALC FROM MEASUREMENTS.Vb_phase" as Connection135
                
                
                connect "Bus Join1.in5" "CALC FROM MEASUREMENTS.Ic_phase" as Connection133
                
                
                connect "Bus Join1.in22" Junction110 as Connection240
                
                
                connect "Bus Join1.in6" Junction114 as Connection268
                
                
                connect "Bus Join1.in9" Junction117 as Connection283
                
                
                connect "Bus Join1.in10" Junction118 as Connection286
                
                
                connect "CALC FROM MEASUREMENTS.Ib_mag" "Bus Join1.in2" as Connection6
                
                
                connect "CALC FROM MEASUREMENTS.Ic_mag" "Bus Join1.in4" as Connection2
                
                
                connect "CALC FROM MEASUREMENTS.Va_mag" "Bus Join1.in12" as Connection3
                
                
                connect "CALC FROM MEASUREMENTS.Vc_mag" "Bus Join1.in16" as Connection4
                
                
                connect "CALC FROM MEASUREMENTS.Ia_phase" "Bus Join1.in1" as Connection131
                
                
                connect "CALC FROM MEASUREMENTS.Vb_mag" "Bus Join1.in14" as Connection1
                
                
                connect "CALC FROM MEASUREMENTS.Ia_mag" "Bus Join1.in" as Connection5
                
                
                connect "CALC FROM MEASUREMENTS.line_freq" Goto10 as Connection224
                
                
                connect "CALC FROM MEASUREMENTS.line_wt" Goto13 as Connection245
                
                
                connect "CALC FROM MEASUREMENTS.Vline_a" Junction108 as Connection217
                
                
                connect "CALC FROM MEASUREMENTS.Va" Junction109 as Connection218
                
                
                connect "CALC FROM MEASUREMENTS.Ia" Junction111 as Connection257
                
                
                connect "CALC FROM MEASUREMENTS.Ib" Junction112 as Connection256
                
                
                connect "CALC FROM MEASUREMENTS.Ic" Junction113 as Connection258
                
                
                connect "CALC FROM MEASUREMENTS.Ib_rms" Junction115 as Connection271
                
                
                connect "CALC FROM MEASUREMENTS.Ic_rms" Junction116 as Connection274
                
                
                connect "CALC FROM MEASUREMENTS.Vc_rms" Junction119 as Connection289
                
                
                connect From1 "Sum1.in" as Connection167
                
                
                connect From10 "bitwise_faults.R50" as Connection197
                
                
                connect From11 "bitwise_faults.R27" as Connection195
                
                
                connect From12 "bitwise_faults.R51" as Connection199
                
                
                connect From13 "bitwise_faults.Reset" as Connection210
                
                
                connect From14 "Relay 25-Sync Check1.Va" as Connection219
                
                
                connect From15 "Relay 25-Sync Check1.Vline_a" as Connection220
                
                
                connect From16 "Relay 25-Sync Check1.line_freq" as Connection225
                
                
                connect From17 "Relay 25-Sync Check1.bus_freq" as Connection238
                
                
                connect From18 "Relay 25-Sync Check1.bus_wt" as Connection244
                
                
                connect From19 "Relay 25-Sync Check1.line_wt" as Connection246
                
                
                connect From2 "Gain1.in" as Connection168
                
                
                connect From20 "R50512761.Iinst_a" as Connection336
                
                
                connect From21 "R50512761.Iinst_b" as Connection337
                
                
                connect From22 "R50512761.Iinst_c" as Connection338
                
                
                connect From23 "R50512761.Irms_b" as Connection340
                
                
                connect From24 "R50512761.Irms_a" as Connection339
                
                
                connect From25 "R50512761.Irms_c" as Connection341
                
                
                connect From26 "R50512761.Vrms_c" as Connection344
                
                
                connect From27 "R50512761.Vrms_b" as Connection343
                
                
                connect From28 "R50512761.Vrms_a" as Connection342
                
                
                connect From29 "State Condition Mng.op_mode" as Connection309
                
                
                connect From3 "Gain4.in" as Connection169
                
                
                connect From30 "pf bitwise.exp_imp" as Connection313
                
                
                connect From31 "pf bitwise.lag_lead" as Connection312
                
                
                connect From32 "State Condition Mng.enable" as Connection318
                
                
                connect From33 "State Condition Mng.initial_condition" as Connection319
                
                
                connect From34 "Relay 25-Sync Check1.relay_paramR25" as Connection320
                
                
                connect From35 "R50512761.relay_param" as Connection321
                
                
                connect From36 "R50512761.Reset" as Connection335
                
                
                connect From37 "Relay 25-Sync Check1.mode_in" as Connection334
                
                
                connect From4 "Gain5.in" as Connection171
                
                
                connect From5 "Gain6.in" as Connection173
                
                
                connect From7 "bitwise_faults.Status" as Connection203
                
                
                connect From8 "bitwise_faults.R59" as Connection201
                
                
                connect From9 "bitwise_faults.R25" as Connection193
                
                
                connect "Gain1.out" "Sum1.in1" as Connection21
                
                
                connect "Gain4.out" "Sum1.in2" as Connection170
                
                
                connect "Gain5.out" "Sum1.in3" as Connection172
                
                
                connect "Gain6.out" "Sum1.in4" as Connection174
                
                
                connect "Gain7.out" "Sum3.in1" as Connection180
                
                
                connect "Gain8.in" Junction106 as Connection186
                
                
                connect "Gain8.out" "Sum3.in2" as Connection183
                
                
                connect Goto1 Junction100 as Connection152
                
                
                connect Goto11 Junction110 as Connection242
                
                
                connect Goto12 "CALC FROM MEASUREMENTS.bus_wt" as Connection243
                
                
                connect Goto14 Junction111 as Connection249
                
                
                connect Goto15 Junction112 as Connection252
                
                
                connect Goto16 Junction113 as Connection255
                
                
                connect Goto17 Junction115 as Connection273
                
                
                connect Goto19 Junction116 as Connection276
                
                
                connect Goto2 Junction101 as Connection155
                
                
                connect Goto22 Junction119 as Connection367
                
                
                connect Goto23 "Relay_Param.op_mode" as Connection329
                
                
                connect Goto24 "CALC FROM MEASUREMENTS.Lag Lead" as Connection310
                
                
                connect Goto25 "CALC FROM MEASUREMENTS.Export Import" as Connection311
                
                
                connect Goto26 Junction122 as Connection351
                
                
                connect Goto27 "Relay_Param.Initial_condition" as Connection331
                
                
                connect Goto28 "Relay_Param.relay_param" as Connection333
                
                
                connect Goto29 "Relay_Param.relay_paramR25" as Connection332
                
                
                connect Goto4 Junction121 as Connection298
                
                
                connect Goto5 Junction104 as Connection164
                
                
                connect Goto6 Junction105 as Connection178
                
                
                connect Goto7 "Relay_Param.reset" as Connection330
                
                
                connect Goto8 Junction108 as Connection213
                
                
                connect Goto9 Junction109 as Connection216
                
                
                connect Ia Junction111 as Connection247
                
                
                connect Ib Junction112 as Connection250
                
                
                connect Ic Junction113 as Connection253
                
                
                connect Junction100 "Logical operator1.in" as Connection196
                
                
                connect Junction101 "Logical operator1.in1" as Connection198
                
                
                connect Junction101 "R50512761.trip_51" as Connection154
                
                
                connect Junction104 "State Condition Mng.R25" as Connection303
                
                
                connect Junction105 "Unit Delay4.out" as Connection202
                
                
                connect Junction106 "not.in" as Connection185
                
                
                connect Junction110 "CALC FROM MEASUREMENTS.bus_freq" as Connection241
                
                
                connect Junction114 "CALC FROM MEASUREMENTS.Ia_rms" as Connection269
                
                
                connect Junction114 Goto18 as Connection355
                
                
                connect Junction115 "Bus Join1.in7" as Connection272
                
                
                connect Junction116 "Bus Join1.in8" as Connection275
                
                
                connect Junction117 "CALC FROM MEASUREMENTS.Va_rms" as Connection284
                
                
                connect Junction117 Goto21 as Connection365
                
                
                connect Junction118 "CALC FROM MEASUREMENTS.Vb_rms" as Connection287
                
                
                connect Junction118 Goto20 as Connection366
                
                
                connect Junction119 "Bus Join1.in11" as Connection290
                
                
                connect Junction120 Goto3 as Connection296
                
                
                connect Junction121 "R50512761.trip_59" as Connection299
                
                
                connect Junction122 "R50512761.Enable" as Connection350
                
                
                connect Junction51 "State Condition Mng.Trip_in" as Connection302
                
                
                connect "Logical operator1.in2" Junction120 as Connection297
                
                
                connect "Logical operator1.in3" Junction121 as Connection300
                
                
                connect "Logical operator1.out" Junction51 as Connection79
                
                
                connect OUTPUT Junction105 as Connection176
                
                
                connect "R50512761.trip_50" Junction100 as Connection150
                
                
                connect "R50512761.trip_27" Junction120 as Connection295
                
                
                connect "Relay 25-Sync Check1.bool_R25" Junction104 as Connection162
                
                
                connect "Relay 25-Sync Check1.trip_or" Junction51 as Connection94
                
                
                connect "Sum3.in" From6 as Connection179
                
                
                connect "Sum3.out" "Unit Delay5.in" as Connection190
                
                
                connect "TO_MODBUS" "Bus Join1.out" as Connection101
                
                
                connect "Unit Delay2.out" "Bus Join1.in23" as Connection175
                
                
                connect "Unit Delay2.in" "Sum1.out" as Connection104
                
                
                connect "Unit Delay4.in" "State Condition Mng.trip_out" as Connection304
                
                
                connect "Unit Delay5.out" "Bus Join1.in24" as Connection191
                
                
                connect Va Junction109 as Connection214
                
                
                connect Vb "CALC FROM MEASUREMENTS.Vb" as Connection108
                
                
                connect Vc "CALC FROM MEASUREMENTS.Vc" as Connection109
                
                
                connect "Vline_a" Junction108 as Connection211
                
                
                connect "Vline_b" "CALC FROM MEASUREMENTS.Vline_b" as Connection111
                
                
                connect "Vline_c" "CALC FROM MEASUREMENTS.Vline_c" as Connection112
                
                
                connect "cb_state" Junction106 as Connection184
                
                
                connect "enable.out" Junction122 as Connection349
                
                
                connect "faults_status" "bitwise_faults.fault_status" as Connection368
                
                
                connect "from_Modbus" "Relay_Param.from_Modbus" as Connection328
                
                
                connect "not.out" "Gain7.in" as Connection181
                
                
                connect "pf bitwise.pf_states" "pf_states" as Connection369
                
                
        
                
                /*
                    Masks
                */
                mask {
                    description = "This block implements the relay SEL 787 with protective functions 25 (synchronism check), 27 (Under Voltage), 50 (Instantaneous Overcurrent), 51 (Time Overcurrent) and 59 (Overvoltage). 
                                                                                                                                    
                                                                                                                                    The relay outputs to Modbus are: 0 - Ia_mag; 1 - Ia_phase; 2 - Ib_mag; 3 - Ib_phase; 4 - Ic_mag; 5 - Ic_phase; 6 - Ia_rms; 7 - Ib_rms; 8 - Ic_rms; 9 - Va_rms; 10 - Vb_rms; 11 - Vc_rms; 12 - Va_mag; 13 - Va_phase; 14 - Vb_mag; 15 - Vb_phase; 16 - Vc_mag; 17 - Vc_phase; 18 - P; 19 - Q; 20 - S; 21 - pf; 22 - Bus_freq; 23 - protection functions status; 24 - Circuit Breaker status.
                                                                                                                                    
                                                                                                                                    The relay inputs from Modbus are: 2001 - op_mode; 2002 - Reset; 2003 - protection_mode.
                                                                                                                                    
                                                                                                                                    The trip pickups for functions 50 and 51 are defined as currents in the secondary of the current transformer. The secondary ot the CT has 5 turns."
                    
                    VRMSLL {
                        label = "Line to Line RMS voltage"
                        widget = edit
                        type = generic
                        default_value = "13800.0"
                        unit = "V"
                        group = "Base Parameters"
            	    
            	    
                    }
                    
                    dV_threshold {
                        label = "Voltage deviation threshold"
                        widget = edit
                        type = generic
                        default_value = "5.0"
                        unit = "%"
                        group = "Base Parameters"
            	    
            	    
                    }
                    
                    angle_threshold {
                        label = "Angle deviation threshold"
                        widget = edit
                        type = generic
                        default_value = "12.0"
                        unit = "degree"
                        group = "Base Parameters"
            	    
            	    
                    }
                    
                    dF_threshold {
                        label = "Frequency deviation threshold"
                        widget = edit
                        type = generic
                        default_value = "0.5"
                        unit = "Hz"
                        group = "Base Parameters"
            	    
            	    
                    }
                    
                    R27P_R59P_tripDelay {
                        label = "R27 UV and R59 OV trip delay"
                        widget = edit
                        type = generic
                        default_value = "0.5"
                        unit = "Sec"
                        group = "Base Parameters"
            	    
            	    
                    }
                    
                    CT_primary {
                        label = "CT primary turns number"
                        widget = edit
                        type = generic
                        default_value = "600"
                        group = "Base Parameters"
            	    
            	    
                    }
                    
                    Initial_status {
                        label = "Initial relay status"
                        widget = edit
                        type = generic
                        default_value = "1.0"
                        group = "Base Parameters"
            	    
            	    
                    }
                    
                    R50P_pickup1 {
                        label = "R50 IOC trip pickup 1"
                        widget = edit
                        type = generic
                        default_value = "20.0"
                        unit = "Amp sec"
                        group = "GridTied Parameters"
            	    
            	    
                    }
                    
                    R50P_tripDelay1 {
                        label = "R50 IOC trip delay 1"
                        widget = edit
                        type = generic
                        default_value = "0"
                        unit = "sec"
                        group = "GridTied Parameters"
            	    
            	    
                    }
                    
                    R51P_pickup1 {
                        label = "R51 TOC trip pickup 1"
                        widget = edit
                        type = generic
                        default_value = "0.8"
                        unit = "Amp sec"
                        group = "GridTied Parameters"
            	    
            	    
                    }
                    
                    R51P_curveType1 {
                        label = "R51 TOC curve type 1"
                        widget = edit
                        type = generic
                        default_value = "1.0"
                        group = "GridTied Parameters"
            	    
            	    
                    }
                    
                    R51P_timeDial1 {
                        label = "R51 TOC time dial 1"
                        widget = edit
                        type = generic
                        default_value = "1.0"
                        group = "GridTied Parameters"
            	    
            	    
                    }
                    
                    R27P_pickup1 {
                        label = "R27 UV trip pickup 1"
                        widget = edit
                        type = generic
                        default_value = "0.9"
                        unit = "pu"
                        group = "GridTied Parameters"
            	    
            	    
                    }
                    
                    R59P_pickup1 {
                        label = "R59 OV trip pickup 1"
                        widget = edit
                        type = generic
                        default_value = "1.1"
                        unit = "pu"
                        group = "GridTied Parameters"
            	    
            	    
                    }
                    
                    R50P_pickup2 {
                        label = "R50 IOC trip pickup 2"
                        widget = edit
                        type = generic
                        default_value = "20.0"
                        unit = "Amp sec"
                        group = "Islanded Parameters"
            	    
            	    
                    }
                    
                    R50P_tripDelay2 {
                        label = "R50 IOC trip delay 2"
                        widget = edit
                        type = generic
                        default_value = "1.0"
                        unit = "sec"
                        group = "Islanded Parameters"
            	    
            	    
                    }
                    
                    R51P_pickup2 {
                        label = "R51 TOC trip pickup 2"
                        widget = edit
                        type = generic
                        default_value = "0.7"
                        unit = "Amp sec"
                        group = "Islanded Parameters"
            	    
            	    
                    }
                    
                    R51P_curveType2 {
                        label = "R51 TOC curve type 2"
                        widget = edit
                        type = generic
                        default_value = "2.0"
                        group = "Islanded Parameters"
            	    
            	    
                    }
                    
                    R51P_timeDial2 {
                        label = "R51 TOC time dial 2"
                        widget = edit
                        type = generic
                        default_value = "3.0"
                        group = "Islanded Parameters"
            	    
            	    
                    }
                    
                    R27P_pickup2 {
                        label = "R27 UV trip pickup 2"
                        widget = edit
                        type = generic
                        default_value = "0.9"
                        unit = "pu"
                        group = "Islanded Parameters"
            	    
            	    
                    }
                    
                    R59P_pickup2 {
                        label = "R59 OV trip pickup 2"
                        widget = edit
                        type = generic
                        default_value = "1.1"
                        unit = "pu"
                        group = "Islanded Parameters"
            	    
            	    
                    }
                    
            	
                CODE component_open
                    from typhoon.apps.schematic_editor.dialogs.component_property_dialogs.general import RegularComponentPropertiesDialog
                
                    dialog = RegularComponentPropertiesDialog(
                        component=component,
                        property_container=component.masks[-1],
                        current_diagram=current_diagram
                    )
                    dialog.exec_()
                    
                ENDCODE
                }
            }
            [
                position = 7952, 8168
                size = 152, 240
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "Brk_cmd" {
                label = "Brk_cmd"
                
                position = bottom:1
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 7792, 8496
                rotation = right
                size = 25, 25
            ]
            port "IABC" {
                label = "IABC"
                
                position = left:3
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7792, 7936
            ]
            port "VABC_grid" {
                label = "VABC_grid"
                
                position = left:3
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7664, 7936
            ]
            port "VABC_load" {
                label = "VABC_load"
                
                position = right:1
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7536, 7936
            ]
            
            comment Comment1 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Reset:</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Reset the relay when input is 1</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Operation Mode:</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Op_mode == 1 force the breaker closed</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Op_mode == 0 turns on logic based operation</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Protection Mode:</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">protect_mode == 1 use islanded parameters</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">protect_mode == 0 use grid tied parameters</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>             ENDCOMMENT 
            [
                position = 7968, 8328
            ]
            
            junction "Junction1391" sp
            [
                position = 8120, 7928
            ]
            
            junction "Junction1392" sp
            [
                position = 8120, 7976
            ]
            
            junction "Junction1393" sp
            [
                position = 7952, 8344
            ]
            
            junction "Junction1396" sp
            [
                position = 7792, 8448
            ]
            
            junction "Junction1397" sp
            [
                position = 7648, 8344
            ]
            
            connect "Brk_cmd" Junction1396 as Connection899
            
            
            connect "Bus Split1.in" IABC as Connection907
            
            
            connect "Bus Split1.out" "SEL_787.Ia" as Connection908
            
            
            connect "Bus Split1.out1" "SEL_787.Ib" as Connection909
            
            
            connect "Bus Split1.out2" "SEL_787.Ic" as Connection910
            
            
            connect "Bus Split2.out2" "SEL_787.Vc" as Connection914
            
            
            connect "Bus Split2.out" "SEL_787.Va" as Connection912
            
            
            connect "Bus Split2.out1" "SEL_787.Vb" as Connection913
            
            
            connect "Bus Split3.out" "SEL_787.Vline_a" as Connection928
            
            
            connect "Bus Split3.out1" "SEL_787.Vline_b" as Connection929
            
            
            connect "Bus Split3.out2" "SEL_787.Vline_c" as Connection930
            
            
            connect "CB_state.in" Junction1397 as Connection905
            
            
            connect "Constant2.out" "Signal switch1.in1" as Connection880
            
            
            connect "Delay1.out" "Signal switch1.in" as Connection2
            
            
            connect Junction1391 "Constant1.out" as Connection852
            
            
            connect Junction1391 "ModBus Device1.coil_in" as Connection313
            
            
            connect Junction1392 Junction1391 as Connection314
            
            
            connect Junction1393 "Delay1.in" as Connection867
            
            
            connect Junction1396 "Signal switch1.out" as Connection902
            
            
            connect Junction1397 Junction1396 as Connection904
            
            
            connect "ModBus Device1.holding_in" Junction1392 as Connection466
            
            
            connect "ModBus Device1.discrete_in" Junction1392 as Connection467
            
            
            connect "ModBus Device1.holding_out" "SEL_787.from_Modbus" as Connection932
            
            
            connect "ModBus Device1.coil_out" "Term3.in" as Connection854
            
            
            connect "SEL_787.OUTPUT" Junction1393 as Connection868
            
            
            connect "SEL_787.cb_state" Junction1397 as Connection903
            
            
            connect "SEL_787.TO_MODBUS" "ModBus Device1.reg_in" as Connection931
            
            
            connect "SEL_787.pf_states" "Term4.in" as Connection897
            
            
            connect "Signal switch1.in2" Junction1393 as Connection866
            
            
            connect "Term5.in" "SEL_787.faults_status" as Connection870
            
            
            connect "VABC_grid" "Bus Split2.in" as Connection924
            
            
            connect "VABC_load" "Bus Split3.in" as Connection925
            
            
    
            
        }
        [
            position = 7016, 8696
            size = 136, 72
        ]
        
        component Subsystem "Ld2_meas" {
            layout = dynamic
    
            
            component msr_current "IA" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7312, 7928
            ]
            
            component msr_current "IC" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7480, 8120
            ]
            
            component msr_current "IB" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7392, 8024
            ]
            
            component msr_voltage "VB" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8280, 8280
                rotation = right
            ]
            
            component msr_voltage "VA" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8360, 8216
                rotation = right
            ]
            
            component pas_resistor "R65" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 8096, 8304
                rotation = right
            ]
            
            component pas_resistor "R63" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 7904, 8304
                rotation = right
            ]
            
            component gen_bus_join "Bus Join1" {
                
                inputs = "3"
    	    
            }
            [
                position = 8512, 8280
            ]
            
            component pas_resistor "R64" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 8000, 8304
                rotation = right
            ]
            
            component msr_voltage "VC" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8200, 8344
                rotation = right
            ]
            component "core/Voltage RMS" "VCrms"{
                
            }
            [
                position = 7584, 8320
                rotation = right
                size = 64, 32
            ]
            
            component "core/Current RMS" "ICrms"{
                
            }
            [
                position = 7208, 8120
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VBrms"{
                
            }
            [
                position = 7688, 8280
                rotation = right
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VArms"{
                
            }
            [
                position = 7784, 8208
                rotation = right
                size = 64, 32
            ]
            
            component "core/Current RMS" "IArms"{
                
            }
            [
                position = 7208, 7928
                size = 64, 32
            ]
            
            component "core/Current RMS" "IBrms"{
                
            }
            [
                position = 7208, 8024
                size = 64, 32
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            tag "Goto12" {
                value = "Ia_Ld1"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7536, 7760
                size = 60, 20
            ]
            
            tag "Goto11" {
                value = "Ic_Ld1"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7536, 7888
                size = 60, 20
            ]
            
            tag "Goto13" {
                value = "Ib_Ld1"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7536, 7824
                size = 60, 20
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "P1" {
                label = "a"
                
                position = right:2
                kind = pe
            }
            [
                position = 8432, 7928
                rotation = down
            ]
            port "P2" {
                label = "b"
                
                position = right:3
                kind = pe
            }
            [
                position = 8432, 8024
                rotation = down
            ]
            port "P3" {
                label = "c"
                
                position = right:4
                kind = pe
            }
            [
                position = 8432, 8120
                rotation = down
            ]
            port "P4" {
                label = "A"
                
                position = left:1
                kind = pe
            }
            [
                position = 7096, 7928
            ]
            port "P5" {
                label = "B"
                
                position = left:2
                kind = pe
            }
            [
                position = 7096, 8024
            ]
            port "P6" {
                label = "C"
                
                position = left:3
                kind = pe
            }
            [
                position = 7096, 8120
            ]
            port "Vabc" {
                label = "Vabc"
                
                position = top:1
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8592, 8280
            ]
            
            junction "Junction1421" pe
            [
                position = 8280, 8456
            ]
            
            junction "Junction1463" pe
            [
                position = 8200, 8456
            ]
            
            junction "Junction1464" pe
            [
                position = 8096, 8456
            ]
            
            junction "Junction1465" pe
            [
                position = 8000, 8456
            ]
            
            junction "Junction1466" pe
            [
                position = 8360, 7928
            ]
            
            junction "Junction1467" pe
            [
                position = 8280, 8024
            ]
            
            junction "Junction1468" pe
            [
                position = 8200, 8120
            ]
            
            junction "Junction1475" pe
            [
                position = 7904, 7928
            ]
            
            junction "Junction1476" pe
            [
                position = 8000, 8024
            ]
            
            junction "Junction1477" pe
            [
                position = 8096, 8120
            ]
            
            junction "Junction1479" pe
            [
                position = 7784, 8456
            ]
            
            junction "Junction1480" pe
            [
                position = 7904, 8456
            ]
            
            junction "Junction1481" pe
            [
                position = 7688, 8456
            ]
            
            junction "Junction1482" pe
            [
                position = 7584, 8120
            ]
            
            junction "Junction1483" pe
            [
                position = 7688, 8024
            ]
            
            junction "Junction1484" pe
            [
                position = 7784, 7928
            ]
            
            connect "Bus Join1.out" Vabc as Connection368
            
            
            connect Goto11 "IC.out" as Connection352
            
            
            connect Goto12 "IA.out" as Connection354
            
            
            connect Goto13 "IB.out" as Connection353
            
            
            connect "IA.n_node" Junction1484 as Connection363
            
            
            connect "IArms.n_node" "IA.p_node" as Connection340
            
            
            connect "IB.n_node" Junction1483 as Connection360
            
            
            connect "IBrms.n_node" "IB.p_node" as Connection341
            
            
            connect "IC.n_node" Junction1482 as Connection357
            
            
            connect "ICrms.n_node" "IC.p_node" as Connection342
            
            
            connect Junction1421 Junction1463 as Connection224
            
            
            connect Junction1463 "VC.n_node" as Connection225
            
            
            connect Junction1464 Junction1463 as Connection228
            
            
            connect Junction1465 Junction1464 as Connection231
            
            
            connect Junction1466 P1 as Connection299
            
            
            connect Junction1467 P2 as Connection301
            
            
            connect Junction1468 Junction1477 as Connection297
            
            
            connect Junction1468 P3 as Connection302
            
            
            connect Junction1475 Junction1466 as Connection292
            
            
            connect Junction1476 Junction1467 as Connection295
            
            
            connect Junction1476 Junction1483 as Connection358
            
            
            connect Junction1477 "R65.p_node" as Connection298
            
            
            connect Junction1479 Junction1480 as Connection313
            
            
            connect Junction1479 "VArms.n_node" as Connection310
            
            
            connect Junction1480 Junction1465 as Connection312
            
            
            connect Junction1481 Junction1479 as Connection315
            
            
            connect Junction1482 Junction1477 as Connection356
            
            
            connect Junction1483 "VBrms.p_node" as Connection359
            
            
            connect Junction1484 Junction1475 as Connection362
            
            
            connect P4 "IArms.p_node" as Connection364
            
            
            connect P5 "IBrms.p_node" as Connection365
            
            
            connect P6 "ICrms.p_node" as Connection366
            
            
            connect "R63.p_node" Junction1475 as Connection291
            
            
            connect "R63.n_node" Junction1480 as Connection311
            
            
            connect "R64.n_node" Junction1465 as Connection230
            
            
            connect "R64.p_node" Junction1476 as Connection294
            
            
            connect "R65.n_node" Junction1464 as Connection227
            
            
            connect "VA.out" "Bus Join1.in" as Connection369
            
            
            connect "VA.n_node" Junction1421 as Connection237
            
            
            connect "VA.p_node" Junction1466 as Connection240
            
            
            connect "VArms.p_node" Junction1484 as Connection361
            
            
            connect "VB.out" "Bus Join1.in1" as Connection367
            
            
            connect "VB.n_node" Junction1421 as Connection203
            
            
            connect "VB.p_node" Junction1467 as Connection243
            
            
            connect "VBrms.n_node" Junction1481 as Connection316
            
            
            connect "VC.out" "Bus Join1.in2" as Connection370
            
            
            connect "VC.p_node" Junction1468 as Connection246
            
            
            connect "VCrms.n_node" Junction1481 as Connection314
            
            
            connect "VCrms.p_node" Junction1482 as Connection355
            
            
    
            
        }
        [
            position = 7112, 8896
            size = 56, 232
        ]
        
        component Subsystem "Ld2_grid_meas" {
            layout = dynamic
    
            
            component msr_current "IB" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7392, 8024
            ]
            
            component pas_resistor "R63" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 7904, 8304
                rotation = right
            ]
            
            component msr_voltage "VB" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8280, 8280
                rotation = right
            ]
            
            component msr_current "IA" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7312, 7928
            ]
            
            component msr_voltage "VA" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8360, 8216
                rotation = right
            ]
            
            component msr_voltage "VC" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8200, 8344
                rotation = right
            ]
            
            component pas_resistor "R65" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 8096, 8304
                rotation = right
            ]
            
            component pas_resistor "R64" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 8000, 8304
                rotation = right
            ]
            
            component msr_current "IC" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7480, 8120
            ]
            
            component gen_bus_join "join1" {
                
                inputs = "3"
    	    
            }
            [
                position = 8640, 8280
            ]
            
            component gen_bus_join "join" {
                
                inputs = "3"
    	    
            }
            [
                position = 7568, 7752
            ]
            
            component gen_gain "Gain8" {
                
                gain = "[1.0e-6]"
    	    
            }
            [
                position = 8912, 7792
            ]
            
            component gen_gain "Gain7" {
                
                gain = "[1.0e-6]"
    	    
            }
            [
                position = 8912, 7864
            ]
            
            component gen_gain "Gain9" {
                
                gain = "[1.0e-6]"
    	    
            }
            [
                position = 8912, 7720
            ]
            
            component gen_probe "P_loads_pu" {
                
                addr = "17965"
    	    
            }
            [
                position = 9000, 7720
            ]
            
            component gen_probe "Q_loads_pu" {
                
                addr = "17938"
    	    
            }
            [
                position = 9000, 7792
            ]
            
            component gen_probe "S_loads_pu" {
                
                addr = "17951"
    	    
            }
            [
                position = 9000, 7864
            ]
            component "core/Voltage RMS" "VCrms"{
                
            }
            [
                position = 7584, 8320
                rotation = right
                size = 64, 32
            ]
            
            component "core/Current RMS" "IArms"{
                
            }
            [
                position = 7208, 7928
                size = 64, 32
            ]
            
            component "core/Current RMS" "IBrms"{
                
            }
            [
                position = 7208, 8024
                size = 64, 32
            ]
            
            component "core/Current RMS" "ICrms"{
                
            }
            [
                position = 7208, 8120
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VArms"{
                
            }
            [
                position = 7784, 8208
                rotation = right
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VBrms"{
                
            }
            [
                position = 7688, 8280
                rotation = right
                size = 64, 32
            ]
            
            
            component Subsystem "PQ measure" {
                layout = dynamic
        
                
                component gen_terminator "Termination2" {
                    
        	    
                }
                [
                    position = 7992, 8208
                    scale = -1, 1
                ]
                
                component gen_terminator "Termination1" {
                    
        	    
                }
                [
                    position = 7936, 8184
                    scale = -1, 1
                ]
                
                component gen_terminator "Termination4" {
                    
        	    
                }
                [
                    position = 8104, 8248
                    scale = -1, 1
                ]
                
                component gen_PQ_transform "PQ Power Meter1" {
                    
                    execution_rate = "Ts"
                    filter_cutoff_Hz = "20"
                    filter_order = "second order"
        	    
                }
                [
                    position = 8192, 8192
                    scale = -1, 1
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "P_meas_out" {
                    label = "P_meas_out"
                    
                    position = left:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8128, 8136
                    rotation = down
                    size = 25, 25
                ]
                port "Q_meas_out" {
                    label = "Q_meas_out"
                    
                    position = left:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8056, 8152
                    rotation = down
                    size = 25, 25
                ]
                port "Va_in" {
                    label = "Va_in"
                    
                    position = right:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8272, 8048
                    rotation = down
                    size = 25, 25
                ]
                port "Vb_in" {
                    label = "Vb_in"
                    
                    position = right:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8304, 8096
                    rotation = down
                    size = 25, 25
                ]
                port "Vc_in" {
                    label = "Vc_in"
                    
                    position = right:4
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8360, 8144
                    rotation = down
                    size = 25, 25
                ]
                port "Ia_in" {
                    label = "Ia_in"
                    
                    position = right:6
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8360, 8240
                    rotation = down
                    size = 25, 25
                ]
                port "Ib_in" {
                    label = "Ib_in"
                    
                    position = right:7
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8312, 8280
                    rotation = down
                    size = 25, 25
                ]
                port "Ic_in" {
                    label = "Ic_in"
                    
                    position = right:10
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8280, 8328
                    rotation = down
                    size = 25, 25
                ]
                port "S_meas_out" {
                    label = "S_meas_out"
                    
                    position = left:3
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 7944, 8272
                    rotation = down
                    size = 25, 25
                ]
                
                connect "PQ Power Meter1.ia" "Ia_in" as Connection1
                
                
                connect "PQ Power Meter1.ib" "Ib_in" as Connection2
                
                
                connect "PQ Power Meter1.ic" "Ic_in" as Connection3
                
                
                connect "PQ Power Meter1.Pdc" "P_meas_out" as Connection4
                
                
                connect "PQ Power Meter1.Qdc" "Q_meas_out" as Connection5
                
                
                connect "PQ Power Meter1.va" "Va_in" as Connection6
                
                
                connect "PQ Power Meter1.vb" "Vb_in" as Connection7
                
                
                connect "PQ Power Meter1.vc" "Vc_in" as Connection8
                
                
                connect "S_meas_out" "PQ Power Meter1.apparent" as Connection9
                
                
                connect "Termination1.in" "PQ Power Meter1.Pac" as Connection10
                
                
                connect "Termination2.in" "PQ Power Meter1.Qac" as Connection11
                
                
                connect "Termination4.in" "PQ Power Meter1.k_factor" as Connection12
                
                
        
                
            }
            [
                position = 8752, 7792
                scale = -1, 1
                size = 88, 184
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "P1" {
                label = "a"
                
                position = right:1
                kind = pe
            }
            [
                position = 8432, 7928
                rotation = down
            ]
            port "P2" {
                label = "b"
                
                position = right:2
                kind = pe
            }
            [
                position = 8432, 8024
                rotation = down
            ]
            port "P3" {
                label = "c"
                
                position = right:3
                kind = pe
            }
            [
                position = 8432, 8120
                rotation = down
            ]
            port "P4" {
                label = "A"
                
                position = left:1
                kind = pe
            }
            [
                position = 7096, 7928
            ]
            port "P5" {
                label = "B"
                
                position = left:2
                kind = pe
            }
            [
                position = 7096, 8024
            ]
            port "P6" {
                label = "C"
                
                position = left:3
                kind = pe
            }
            [
                position = 7096, 8120
            ]
            port "Iabc" {
                label = "Iabc"
                
                position = top:1
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 7672, 7752
            ]
            port "Vabc" {
                label = "Vabc"
                
                position = top:2
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8744, 8280
            ]
            
            junction "Junction1421" pe
            [
                position = 8280, 8456
            ]
            
            junction "Junction1463" pe
            [
                position = 8200, 8456
            ]
            
            junction "Junction1464" pe
            [
                position = 8096, 8456
            ]
            
            junction "Junction1465" pe
            [
                position = 8000, 8456
            ]
            
            junction "Junction1466" pe
            [
                position = 8360, 7928
            ]
            
            junction "Junction1467" pe
            [
                position = 8280, 8024
            ]
            
            junction "Junction1468" pe
            [
                position = 8200, 8120
            ]
            
            junction "Junction1475" pe
            [
                position = 7904, 7928
            ]
            
            junction "Junction1476" pe
            [
                position = 8000, 8024
            ]
            
            junction "Junction1477" pe
            [
                position = 8096, 8120
            ]
            
            junction "Junction1479" pe
            [
                position = 7784, 8456
            ]
            
            junction "Junction1480" pe
            [
                position = 7904, 8456
            ]
            
            junction "Junction1481" pe
            [
                position = 7688, 8456
            ]
            
            junction "Junction1482" pe
            [
                position = 7584, 8120
            ]
            
            junction "Junction1483" pe
            [
                position = 7688, 8024
            ]
            
            junction "Junction1484" pe
            [
                position = 7784, 7928
            ]
            
            junction "Junction1485" sp
            [
                position = 7480, 7848
            ]
            
            junction "Junction1486" sp
            [
                position = 7392, 7824
            ]
            
            junction "Junction1487" sp
            [
                position = 7312, 7800
            ]
            
            junction "Junction1488" sp
            [
                position = 8560, 8344
            ]
            
            junction "Junction1489" sp
            [
                position = 8528, 8280
            ]
            
            junction "Junction1490" sp
            [
                position = 8504, 8264
            ]
            
            connect "Gain7.out" "S_loads_pu.in" as Connection380
            
            
            connect "Gain8.in" "PQ measure.Q_meas_out" as Connection375
            
            
            connect "Gain8.out" "Q_loads_pu.in" as Connection378
            
            
            connect "IA.n_node" Junction1484 as Connection363
            
            
            connect "IArms.n_node" "IA.p_node" as Connection340
            
            
            connect "IB.n_node" Junction1483 as Connection360
            
            
            connect "IBrms.n_node" "IB.p_node" as Connection341
            
            
            connect "IC.n_node" Junction1482 as Connection357
            
            
            connect "ICrms.n_node" "IC.p_node" as Connection342
            
            
            connect Junction1421 Junction1463 as Connection224
            
            
            connect Junction1463 "VC.n_node" as Connection225
            
            
            connect Junction1464 Junction1463 as Connection228
            
            
            connect Junction1465 Junction1464 as Connection231
            
            
            connect Junction1466 P1 as Connection299
            
            
            connect Junction1467 P2 as Connection301
            
            
            connect Junction1468 Junction1477 as Connection297
            
            
            connect Junction1468 P3 as Connection302
            
            
            connect Junction1475 Junction1466 as Connection292
            
            
            connect Junction1476 Junction1467 as Connection295
            
            
            connect Junction1476 Junction1483 as Connection358
            
            
            connect Junction1477 "R65.p_node" as Connection298
            
            
            connect Junction1479 Junction1480 as Connection313
            
            
            connect Junction1479 "VArms.n_node" as Connection310
            
            
            connect Junction1480 Junction1465 as Connection312
            
            
            connect Junction1481 Junction1479 as Connection315
            
            
            connect Junction1482 Junction1477 as Connection356
            
            
            connect Junction1483 "VBrms.p_node" as Connection359
            
            
            connect Junction1484 Junction1475 as Connection362
            
            
            connect Junction1485 "IC.out" as Connection382
            
            
            connect Junction1486 "IB.out" as Connection385
            
            
            connect Junction1487 "IA.out" as Connection388
            
            
            connect Junction1488 "join1.in2" as Connection391
            
            
            connect Junction1489 "VB.out" as Connection394
            
            
            connect Junction1490 "VA.out" as Connection397
            
            
            connect P4 "IArms.p_node" as Connection364
            
            
            connect P5 "IBrms.p_node" as Connection365
            
            
            connect P6 "ICrms.p_node" as Connection366
            
            
            connect "PQ measure.S_meas_out" "Gain7.in" as Connection377
            
            
            connect "PQ measure.P_meas_out" "Gain9.in" as Connection376
            
            
            connect "PQ measure.Ic_in" Junction1485 as Connection383
            
            
            connect "PQ measure.Ib_in" Junction1486 as Connection386
            
            
            connect "PQ measure.Ia_in" Junction1487 as Connection389
            
            
            connect "PQ measure.Vc_in" Junction1488 as Connection392
            
            
            connect "PQ measure.Vb_in" Junction1489 as Connection395
            
            
            connect "PQ measure.Va_in" Junction1490 as Connection398
            
            
            connect "P_loads_pu.in" "Gain9.out" as Connection379
            
            
            connect "R63.p_node" Junction1475 as Connection291
            
            
            connect "R63.n_node" Junction1480 as Connection311
            
            
            connect "R64.n_node" Junction1465 as Connection230
            
            
            connect "R64.p_node" Junction1476 as Connection294
            
            
            connect "R65.n_node" Junction1464 as Connection227
            
            
            connect "VA.n_node" Junction1421 as Connection237
            
            
            connect "VA.p_node" Junction1466 as Connection240
            
            
            connect "VArms.p_node" Junction1484 as Connection361
            
            
            connect "VB.n_node" Junction1421 as Connection203
            
            
            connect "VB.p_node" Junction1467 as Connection243
            
            
            connect "VBrms.n_node" Junction1481 as Connection316
            
            
            connect "VC.p_node" Junction1468 as Connection246
            
            
            connect "VC.out" Junction1488 as Connection390
            
            
            connect "VCrms.n_node" Junction1481 as Connection314
            
            
            connect "VCrms.p_node" Junction1482 as Connection355
            
            
            connect "join.out" Iabc as Connection370
            
            
            connect "join.in2" Junction1485 as Connection381
            
            
            connect "join.in1" Junction1486 as Connection384
            
            
            connect "join.in" Junction1487 as Connection387
            
            
            connect "join1.in1" Junction1489 as Connection393
            
            
            connect "join1.in" Junction1490 as Connection396
            
            
            connect "join1.out" Vabc as Connection371
            
            
    
            
        }
        [
            position = 6912, 8896
            size = 56, 232
        ]
        
        component Subsystem "MID_Rly" {
            layout = dynamic
    
            
            component src_digital_input "Digital Input Trip" {
                
                addr = "3"
                execution_rate = "Ts"
                invert = "true"
    	    
            }
            [
                position = 7496, 8632
            ]
            
            component gen_sr_ff "SR Flip Flop1" {
                
    	    
            }
            [
                position = 7688, 8592
            ]
            
            component src_digital_input "Digital Input Close" {
                
                addr = "2"
                execution_rate = "Ts"
                invert = "true"
    	    
            }
            [
                position = 7496, 8576
            ]
            
            
            
            tag "Goto1" {
                value = "MID_status"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7912, 8648
            ]
            
            
            
            
            
            
            
            
            port "Brk_cmd" {
                label = "Brk_cmd"
                
                position = bottom:1
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 7792, 8704
                rotation = right
                size = 25, 25
            ]
            
            junction "Junction1503" sp
            [
                position = 7792, 8648
            ]
            
            connect "Digital Input Close.out" "SR Flip Flop1.s_in" as Connection1043
            [
                breakpoints =7536, 8576
            ]
            
            connect "Digital Input Trip.out" "SR Flip Flop1.r_in" as Connection1008
            
            
            connect Goto1 Junction1503 as Connection1036
            
            
            connect Junction1503 "Brk_cmd" as Connection1037
            
            
            connect "SR Flip Flop1.out" Junction1503 as Connection1038
            
            
    
            
        }
        [
            position = 6104, 7760
            size = 72, 64
        ]
        
        component Subsystem "CB_control" {
            layout = dynamic
    
            
            component gen_sr_ff "SR Flip Flop2" {
                
    	    
            }
            [
                position = 7784, 8352
            ]
            
            component gen_terminator "Termination2" {
                
    	    
            }
            [
                position = 7856, 8376
            ]
            
            component gen_logic_op "Logical operator1" {
                
    	    
            }
            [
                position = 8136, 8240
            ]
            
            component gen_sr_ff "SR Flip Flop1" {
                
    	    
            }
            [
                position = 7744, 8240
            ]
            
            component gen_terminator "Termination1" {
                
    	    
            }
            [
                position = 7824, 8256
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "GCB_control" {
                label = "GCB_control"
                
                position = right:2
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8000, 8264
                size = 25, 25
            ]
            port "MCB_control" {
                label = "MCB_control"
                
                position = right:1
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8000, 8368
                size = 25, 25
            ]
            port "CB_status" {
                label = "CB_status"
                
                position = top:1
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8216, 8240
                size = 25, 25
            ]
            port "Close_GCB" {
                label = "Close_GCB"
                
                position = left:1
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7632, 8200
                size = 25, 25
            ]
            port "Open_GCB" {
                label = "Open_GCB"
                
                position = left:2
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7632, 8248
                size = 25, 25
            ]
            port "Close_MCB" {
                label = "Close_MCB"
                
                position = left:3
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7664, 8328
                size = 25, 25
            ]
            port "Open_MCB" {
                label = "Open_MCB"
                
                position = left:4
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7664, 8376
                size = 25, 25
            ]
            
            junction "Junction1" sp
            [
                position = 7960, 8232
            ]
            
            junction "Junction2" sp
            [
                position = 7960, 8344
            ]
            
            connect "Close_GCB" "SR Flip Flop1.s_in" as Connection1
            
            
            connect "Close_MCB" "SR Flip Flop2.s_in" as Connection2
            
            
            connect "GCB_control" Junction1 as Connection3
            
            
            connect Junction1 "Logical operator1.in" as Connection4
            
            
            connect Junction2 "Logical operator1.in1" as Connection5
            
            
            connect "Logical operator1.out" "CB_status" as Connection6
            
            
            connect "MCB_control" Junction2 as Connection7
            
            
            connect "Open_GCB" "SR Flip Flop1.r_in" as Connection8
            
            
            connect "Open_MCB" "SR Flip Flop2.r_in" as Connection9
            
            
            connect "SR Flip Flop1.out" Junction1 as Connection10
            
            
            connect "SR Flip Flop2.out" Junction2 as Connection11
            
            
            connect "Termination1.in" "SR Flip Flop1.out_n" as Connection12
            
            
            connect "Termination2.in" "SR Flip Flop2.out_n" as Connection13
            
            
    
            
        }
        [
            position = 7280, 7784
            size = 176, 160
        ]
        
        component Subsystem "P_control_loop" {
            layout = dynamic
    
            
            component gen_probe "Delta_w_in" {
                
                addr = "17944"
    	    
            }
            [
                position = 8184, 8128
            ]
            
            component sys_spc_marker "Core Marker2" {
                
    	    
            }
            [
                position = 8016, 8104
            ]
            
            component gen_gain "Gain11" {
                
                gain = "[0.01]"
    	    
            }
            [
                position = 8224, 8200
            ]
            
            component msr_voltage "Delta_w" {
                
                addr = "1538"
                bw_limit = "True"
                execution_rate = "Ts"
                frequency = "2e3"
                sig_output = "True"
    	    
            }
            [
                position = 8112, 8200
                rotation = right
            ]
            
            component src_voltage_ext "V_Delta_w_in" {
                
                ai_gain = "0.1"
    	    
            }
            [
                position = 7944, 8200
                rotation = right
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "Delta_w_out" {
                label = "Delta_w_out"
                
                position = right:1
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8304, 8200
                size = 25, 25
            ]
            
            junction "Junction1321" pe
            [
                position = 8016, 8160
                size = 0, 0
            ]
            
            junction "Junction1324" sp
            [
                position = 8152, 8200
                size = 0, 0
            ]
            
            connect "Core Marker2.node" Junction1321 as Connection1
            
            
            connect "Delta_w.p_node" Junction1321 as Connection2
            
            
            connect "Delta_w.out" Junction1324 as Connection3
            
            
            connect "Delta_w.n_node" "V_Delta_w_in.n_node" as Connection4
            
            
            connect "Gain11.out" "Delta_w_out" as Connection5
            
            
            connect "Gain11.in" Junction1324 as Connection6
            
            
            connect Junction1321 "V_Delta_w_in.p_node" as Connection7
            
            
            connect Junction1324 "Delta_w_in.in" as Connection8
            
            
    
            
        }
        [
            position = 8096, 7888
            scale = -1, 1
            size = 96, 56
        ]
        
        component Subsystem "Governor_and_Diesel_Engine" {
            layout = dynamic
    
            
            component src_cp_input "wref" {
                
                addr = "4294966776"
                def_value = "1"
                execution_rate = "Ts"
                group = "Governor Settings"
                max = "1000000.0"
                min = "-1000000.0"
                unit = ""
                widget_label = "wref_gen2"
    	    
            }
            [
                position = 7560, 8328
            ]
            
            component gen_probe "wmeas" {
                
                addr = "17960"
                execution_rate = "Ts"
                signal_type = "angular speed"
    	    
            }
            [
                position = 7680, 8416
            ]
            
            component gen_gain "w to wpu" {
                
                execution_rate = "Ts"
                gain = "1.0/wmb_gen1"
    	    
            }
            [
                position = 7584, 8416
                rotation = down
                scale = -1, 1
            ]
            
            component gen_sum "Sum3" {
                
                execution_rate = "Ts"
                signs = "++-"
    	    
            }
            [
                position = 7712, 8328
            ]
            
            component gen_probe "Tmech_pu" {
                
                addr = "17963"
                execution_rate = "Ts"
    	    
            }
            [
                position = 8168, 8400
            ]
            
            component gen_gain "Tpu to T" {
                
                execution_rate = "Ts"
                gain = "[-21495]"
    	    
            }
            [
                position = 8160, 8328
            ]
            
            component gen_probe "Tmech_SI" {
                
                addr = "17970"
                execution_rate = "Ts"
    	    
            }
            [
                position = 8304, 8272
            ]
            
            component gen_bus_join "Bus Join2" {
                
                inputs = "4"
    	    
            }
            [
                position = 7768, 8592
            ]
            
            component src_cp_input "mfidot" {
                
                execution_rate = "Ts"
                group = "CHP"
                unit = ""
                widget_label = "mfidot"
    	    
            }
            [
                position = 7512, 8568
            ]
            
            component gen_gain "Gain2" {
                
                gain = "1.0/1.76"
    	    
            }
            [
                position = 7640, 8568
                hide_name = True
            ]
            
            component gen_gain "Gain3" {
                
                gain = "2.75"
    	    
            }
            [
                position = 7640, 8528
                hide_name = True
            ]
            
            component gen_gain "Gain1" {
                
                gain = "1.0/0.000126"
    	    
            }
            [
                position = 7576, 8568
            ]
            
            component gen_gain "Gain4" {
                
                gain = "0.2*0.020267"
    	    
            }
            [
                position = 7640, 8608
                hide_name = True
            ]
            
            component gen_gain "Gain6" {
                
                gain = "0.00473*3500.0"
    	    
            }
            [
                position = 7640, 8656
                hide_name = True
            ]
            
            component gen_product "Product1" {
                
    	    
            }
            [
                position = 7424, 8536
                rotation = right
            ]
            
            component gen_bus_join "Bus Join3" {
                
                inputs = "5"
    	    
            }
            [
                position = 7312, 9080
            ]
            
            component gen_bus_split "Bus Split1" {
                
    	    
            }
            [
                position = 7576, 9080
            ]
            
            component src_cp_input "Heat_Load" {
                
                execution_rate = "Ts"
                group = "CHP"
                unit = ""
                widget_label = "Heat Load"
    	    
            }
            [
                position = 7728, 8992
            ]
            
            component src_cp_input "SIMEnable_CHP" {
                
                execution_rate = "Ts"
                group = "CHP"
                unit = ""
                widget_label = "SIMEnable_CHP"
    	    
            }
            [
                position = 7728, 9136
            ]
            
            component src_cp_input "Reset" {
                
                execution_rate = "Ts"
                group = "CHP"
                unit = ""
                widget_label = "Reset"
    	    
            }
            [
                position = 7728, 9232
            ]
            
            component src_cp_input "SIMTempSetPoint_CHP" {
                
                execution_rate = "Ts"
                group = "CHP"
                unit = ""
                widget_label = "SIMTempSetPoint_CHP"
    	    
            }
            [
                position = 7728, 9184
            ]
            
            component gen_probe "CHP_heat_supply" {
                
    	    
            }
            [
                position = 8328, 9232
            ]
            
            component gen_probe "Boiler_heat_supply" {
                
    	    
            }
            [
                position = 8320, 9088
            ]
            
            component gen_probe "Actual_Temp" {
                
    	    
            }
            [
                position = 8280, 8944
            ]
            
            component Subsystem "Woodward DEGOV" {
                layout = dynamic
        
                
                component gen_logic_op "not" {
                    
                    operator = "NOT"
        	    
                }
                [
                    position = 7768, 8288
                ]
                
                component gen_pid_controller "standalone control" {
                    
                    controller_type = "PD"
                    execution_rate = "Ts"
                    kd = "0.67267"
                    kp = "0.11911"
        	    
                }
                [
                    position = 7856, 8344
                ]
                
                component sys_signal_switch "switch1" {
                    
                    threshold = "0.5"
        	    
                }
                [
                    position = 7768, 8208
                ]
                
                component src_constant "zero" {
                    
                    execution_rate = "Ts"
                    value = "[0]"
        	    
                }
                [
                    position = 7680, 8224
                ]
                
                component gen_product "Product1" {
                    
        	    
                }
                [
                    position = 8608, 8280
                ]
                
                component gen_gain "GainK" {
                    
                    execution_rate = "Ts"
                    gain = "K"
        	    
                }
                [
                    position = 8384, 8224
                ]
                
                component gen_probe "gridtied_pid_input" {
                    
                    addr = "17953"
                    execution_rate = "Ts"
                    signal_type = "angular speed"
        	    
                }
                [
                    position = 7904, 8120
                ]
                
                component gen_probe "lead_lag_input" {
                    
                    addr = "17936"
                    execution_rate = "Ts"
                    signal_type = "angular speed"
        	    
                }
                [
                    position = 8152, 8168
                ]
                
                component gen_integrator "Integrator1" {
                    
                    execution_rate = "Ts"
                    init_value = "Pm0"
                    limit_lower = "Tmin"
                    limit_output = "True"
                    limit_upper = "Tmax"
                    show_reset = "level"
        	    
                }
                [
                    position = 8504, 8232
                ]
                
                component gen_logic_op "Logical operator1" {
                    
                    operator = "NOT"
        	    
                }
                [
                    position = 8512, 8312
                ]
                
                component gen_transport_delay "Transport Delay1" {
                    
                    execution_rate = "Ts"
                    init_value = "Pm0"
                    time_delay = "Td"
        	    
                }
                [
                    position = 8712, 8280
                ]
                
                component sys_signal_switch "switch" {
                    
                    threshold = "0.5"
        	    
                }
                [
                    position = 8040, 8224
                ]
                
                component gen_probe "gridtied_pid_output" {
                    
                    addr = "17966"
                    execution_rate = "Ts"
                    signal_type = "angular speed"
        	    
                }
                [
                    position = 7968, 8160
                ]
                
                component gen_probe "reset_integrator_governor" {
                    
                    addr = "17937"
                    execution_rate = "Ts"
                    signal_type = "angular speed"
        	    
                }
                [
                    position = 8496, 8392
                ]
                
                component gen_probe "integrator_governor_processed_output" {
                    
                    addr = "17933"
                    execution_rate = "Ts"
                    signal_type = "angular speed"
        	    
                }
                [
                    position = 8744, 8200
                ]
                
                component gen_probe "grid_contactor_on_" {
                    
                    addr = "17941"
                    execution_rate = "Ts"
                    signal_type = "angular speed"
        	    
                }
                [
                    position = 7928, 8032
                ]
                
                component gen_z_domain_transfer "TF4" {
                    
                    a_coeff = "denTF4d"
                    b_coeff = "numTF4d"
        	    
                }
                [
                    position = 8216, 8224
                ]
                
                component gen_z_domain_transfer "TF3" {
                    
                    a_coeff = "denTF3d"
                    b_coeff = "numTF3d"
        	    
                }
                [
                    position = 8296, 8224
                ]
                
                component Subsystem "pid grid controller" {
                    layout = dynamic
            
                    
                    component gen_sum "Sum1" {
                        
            	    
                    }
                    [
                        position = 8424, 8224
                    ]
                    
                    component gen_integrator "Integrator1" {
                        
                        execution_rate = "Ts"
                        init_value = "Pm0"
                        limit_lower = "Tmin"
                        limit_output = "True"
                        limit_upper = "Tmax"
                        show_reset = "level"
            	    
                    }
                    [
                        position = 8312, 8288
                    ]
                    
                    component gen_gain "ki" {
                        
                        gain = "[134]"
            	    
                    }
                    [
                        position = 8232, 8280
                    ]
                    
                    component gen_pid_controller "grid-tied control" {
                        
                        controller_type = "PD"
                        execution_rate = "Ts"
                        filt_coef = "1.0/0.42"
                        kd = "-4.47"
                        ki = "134"
                        kp = "10.6"
            	    
                    }
                    [
                        position = 8296, 8192
                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port "reset_integrator" {
                        label = "Reset"
                        
                        position = left:2
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8144, 8328
                        size = 25, 25
                    ]
                    port "Out" {
                        label = "Out"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8520, 8224
                        size = 25, 25
                    ]
                    port "In" {
                        label = "In"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8128, 8192
                        size = 25, 25
                    ]
                    
                    junction "Junction1" sp
                    [
                        position = 8200, 8192
                        size = 0, 0
                    ]
                    
                    connect "Integrator1.in" "ki.out" as Connection1
                    
                    
                    connect Junction1 In as Connection2
                    
                    
                    connect "Sum1.in1" "Integrator1.out" as Connection3
                    
                    
                    connect "Sum1.out" Out as Connection4
                    
                    
                    connect "Sum1.in" "grid-tied control.out" as Connection5
                    
                    
                    connect "grid-tied control.in" Junction1 as Connection6
                    
                    
                    connect "ki.in" Junction1 as Connection7
                    
                    
                    connect "reset_integrator" "Integrator1.reset" as Connection8
                    
                    
            
                    
                }
                [
                    position = 7880, 8216
                    size = 80, 56
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "CB_Status" {
                    label = "CB_status"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7600, 8008
                    size = 25, 25
                ]
                port "Reset" {
                    label = "Reset"
                    
                    position = left:3
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8280, 8344
                    rotation = left
                    size = 25, 25
                ]
                port "Torque" {
                    label = "Torque [pu]"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8808, 8280
                    size = 25, 25
                ]
                port "Speed" {
                    label = "Speed [pu]"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7592, 8232
                    size = 25, 25
                ]
                
                junction "Junction51" sp
                [
                    position = 8464, 8312
                    size = 0, 0
                ]
                
                junction "Junction52" sp
                [
                    position = 7768, 8008
                    size = 0, 0
                ]
                
                junction "Junction53" sp
                [
                    position = 7640, 8232
                    size = 0, 0
                ]
                
                junction "Junction55" sp
                [
                    position = 8464, 8312
                    size = 0, 0
                ]
                
                junction "Junction57" sp
                [
                    position = 8656, 8280
                    size = 0, 0
                ]
                
                junction "Junction58" sp
                [
                    position = 7808, 8208
                    size = 0, 0
                ]
                
                junction "Junction59" sp
                [
                    position = 7936, 8208
                    size = 0, 0
                ]
                
                junction "Junction60" sp
                [
                    position = 7768, 8152
                    size = 0, 0
                ]
                
                junction "Junction61" sp
                [
                    position = 7872, 8008
                    size = 0, 0
                ]
                
                junction "Junction62" sp
                [
                    position = 8096, 8224
                ]
                
                connect "GainK.out" "Integrator1.in" as Connection1
                
                
                connect "Integrator1.reset" Junction51 as Connection2
                
                
                connect "Integrator1.out" "Product1.in" as Connection3
                
                
                connect Junction51 Junction55 as Connection4
                
                
                connect Junction51 Reset as Connection5
                
                
                connect Junction52 "CB_Status" as Connection6
                
                
                connect Junction52 Junction61 as Connection7
                
                
                connect Junction53 Speed as Connection8
                
                
                connect Junction55 "Logical operator1.in" as Connection9
                
                
                connect Junction57 "Transport Delay1.in" as Connection10
                
                
                connect Junction58 "gridtied_pid_input.in" as Connection11
                
                
                connect Junction59 "gridtied_pid_output.in" as Connection12
                
                
                connect Junction60 Junction52 as Connection13
                
                
                connect Junction61 "switch.in2" as Connection14
                
                
                connect Junction62 "lead_lag_input.in" as Connection40
                [
                    breakpoints =8096, 8224
                ]
                
                connect "Logical operator1.out" "Product1.in1" as Connection16
                
                
                connect "Product1.out" Junction57 as Connection17
                
                
                connect "TF3.out" "GainK.in" as Connection43
                
                
                connect "TF4.in" Junction62 as Connection41
                
                
                connect "TF4.out" "TF3.in" as Connection42
                
                
                connect "Transport Delay1.out" Torque as Connection20
                
                
                connect "grid_contactor_on_.in" Junction61 as Connection21
                
                
                connect "integrator_governor_processed_output.in" Junction57 as Connection22
                
                
                connect "not.in" Junction60 as Connection24
                
                
                connect "not.out" "pid grid controller.reset_integrator" as Connection25
                
                
                connect "pid grid controller.In" Junction58 as Connection26
                
                
                connect "pid grid controller.Out" Junction59 as Connection27
                
                
                connect "reset_integrator_governor.in" Junction55 as Connection28
                
                
                connect "standalone control.in" Junction53 as Connection29
                
                
                connect "switch.in" Junction59 as Connection30
                
                
                connect "switch.out" Junction62 as Connection39
                
                
                connect "switch.in1" "standalone control.out" as Connection32
                
                
                connect "switch1.in" Junction53 as Connection33
                
                
                connect "switch1.out" Junction58 as Connection34
                
                
                connect "switch1.in2" Junction60 as Connection35
                
                
                connect "zero.out" "switch1.in1" as Connection36
                
                
        
                
            }
            [
                position = 7976, 8328
                size = 184, 80
            ]
            
            component Subsystem "thermal_data" {
                layout = dynamic
        
                
                component gen_probe "Heat_rec" {
                    
        	    
                }
                [
                    position = 8368, 8216
                ]
                
                component gen_probe "CO2" {
                    
        	    
                }
                [
                    position = 8248, 8120
                ]
                
                component gen_bus_split "Bus Split1" {
                    
                    outputs = "4"
        	    
                }
                [
                    position = 8136, 8296
                    rotation = left
                ]
                
                component gen_probe "NOx" {
                    
        	    
                }
                [
                    position = 8248, 8264
                ]
                
                component gen_probe "NG_fuel_use" {
                    
        	    
                }
                [
                    position = 8368, 8168
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "Thermal_Data" {
                    label = "Thermal data"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8024, 8336
                ]
                port "Heat_rec1" {
                    label = "Heat_rec"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8352, 8272
                ]
                port "NG_usage" {
                    label = "NG_usage"
                    
                    position = right:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8344, 8112
                ]
                port "CO2out" {
                    label = "CO2"
                    
                    position = right:3
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8200, 8072
                ]
                
                junction "Junction1" sp
                [
                    position = 8288, 8216
                ]
                
                junction "Junction2" sp
                [
                    position = 8288, 8168
                ]
                
                junction "Junction3" sp
                [
                    position = 8136, 8120
                ]
                
                connect "Bus Split1.out2" Junction1 as Connection80
                
                
                connect "Bus Split1.out1" Junction2 as Connection83
                
                
                connect "Bus Split1.out" Junction3 as Connection86
                
                
                connect "Bus Split1.out3" "NOx.in" as Connection70
                
                
                connect "Bus Split1.in" "Thermal_Data" as Connection71
                
                
                connect CO2out Junction3 as Connection88
                
                
                connect "Heat_rec1" Junction1 as Connection82
                
                
                connect Junction1 "Heat_rec.in" as Connection81
                
                
                connect Junction2 "NG_fuel_use.in" as Connection84
                
                
                connect Junction3 "CO2.in" as Connection87
                
                
                connect "NG_usage" Junction2 as Connection85
                
                
        
                
            }
            [
                position = 6992, 9096
                size = 168, 80
            ]
            
            component Subsystem "Modbus" {
                layout = dynamic
        
                
                component gen_terminator "Termination1" {
                    
        	    
                }
                [
                    position = 8376, 8160
                ]
                
                component src_constant "Constant1" {
                    
                    execution_rate = "Ts"
                    value = "0"
        	    
                }
                [
                    position = 8016, 8160
                ]
                
                component sys_hil_sp_marker "SDM1" {
                    
                    hil_device_id = "1"
        	    
                }
                [
                    position = 8072, 8104
                ]
                
                component sys_hil_sp_marker "SDM2" {
                    
                    hil_device_id = "1"
        	    
                }
                [
                    position = 8328, 8096
                ]
                
                component sys_hil_sp_marker "SDM3" {
                    
                    hil_device_id = "1"
        	    
                }
                [
                    position = 8328, 8240
                ]
                
                component sys_hil_sp_marker "SDM4" {
                    
                    hil_device_id = "1"
        	    
                }
                [
                    position = 8040, 8256
                ]
                component "core/ModBus Device" "ModBus Device1"{
                    
                    configuration = "config4"
                    execution_rate = "Ts"
                }
                [
                    position = 8208, 8232
                    hide_name = True
                    size = 184, 184
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "Reg_in" {
                    label = "Reg_in"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8000, 8304
                ]
                port "Holding_out" {
                    label = "Holding_out"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8376, 8304
                ]
                
                junction "Junction67" sp
                [
                    position = 8072, 8160
                ]
                
                junction "Junction68" sp
                [
                    position = 8072, 8208
                ]
                
                junction "Junction69" sp
                [
                    position = 8072, 8160
                ]
                
                junction "Junction70" sp
                [
                    position = 8328, 8160
                ]
                
                junction "Junction71" sp
                [
                    position = 8328, 8304
                ]
                
                junction "Junction72" sp
                [
                    position = 8040, 8304
                ]
                
                connect "Constant1.out" Junction67 as Connection337
                
                
                connect Junction67 Junction69 as Connection346
                
                
                connect Junction68 Junction67 as Connection341
                
                
                connect Junction69 "ModBus Device1.coil_in" as Connection347
                
                
                connect Junction70 "ModBus Device1.coil_out" as Connection350
                
                
                connect Junction71 "Holding_out" as Connection353
                
                
                connect Junction72 "Reg_in" as Connection356
                
                
                connect "ModBus Device1.discrete_in" Junction68 as Connection340
                
                
                connect "ModBus Device1.holding_in" Junction68 as Connection342
                
                
                connect "ModBus Device1.holding_out" Junction71 as Connection352
                
                
                connect "ModBus Device1.reg_in" Junction72 as Connection355
                
                
                connect "SDM1.node" Junction69 as Connection348
                
                
                connect "SDM2.node" Junction70 as Connection351
                
                
                connect "SDM3.node" Junction71 as Connection354
                
                
                connect "SDM4.node" Junction72 as Connection357
                
                
                connect "Termination1.in" Junction70 as Connection349
                
                
        
                
            }
            [
                position = 7448, 9080
                size = 112, 104
            ]
            
            component Subsystem "CHP" {
                layout = dynamic
        
                
                component gen_pid_controller "PID controller1" {
                    
                    controller_type = "PI"
                    enb_output_limit_out = "True"
                    ki = "0.01"
                    kp = "100"
                    lower_sat_lim = "0"
                    upper_sat_lim = "20"
        	    
                }
                [
                    position = 8080, 8368
                ]
                
                component sys_signal_switch "Signal switch1" {
                    
                    threshold = "0.5"
        	    
                }
                [
                    position = 7840, 8176
                ]
                
                component sys_signal_switch "Signal switch3" {
                    
                    threshold = "0.5"
        	    
                }
                [
                    position = 7856, 8360
                ]
                
                component tm_delay "Unit Delay1" {
                    
        	    
                }
                [
                    position = 8384, 8176
                ]
                
                component tm_delay "Unit Delay2" {
                    
        	    
                }
                [
                    position = 8192, 8368
                ]
                
                component gen_sum "Sum1" {
                    
                    signs = "+-+"
        	    
                }
                [
                    position = 8488, 8264
                ]
                
                component src_cp_input "SIMHIL" {
                    
                    execution_rate = "Ts"
                    group = "Governor Settings"
                    unit = ""
                    widget_label = "SIMHIL"
        	    
                }
                [
                    position = 7448, 7936
                ]
                
                component gen_transport_delay "Piping Transport Delay1" {
                    
                    execution_rate = "Ts*10"
                    time_delay = "10"
        	    
                }
                [
                    position = 8032, 8176
                ]
                
                component gen_integrator "Integrator1" {
                    
                    init_value = "20"
                    limit_output = "True"
                    show_reset = "level"
        	    
                }
                [
                    position = 8696, 8272
                ]
                
                component src_constant "CHP_heat_off" {
                    
                    execution_rate = "Ts"
                    value = "0"
        	    
                }
                [
                    position = 7744, 8192
                ]
                
                component sys_signal_switch "Signal switch2" {
                    
                    threshold = "0.5"
        	    
                }
                [
                    position = 7712, 8024
                ]
                
                component gen_sum "Sum2" {
                    
                    signs = "+-"
        	    
                }
                [
                    position = 7984, 8368
                ]
                
                component gen_gain "Gain7" {
                    
                    gain = "5.0/360.0"
        	    
                }
                [
                    position = 8592, 8264
                ]
                
                component gen_z_domain_transfer "Z Domain Transfer Function1" {
                    
                    a_coeff = "[1.0, 0.4754, 0.2118]"
                    b_coeff = "[0.4218, 0.8436, 0.4218]"
        	    
                }
                [
                    position = 8264, 8176
                ]
                component "core/Rate Transition" "Rate Transition1"{
                    
                    execution_rate = "inherit"
                }
                [
                    position = 7920, 8176
                    size = 32, 32
                ]
                
                component "core/Rate Transition" "Rate Transition2"{
                    
                    execution_rate = "inherit"
                }
                [
                    position = 8144, 8176
                    size = 32, 32
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "Enable_CHP_Heat" {
                    label = "Enable CHP heating"
                    
                    position = left:4
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7544, 8008
                ]
                port "SIM_enable_CHP" {
                    label = "SIM Enable CHP"
                    
                    position = left:5
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7608, 8040
                ]
                port "Heat_recovery" {
                    label = "Heat recovery"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7608, 8160
                ]
                port "Heat_load" {
                    label = "Heat Load"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8376, 8264
                ]
                port "Temp_Setpoint_F" {
                    label = "Tem Set Point deg F"
                    
                    position = left:3
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7672, 8344
                ]
                port "SIM_TempSetPoint" {
                    label = "SIM Temp SetPoint"
                    
                    position = left:6
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7760, 8376
                ]
                port "CHP_reset" {
                    label = "Reset"
                    
                    position = left:7
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8608, 8320
                ]
                port "CHP_heat_supplied" {
                    label = "CHP heat supplied"
                    
                    position = right:3
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8568, 8176
                ]
                port "Boiler_Heat_Supplied" {
                    label = "Boiler heat supplied"
                    
                    position = right:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8520, 8368
                ]
                port "Temp Actual" {
                    label = "Temp actual"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8832, 8272
                ]
                
                junction "Junction67" sp
                [
                    position = 8752, 8272
                ]
                
                junction "Junction68" sp
                [
                    position = 8448, 8176
                ]
                
                junction "Junction69" sp
                [
                    position = 8448, 8368
                ]
                
                junction "Junction70" sp
                [
                    position = 7488, 7936
                ]
                
                connect "Boiler_Heat_Supplied" Junction69 as Connection385
                
                
                connect "CHP_heat_off.out" "Signal switch1.in1" as Connection171
                
                
                connect "Gain7.in" "Sum1.out" as Connection197
                
                
                connect "Integrator1.reset" "CHP_reset" as Connection376
                
                
                connect "Integrator1.in" "Gain7.out" as Connection355
                
                
                connect "Integrator1.out" Junction67 as Connection363
                
                
                connect Junction67 "Sum2.in1" as Connection364
                [
                    breakpoints =8752, 8272;8752, 8448;7944, 8448
                ]
                
                connect Junction67 "Temp Actual" as Connection372
                
                
                connect Junction68 "CHP_heat_supplied" as Connection373
                
                
                connect Junction68 "Sum1.in" as Connection367
                
                
                connect Junction69 "Sum1.in2" as Connection384
                [
                    breakpoints =8448, 8368
                ]
                
                connect Junction70 "Signal switch2.in2" as Connection391
                [
                    breakpoints =7712, 7936;7712, 7936
                ]
                
                connect "PID controller1.in" "Sum2.out" as Connection190
                
                
                connect "Piping Transport Delay1.in" "Rate Transition1.out" as Connection207
                
                
                connect "Rate Transition1.in" "Signal switch1.out" as Connection208
                
                
                connect "Rate Transition2.in" "Piping Transport Delay1.out" as Connection210
                
                
                connect "SIMHIL.out" Junction70 as Connection390
                
                
                connect "Signal switch1.in" "Heat_recovery" as Connection380
                
                
                connect "Signal switch2.in" "Enable_CHP_Heat" as Connection371
                
                
                connect "Signal switch2.in1" "SIM_enable_CHP" as Connection379
                
                
                connect "Signal switch2.out" "Signal switch1.in2" as Connection353
                
                
                connect "Signal switch3.in2" Junction70 as Connection392
                [
                    breakpoints =7856, 8304
                ]
                
                connect "Signal switch3.in1" "SIM_TempSetPoint" as Connection378
                
                
                connect "Signal switch3.in" "Temp_Setpoint_F" as Connection377
                
                
                connect "Sum1.in1" "Heat_load" as Connection375
                
                
                connect "Sum2.in" "Signal switch3.out" as Connection189
                
                
                connect "Unit Delay1.out" Junction68 as Connection366
                
                
                connect "Unit Delay2.out" Junction69 as Connection383
                
                
                connect "Unit Delay2.in" "PID controller1.out" as Connection191
                
                
                connect "Z Domain Transfer Function1.in" "Rate Transition2.out" as Connection393
                
                
                connect "Z Domain Transfer Function1.out" "Unit Delay1.in" as Connection394
                
                
        
                
            }
            [
                position = 8032, 9088
                size = 320, 336
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            tag "Goto1" {
                value = "Thermal data"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7864, 8592
                hide_name = True
            ]
            
            tag "From14" {
                value = "Thermal data"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 6840, 9096
                hide_name = True
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "T_out" {
                label = "T_out"
                
                position = right:2
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8240, 8328
                size = 25, 25
            ]
            port "Delta_w_in" {
                label = "Delta_w_in"
                
                position = left:2
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7592, 8224
                size = 25, 25
            ]
            port "w_meas_in" {
                label = "w_meas_in"
                
                position = left:3
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7512, 8416
                rotation = down
                scale = -1, 1
                size = 25, 25
            ]
            port "reset_integrator" {
                label = "Reset"
                
                position = left:1
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7784, 8376
                size = 25, 25
            ]
            port "Contactor_status" {
                label = "CB_status"
                
                position = top:1
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7784, 8280
                size = 25, 25
            ]
            
            junction "Junction6" sp
            [
                position = 7608, 8568
            ]
            
            junction "Junction7" sp
            [
                position = 7608, 8568
            ]
            
            junction "Junction50" sp
            [
                position = 7616, 8416
                size = 0, 0
            ]
            
            junction "Junction63" sp
            [
                position = 8120, 8328
            ]
            
            junction "Junction64" sp
            [
                position = 8200, 8328
            ]
            
            junction "Junction65" sp
            [
                position = 7616, 8416
            ]
            
            junction "Junction66" sp
            [
                position = 8120, 8328
            ]
            
            junction "Junction69" sp
            [
                position = 8264, 9232
            ]
            
            junction "Junction70" sp
            [
                position = 8224, 9088
            ]
            
            junction "Junction71" sp
            [
                position = 8240, 8944
            ]
            
            connect "Boiler_heat_supply.in" Junction70 as Connection448
            
            
            connect "Bus Join2.out" Goto1 as Connection304
            
            
            connect "Bus Join3.in1" Junction69 as Connection446
            [
                breakpoints =7256, 9064;7256, 9336;8264, 9336;8264, 9232
            ]
            
            connect "Bus Join3.in2" Junction70 as Connection450
            [
                breakpoints =7232, 9080;7232, 9304;8224, 9304
            ]
            
            connect "Bus Join3.in" Junction71 as Connection461
            [
                breakpoints =7272, 8896;8240, 8896
            ]
            
            connect "Bus Join3.in4" "thermal_data.CO2out" as Connection458
            
            
            connect "Bus Split1.out" "CHP.Temp_Setpoint_F" as Connection464
            [
                breakpoints =7616, 9040;7856, 9040
            ]
            
            connect "Bus Split1.out1" "CHP.Enable_CHP_Heat" as Connection465
            
            
            connect "CHP.Temp Actual" Junction71 as Connection462
            [
                breakpoints =8216, 8944
            ]
            
            connect "CHP_heat_supply.in" Junction69 as Connection444
            
            
            connect "Contactor_status" "Woodward DEGOV.CB_Status" as Connection1
            
            
            connect "Delta_w_in" "Sum3.in" as Connection2
            
            
            connect "Gain2.out" "Bus Join2.in1" as Connection262
            [
                breakpoints =7696, 8568
            ]
            
            connect "Gain2.in" Junction7 as Connection49
            
            
            connect "Gain3.out" "Bus Join2.in" as Connection260
            [
                breakpoints =7704, 8528
            ]
            
            connect "Gain3.in" Junction6 as Connection46
            
            
            connect "Gain4.out" "Bus Join2.in2" as Connection259
            [
                breakpoints =7688, 8608
            ]
            
            connect "Gain4.in" Junction7 as Connection51
            
            
            connect "Gain6.out" "Bus Join2.in3" as Connection313
            
            
            connect "Heat_Load.out" "CHP.Heat_load" as Connection353
            
            
            connect Junction50 Junction65 as Connection324
            
            
            connect Junction50 "w to wpu.out" as Connection3
            
            
            connect Junction50 "wmeas.in" as Connection302
            [
                breakpoints =7616, 8416;7616, 8416;7616, 8416;7616, 8416;7616, 8416;7616, 8416;7616, 8416
            ]
            
            connect Junction6 "Gain1.out" as Connection47
            
            
            connect Junction63 "Tpu to T.in" as Connection4
            
            
            connect Junction63 "Woodward DEGOV.Torque" as Connection5
            
            
            connect Junction64 "T_out" as Connection6
            
            
            connect Junction64 "Tmech_SI.in" as Connection293
            [
                breakpoints =8200, 8328;8200, 8272
            ]
            
            connect Junction65 "Sum3.in2" as Connection325
            [
                breakpoints =7616, 8416;7616, 8416
            ]
            
            connect Junction66 Junction63 as Connection328
            [
                breakpoints =8120, 8328;8120, 8328;8120, 8328;8120, 8328;8120, 8328;8120, 8328;8120, 8328
            ]
            
            connect Junction69 "CHP.CHP_heat_supplied" as Connection445
            [
                breakpoints =8224, 9232;8216, 9232
            ]
            
            connect Junction7 Junction6 as Connection50
            
            
            connect Junction70 "CHP.Boiler_Heat_Supplied" as Connection449
            [
                breakpoints =8216, 9088
            ]
            
            connect Junction71 "Actual_Temp.in" as Connection460
            
            
            connect "Modbus.Reg_in" "Bus Join3.out" as Connection392
            
            
            connect "Modbus.Holding_out" "Bus Split1.in" as Connection393
            
            
            connect "Product1.out" "Gain6.in" as Connection323
            
            
            connect "Product1.in" Junction65 as Connection326
            [
                breakpoints =7432, 8488
            ]
            
            connect "Product1.in1" Junction66 as Connection329
            [
                breakpoints =7456, 8168;7456, 8168;8120, 8168
            ]
            
            connect "Reset.out" "CHP.CHP_reset" as Connection354
            
            
            connect "SIMEnable_CHP.out" "CHP.SIM_enable_CHP" as Connection357
            
            
            connect "SIMTempSetPoint_CHP.out" "CHP.SIM_TempSetPoint" as Connection356
            
            
            connect "Sum3.out" "Woodward DEGOV.Speed" as Connection8
            
            
            connect "Tmech_pu.in" Junction66 as Connection327
            
            
            connect "Tpu to T.out" Junction64 as Connection11
            
            
            connect "mfidot.out" "Gain1.in" as Connection219
            
            
            connect "reset_integrator" "Woodward DEGOV.Reset" as Connection12
            
            
            connect "thermal_data.NG_usage" "Bus Join3.in3" as Connection454
            
            
            connect "thermal_data.Heat_rec1" "CHP.Heat_recovery" as Connection463
            [
                breakpoints =7112, 9056;7112, 8944;7816, 8944;7816, 8944
            ]
            
            connect "thermal_data.Thermal_Data" From14 as Connection246
            
            
            connect "w_meas_in" "w to wpu.in" as Connection13
            
            
            connect "wref.out" "Sum3.in1" as Connection15
            
            
    
            
        }
        [
            position = 7864, 7888
            scale = -1, 1
            size = 152, 112
        ]
        
        component Subsystem "Subsystem1" {
            layout = dynamic
    
            
            component gen_logic_op "Logical operator2" {
                
                operator = "NAND"
    	    
            }
            [
                position = 8264, 8200
                hide_name = True
            ]
            
            component gen_sr_ff "SR Flip Flop1" {
                
    	    
            }
            [
                position = 8152, 8240
            ]
            
            component gen_logic_op "Logical operator1" {
                
                operator = "NOT"
    	    
            }
            [
                position = 8128, 8152
                hide_name = True
            ]
            
            component src_constant "Constant1" {
                
                execution_rate = "Ts"
                value = "0"
    	    
            }
            [
                position = 8064, 8272
                hide_name = True
            ]
            
            component gen_terminator "Termination1" {
                
    	    
            }
            [
                position = 8272, 8256
                hide_name = True
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "Fuel Signal OFF" {
                
                position = left:1
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 8000, 8152
            ]
            port "Starter" {
                
                position = left:2
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7968, 8224
            ]
            port "Reset" {
                
                position = right:1
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8368, 8200
            ]
            
            connect "Constant1.out" "SR Flip Flop1.r_in" as Connection140
            
            
            connect "Logical operator1.in" "Fuel Signal OFF" as Connection137
            
            
            connect "Logical operator1.out" "Logical operator2.in" as Connection133
            
            
            connect "Logical operator2.out" Reset as Connection135
            
            
            connect "SR Flip Flop1.out" "Logical operator2.in1" as Connection134
            
            
            connect "SR Flip Flop1.s_in" Starter as Connection136
            
            
            connect "SR Flip Flop1.out_n" "Termination1.in" as Connection141
            
            
    
            
        }
        [
            position = 8368, 7888
            scale = -1, 1
            size = 120, 64
        ]
        
        component Subsystem "Exciter" {
            layout = dynamic
    
            
            component gen_probe "Vf" {
                
                addr = "17949"
                execution_rate = "Ts"
    	    
            }
            [
                position = 8584, 8128
            ]
            
            component gen_DC1A_exciter "IEEE DC1A exciter1" {
                
                Ka = "Ka_gen1"
                Ke = "Ke_gen1"
                Kf = "Kf_gen1"
                Ta = "Ta_gen1"
                Te = "Te_gen1"
                Tf = "Tf_gen1"
                Tr = "Tr_gen1"
                VRmax = "Efmax_gen1"
                VRmin = "Efmin_gen1"
                execution_rate = "Ts"
                initial_field_voltage = "Vf0_gen1"
                initial_terminal_voltage = "Vt0_gen1"
                start_time = "0"
    	    
            }
            [
                position = 8240, 8184
            ]
            
            component gen_digital_probe "Fuel off" {
                
    	    
            }
            [
                position = 8144, 8392
            ]
            
            component gen_sum "Sum5" {
                
                execution_rate = "Ts"
    	    
            }
            [
                position = 7992, 8184
            ]
            
            component src_cp_input "Vref" {
                
                addr = "4294966780"
                def_value = "1"
                execution_rate = "Ts"
                group = "Exciter Settings"
                max = "1000000.0"
                min = "-1000000.0"
                unit = "pu"
                widget_label = "Vref_gen2"
    	    
            }
            [
                position = 7888, 8136
            ]
            
            component gen_probe "Vt_pu" {
                
                addr = "17962"
                execution_rate = "Ts"
    	    
            }
            [
                position = 7928, 8344
            ]
            
            component gen_gain "Vt_to_Vtpu" {
                
                execution_rate = "Ts"
                gain = "1.0/Vb_gen1"
    	    
            }
            [
                position = 7832, 8272
            ]
            
            component src_constant "Vpss" {
                
                execution_rate = "Ts"
                value = "[0]"
    	    
            }
            [
                position = 8096, 8112
            ]
            
            component sys_signal_switch "Signal switch1" {
                
                threshold = "0.5"
    	    
            }
            [
                position = 8120, 8248
            ]
            
            component gen_sum "Sum1" {
                
    	    
            }
            [
                position = 8480, 8192
            ]
            
            component gen_gain "Vfpu_to_Vf" {
                
                execution_rate = "Ts"
                gain = "[35.296]"
    	    
            }
            [
                position = 8584, 8192
            ]
            
            component src_cp_input "Vf_stop" {
                
                execution_rate = "Ts"
                group = "Stop Gen2"
                unit = "V"
                widget_label = "Vf_gen2"
    	    
            }
            [
                position = 8400, 8112
            ]
            
            component Subsystem "PI control" {
                layout = dynamic
        
                
                component gen_gain "ki" {
                    
                    execution_rate = "Ts"
                    gain = "[1.19]"
        	    
                }
                [
                    position = 8088, 8208
                ]
                
                component gen_gain "kp" {
                    
                    execution_rate = "Ts"
                    gain = "[1.16]"
        	    
                }
                [
                    position = 8088, 8152
                ]
                
                component gen_sum "Sum6" {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 8304, 8192
                ]
                
                component gen_integrator "Integrator1" {
                    
                    limit_lower = "[-5]"
                    limit_output = "True"
                    limit_upper = "[5]"
                    show_reset = "level"
        	    
                }
                [
                    position = 8192, 8240
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "In" {
                    label = "In"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7968, 8152
                    size = 25, 25
                ]
                port "Reset" {
                    label = "Reset"
                    
                    position = left:3
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7976, 8248
                    size = 25, 25
                ]
                port "Out" {
                    label = "Out"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8376, 8192
                    size = 25, 25
                ]
                
                junction "Junction1" sp
                [
                    position = 8016, 8152
                ]
                
                connect "Integrator1.reset" Reset as Connection1
                
                
                connect "Integrator1.out" "Sum6.in1" as Connection2
                
                
                connect Junction1 In as Connection3
                
                
                connect "Sum6.out" Out as Connection4
                
                
                connect "ki.out" "Integrator1.in" as Connection5
                
                
                connect "ki.in" Junction1 as Connection6
                
                
                connect "kp.in" Junction1 as Connection7
                
                
                connect "kp.out" "Sum6.in" as Connection8
                
                
        
                
            }
            [
                position = 8376, 8200
                size = 56, 64
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "Delta_V_in" {
                label = "Delta_V_in"
                
                position = left:2
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7888, 8192
                size = 25, 25
            ]
            port "Vf_out" {
                label = "Vf_out"
                
                position = right:1
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8672, 8192
                size = 25, 25
            ]
            port "Vt_in" {
                label = "Vt_in"
                
                position = left:3
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7768, 8272
                size = 25, 25
            ]
            port "Fuel_off" {
                label = "Reset"
                
                position = left:1
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 8048, 8328
                size = 25, 25
            ]
            
            junction "Junction103" sp
            [
                position = 7864, 8272
                size = 0, 0
            ]
            
            junction "Junction104" sp
            [
                position = 8080, 8328
                size = 0, 0
            ]
            
            junction "Junction109" sp
            [
                position = 8088, 8184
                size = 0, 0
            ]
            
            junction "Junction110" sp
            [
                position = 8112, 8328
            ]
            
            junction "Junction111" sp
            [
                position = 8528, 8192
            ]
            
            connect "IEEE DC1A exciter1.field_voltage" "PI control.In" as Connection1
            
            
            connect Junction103 "Vt_to_Vtpu.out" as Connection2
            
            
            connect Junction104 "Fuel_off" as Connection3
            
            
            connect Junction104 Junction110 as Connection4
            
            
            connect Junction109 "IEEE DC1A exciter1.vref" as Connection5
            
            
            connect Junction110 "Fuel off.in" as Connection6
            
            
            connect Junction111 "Sum1.out" as Connection7
            
            
            connect "PI control.Reset" Junction110 as Connection8
            
            
            connect "Signal switch1.out" "IEEE DC1A exciter1.terminal_voltage" as Connection9
            
            
            connect "Signal switch1.in1" Junction103 as Connection10
            
            
            connect "Signal switch1.in2" Junction104 as Connection11
            
            
            connect "Signal switch1.in" Junction109 as Connection12
            
            
            connect "Sum1.in1" "PI control.Out" as Connection13
            
            
            connect "Sum1.in" "Vf_stop.out" as Connection14
            
            
            connect "Sum5.in1" "Delta_V_in" as Connection15
            
            
            connect "Sum5.out" Junction109 as Connection16
            
            
            connect "Sum5.in" "Vref.out" as Connection17
            
            
            connect "Vf.in" Junction111 as Connection18
            
            
            connect "Vfpu_to_Vf.in" Junction111 as Connection19
            
            
            connect "Vfpu_to_Vf.out" "Vf_out" as Connection20
            
            
            connect "Vpss.out" "IEEE DC1A exciter1.vpss" as Connection21
            
            
            connect "Vt_pu.in" Junction103 as Connection22
            
            
            connect "Vt_to_Vtpu.in" "Vt_in" as Connection23
            
            
    
            
        }
        [
            position = 8200, 8056
            scale = -1, 1
            size = 128, 96
        ]
        
        component Subsystem "Q_control_loop" {
            layout = dynamic
    
            
            component gen_gain "stability_gain" {
                
                execution_rate = "Ts"
                gain = "[0.01]"
    	    
            }
            [
                position = 8264, 8208
            ]
            
            component msr_voltage "Delta_V" {
                
                addr = "1540"
                bw_limit = "True"
                execution_rate = "Ts"
                frequency = "2e3"
                sig_output = "True"
    	    
            }
            [
                position = 8112, 8208
                rotation = right
            ]
            
            component gen_gain "Gain10" {
                
                gain = "[10]"
    	    
            }
            [
                position = 8184, 8208
            ]
            
            component gen_probe "Delta_V_in" {
                
                addr = "17961"
    	    
            }
            [
                position = 8264, 8136
            ]
            
            component sys_spc_marker "Core Marker3" {
                
    	    
            }
            [
                position = 8032, 8112
            ]
            
            component src_voltage_ext "V_Delta_V" {
                
                ai_gain = "0.1"
                ai_pin_addr = "2"
    	    
            }
            [
                position = 7960, 8208
                rotation = right
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "Delta_V_out" {
                label = "Delta_V_out"
                
                position = right:1
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8344, 8208
                size = 25, 25
            ]
            
            junction "Junction1316" sp
            [
                position = 8216, 8208
                size = 0, 0
            ]
            
            junction "Junction1322" pe
            [
                position = 8032, 8168
                size = 0, 0
            ]
            
            connect "Core Marker3.node" Junction1322 as Connection1
            
            
            connect "Delta_V.out" "Gain10.in" as Connection2
            
            
            connect "Delta_V_in.in" Junction1316 as Connection3
            
            
            connect Junction1316 "Gain10.out" as Connection4
            
            
            connect Junction1322 "Delta_V.p_node" as Connection5
            
            
            connect "V_Delta_V.n_node" "Delta_V.n_node" as Connection6
            
            
            connect "V_Delta_V.p_node" Junction1322 as Connection7
            
            
            connect "stability_gain.out" "Delta_V_out" as Connection8
            
            
            connect "stability_gain.in" Junction1316 as Connection9
            
            
    
            
        }
        [
            position = 8416, 8056
            scale = -1, 1
            size = 88, 48
        ]
        
        component Subsystem "G1grid_meas" {
            layout = dynamic
    
            
            component msr_current "IB" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7408, 8024
            ]
            
            component msr_current "IA" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7328, 7928
            ]
            
            component msr_voltage "VC" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8200, 8344
                rotation = right
            ]
            
            component msr_voltage "VB" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8280, 8280
                rotation = right
            ]
            
            component msr_current "IC" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 7496, 8120
            ]
            
            component msr_voltage "VA" {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8360, 8216
                rotation = right
            ]
            
            component pas_resistor "R1" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 7880, 8312
                rotation = right
            ]
            
            component pas_resistor "R2" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 7936, 8312
                rotation = right
            ]
            
            component pas_resistor "R3" {
                
                resistance = "1e5"
    	    
            }
            [
                position = 7992, 8312
                rotation = right
            ]
            
            component gen_PQ_transform "Power Meter1" {
                
                filter_cutoff_Hz = "20"
                filter_order = "second order"
    	    
            }
            [
                position = 8632, 7800
            ]
            
            component gen_probe "P_meas" {
                
    	    
            }
            [
                position = 8736, 7736
            ]
            
            component gen_probe "Q_meas" {
                
    	    
            }
            [
                position = 8736, 7800
            ]
            component "core/Voltage RMS" "VBrms"{
                
            }
            [
                position = 7688, 8280
                rotation = right
                size = 64, 32
            ]
            
            component "core/Current RMS" "IArms"{
                
            }
            [
                position = 7224, 7928
                size = 64, 32
            ]
            
            component "core/Current RMS" "IBrms"{
                
            }
            [
                position = 7224, 8024
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VArms"{
                
            }
            [
                position = 7784, 8208
                rotation = right
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "VCrms"{
                
            }
            [
                position = 7584, 8320
                rotation = right
                size = 64, 32
            ]
            
            component "core/Current RMS" "ICrms"{
                
            }
            [
                position = 7224, 8120
                size = 64, 32
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "P1" {
                label = "a"
                
                position = right:1
                kind = pe
            }
            [
                position = 8432, 7928
                rotation = down
            ]
            port "P2" {
                label = "b"
                
                position = right:2
                kind = pe
            }
            [
                position = 8432, 8024
                rotation = down
            ]
            port "P3" {
                label = "c"
                
                position = right:3
                kind = pe
            }
            [
                position = 8432, 8120
                rotation = down
            ]
            port "P4" {
                label = "A"
                
                position = left:1
                kind = pe
            }
            [
                position = 7128, 7928
            ]
            port "P5" {
                label = "B"
                
                position = left:2
                kind = pe
            }
            [
                position = 7128, 8024
            ]
            port "P6" {
                label = "C"
                
                position = left:3
                kind = pe
            }
            [
                position = 7128, 8120
            ]
            
            junction "Junction1421" pe
            [
                position = 8280, 8456
            ]
            
            junction "Junction1463" pe
            [
                position = 8200, 8456
            ]
            
            junction "Junction1466" pe
            [
                position = 8360, 7928
            ]
            
            junction "Junction1467" pe
            [
                position = 8280, 8024
            ]
            
            junction "Junction1468" pe
            [
                position = 8200, 8120
            ]
            
            junction "Junction1479" pe
            [
                position = 7784, 8456
            ]
            
            junction "Junction1481" pe
            [
                position = 7688, 8456
            ]
            
            junction "Junction1482" pe
            [
                position = 7584, 8120
            ]
            
            junction "Junction1483" pe
            [
                position = 7688, 8024
            ]
            
            junction "Junction1484" pe
            [
                position = 7784, 7928
            ]
            
            junction "Junction1486" pe
            [
                position = 7992, 7928
            ]
            
            junction "Junction1487" pe
            [
                position = 7936, 8024
            ]
            
            junction "Junction1488" pe
            [
                position = 7880, 8120
            ]
            
            junction "Junction1489" pe
            [
                position = 7880, 8456
            ]
            
            junction "Junction1490" pe
            [
                position = 7936, 8456
            ]
            
            junction "Junction1491" pe
            [
                position = 7992, 8456
            ]
            
            connect "IA.n_node" Junction1484 as Connection351
            
            
            connect "IArms.n_node" "IA.p_node" as Connection340
            
            
            connect "IB.n_node" Junction1483 as Connection348
            
            
            connect "IBrms.n_node" "IB.p_node" as Connection341
            
            
            connect "IC.n_node" Junction1482 as Connection345
            
            
            connect "ICrms.n_node" "IC.p_node" as Connection342
            
            
            connect Junction1421 Junction1463 as Connection224
            
            
            connect Junction1463 "VC.n_node" as Connection225
            
            
            connect Junction1466 P1 as Connection299
            
            
            connect Junction1467 P2 as Connection301
            
            
            connect Junction1468 P3 as Connection302
            
            
            connect Junction1479 Junction1489 as Connection376
            
            
            connect Junction1479 "VArms.n_node" as Connection310
            
            
            connect Junction1481 Junction1479 as Connection315
            
            
            connect Junction1482 Junction1488 as Connection373
            [
                breakpoints =7584, 8120
            ]
            
            connect Junction1483 Junction1487 as Connection370
            
            
            connect Junction1483 "VBrms.p_node" as Connection347
            
            
            connect Junction1484 Junction1486 as Connection367
            
            
            connect Junction1484 "VArms.p_node" as Connection350
            
            
            connect Junction1486 Junction1466 as Connection368
            
            
            connect Junction1487 Junction1467 as Connection371
            
            
            connect Junction1488 Junction1468 as Connection374
            [
                breakpoints =8000, 8120
            ]
            
            connect Junction1489 Junction1490 as Connection379
            
            
            connect Junction1491 Junction1463 as Connection383
            
            
            connect Junction1491 Junction1490 as Connection385
            [
                breakpoints =7992, 8456;7976, 8456
            ]
            
            connect P4 "IArms.p_node" as Connection337
            
            
            connect P5 "IBrms.p_node" as Connection338
            
            
            connect P6 "ICrms.p_node" as Connection339
            
            
            connect "P_meas.in" "Power Meter1.Pdc" as Connection392
            
            
            connect "Power Meter1.ia" "IA.out" as Connection396
            
            
            connect "Power Meter1.ib" "IB.out" as Connection395
            
            
            connect "Power Meter1.ic" "IC.out" as Connection394
            
            
            connect "Power Meter1.vb" "VB.out" as Connection398
            [
                breakpoints =8544, 7776
            ]
            
            connect "Q_meas.in" "Power Meter1.Qdc" as Connection393
            
            
            connect "R1.p_node" Junction1488 as Connection375
            
            
            connect "R1.n_node" Junction1489 as Connection378
            
            
            connect "R2.p_node" Junction1487 as Connection372
            
            
            connect "R2.n_node" Junction1490 as Connection381
            
            
            connect "R3.p_node" Junction1486 as Connection369
            
            
            connect "R3.n_node" Junction1491 as Connection384
            
            
            connect "VA.n_node" Junction1421 as Connection237
            
            
            connect "VA.p_node" Junction1466 as Connection240
            
            
            connect "VA.out" "Power Meter1.va" as Connection397
            [
                breakpoints =8520, 8208
            ]
            
            connect "VB.n_node" Junction1421 as Connection203
            
            
            connect "VB.p_node" Junction1467 as Connection243
            
            
            connect "VBrms.n_node" Junction1481 as Connection316
            
            
            connect "VC.p_node" Junction1468 as Connection246
            
            
            connect "VC.out" "Power Meter1.vc" as Connection399
            [
                breakpoints =8568, 8344
            ]
            
            connect "VCrms.n_node" Junction1481 as Connection314
            
            
            connect "VCrms.p_node" Junction1482 as Connection343
            
            
    
            
        }
        [
            position = 6920, 8064
            size = 56, 232
        ]
        
        component Subsystem "Measurements" {
            layout = dynamic
    
            
            component pas_resistor "R15" {
                
                resistance = "4761.0"
    	    
            }
            [
                position = 7088, 8272
                rotation = right
            ]
            
            component pas_capacitor "C1" {
                
                capacitance = "0.5e-6"
    	    
            }
            [
                position = 7272, 8016
                rotation = right
            ]
            
            component pas_resistor "R14" {
                
                resistance = "4761.0"
    	    
            }
            [
                position = 7032, 8272
                rotation = right
            ]
            
            component gen_gain "Gain8" {
                
                gain = "[1.0e-6]"
    	    
            }
            [
                position = 7656, 7736
                scale = -1, 1
            ]
            
            component gen_gain "Gain9" {
                
                gain = "[1.0e-6]"
    	    
            }
            [
                position = 7656, 7680
                scale = -1, 1
            ]
            
            component gen_gain "Gain7" {
                
                gain = "[1.0e-6]"
    	    
            }
            [
                position = 7656, 7792
                scale = -1, 1
            ]
            
            component pas_capacitor "C3" {
                
                capacitance = "0.5e-6"
    	    
            }
            [
                position = 7360, 8112
                rotation = left
            ]
            
            component msr_current "Ic" {
                
                addr = "26"
                execution_rate = "Ts"
                frequency = "10000.0"
                sig_output = "True"
    	    
            }
            [
                position = 8248, 8160
                scale = -1, 1
            ]
            
            component src_ground "gnd3" {
                
    	    
            }
            [
                position = 8104, 8480
            ]
            
            component gen_probe "P_Gen1" {
                
                addr = "17965"
    	    
            }
            [
                position = 7576, 7680
                scale = -1, 1
            ]
            
            component msr_voltage "Vc" {
                
                addr = "5"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8168, 8360
                rotation = right
                scale = -1, 1
            ]
            
            component msr_current "Ia" {
                
                addr = "22"
                execution_rate = "Ts"
                frequency = "10000.0"
                sig_output = "True"
    	    
            }
            [
                position = 8440, 7968
                scale = -1, 1
            ]
            
            component pas_resistor "R16" {
                
                resistance = "4761.0"
    	    
            }
            [
                position = 7144, 8272
                rotation = right
            ]
            
            component gen_probe "S_Gen1" {
                
                addr = "17951"
    	    
            }
            [
                position = 7576, 7792
                scale = -1, 1
            ]
            
            component gen_probe "Q_Gen1" {
                
                addr = "17938"
    	    
            }
            [
                position = 7576, 7736
                scale = -1, 1
            ]
            
            component msr_current "Ib" {
                
                addr = "24"
                execution_rate = "Ts"
                frequency = "10000.0"
                sig_output = "True"
    	    
            }
            [
                position = 8336, 8064
                scale = -1, 1
            ]
            
            component pas_capacitor "C2" {
                
                capacitance = "0.5e-6"
    	    
            }
            [
                position = 7272, 8112
                rotation = right
            ]
            
            component src_ground "gnd4" {
                
    	    
            }
            [
                position = 7088, 8416
            ]
            
            component msr_voltage "Va" {
                
                addr = "3"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8040, 8216
                rotation = right
                scale = -1, 1
            ]
            
            component msr_voltage "Vb" {
                
                addr = "4"
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8104, 8288
                rotation = right
                scale = -1, 1
            ]
            component "core/Current RMS" "Ic_rms"{
                
            }
            [
                position = 7472, 8160
                scale = -1, 1
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "Vc_rms"{
                
            }
            [
                position = 7760, 8352
                rotation = right
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "Vb_rms"{
                
            }
            [
                position = 7704, 8304
                rotation = right
                size = 64, 32
            ]
            
            
            component Subsystem "Calculate Vt" {
                layout = dynamic
        
                
                component gen_sum "Sum2" {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 8376, 8024
                ]
                
                component gen_pll_three_phs "Voltage PLL" {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7912, 8152
                ]
                
                component gen_math_fnc "squareRoot" {
                    
                    execution_rate = "Ts"
                    mathematical_fn = "sqrt"
        	    
                }
                [
                    position = 8456, 8024
                ]
                
                component gen_terminator "Termination2" {
                    
        	    
                }
                [
                    position = 8096, 8176
                ]
                
                component gen_terminator "Termination4" {
                    
        	    
                }
                [
                    position = 8008, 8248
                ]
                
                component gen_math_fnc "squaring" {
                    
                    execution_rate = "Ts"
                    mathematical_fn = "power"
        	    
                }
                [
                    position = 8296, 7992
                ]
                
                component gen_terminator "Termination3" {
                    
        	    
                }
                [
                    position = 8040, 8192
                ]
                
                component src_constant "cte2" {
                    
                    execution_rate = "Ts"
                    value = "[2]"
        	    
                }
                [
                    position = 8192, 8088
                ]
                
                component gen_math_fnc "squaring1" {
                    
                    execution_rate = "Ts"
                    mathematical_fn = "power"
        	    
                }
                [
                    position = 8296, 8056
                ]
                
                component gen_terminator "Termination1" {
                    
        	    
                }
                [
                    position = 8152, 8144
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "Va_in" {
                    label = "Va_in"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7768, 8120
                    size = 25, 25
                ]
                port "Vb_in" {
                    label = "Vb_in"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7808, 8152
                    size = 25, 25
                ]
                port "Vc_in" {
                    label = "Vc-in"
                    
                    position = left:3
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7848, 8184
                    size = 25, 25
                ]
                port "Vt_out" {
                    label = "Vt_out"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8528, 8024
                    size = 25, 25
                ]
                
                junction "Junction63" sp
                [
                    position = 8256, 8064
                    size = 0, 0
                ]
                
                connect Junction63 "squaring.in1" as Connection1
                
                
                connect "Sum2.out" "squareRoot.in" as Connection2
                
                
                connect "Sum2.in" "squaring.out" as Connection3
                
                
                connect "Sum2.in1" "squaring1.out" as Connection4
                
                
                connect "Termination1.in" "Voltage PLL.zero_axis" as Connection5
                
                
                connect "Termination3.in" "Voltage PLL.theta" as Connection6
                
                
                connect "Termination4.in" "Voltage PLL.sin_theta" as Connection7
                
                
                connect "Voltage PLL.freq" "Termination2.in" as Connection8
                
                
                connect "Voltage PLL.va" "Va_in" as Connection9
                
                
                connect "Voltage PLL.vb" "Vb_in" as Connection10
                
                
                connect "Voltage PLL.vc" "Vc_in" as Connection11
                
                
                connect "Voltage PLL.d_axis" "squaring.in" as Connection12
                
                
                connect "cte2.out" Junction63 as Connection13
                
                
                connect "squareRoot.out" "Vt_out" as Connection14
                
                
                connect "squaring1.in1" Junction63 as Connection15
                
                
                connect "squaring1.in" "Voltage PLL.q_axis" as Connection16
                
                
        
                
            }
            [
                position = 8552, 7712
                size = 80, 64
            ]
            component "core/Current RMS" "Ib_rms"{
                
            }
            [
                position = 7480, 8064
                scale = -1, 1
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "Va_rms"{
                
            }
            [
                position = 7648, 8248
                rotation = right
                size = 64, 32
            ]
            
            component "core/Current RMS" "Ia_rms"{
                
            }
            [
                position = 7480, 7968
                scale = -1, 1
                size = 64, 32
            ]
            
            
            component Subsystem "PQ measure" {
                layout = dynamic
        
                
                component gen_terminator "Termination2" {
                    
        	    
                }
                [
                    position = 7992, 8208
                    scale = -1, 1
                ]
                
                component gen_PQ_transform "PQ Power Meter1" {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 8192, 8192
                    scale = -1, 1
                ]
                
                component gen_terminator "Termination1" {
                    
        	    
                }
                [
                    position = 7936, 8184
                    scale = -1, 1
                ]
                
                component gen_terminator "Termination4" {
                    
        	    
                }
                [
                    position = 8104, 8248
                    scale = -1, 1
                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "P_meas_out" {
                    label = "P_meas_out"
                    
                    position = left:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8128, 8136
                    rotation = down
                    size = 25, 25
                ]
                port "Q_meas_out" {
                    label = "Q_meas_out"
                    
                    position = left:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8056, 8152
                    rotation = down
                    size = 25, 25
                ]
                port "Va_in" {
                    label = "Va_in"
                    
                    position = right:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8272, 8048
                    rotation = down
                    size = 25, 25
                ]
                port "Vb_in" {
                    label = "Vb_in"
                    
                    position = right:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8304, 8096
                    rotation = down
                    size = 25, 25
                ]
                port "Vc_in" {
                    label = "Vc_in"
                    
                    position = right:4
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8360, 8144
                    rotation = down
                    size = 25, 25
                ]
                port "Ia_in" {
                    label = "Ia_in"
                    
                    position = right:6
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8360, 8240
                    rotation = down
                    size = 25, 25
                ]
                port "Ib_in" {
                    label = "Ib_in"
                    
                    position = right:7
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8312, 8280
                    rotation = down
                    size = 25, 25
                ]
                port "Ic_in" {
                    label = "Ic_in"
                    
                    position = right:10
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8280, 8328
                    rotation = down
                    size = 25, 25
                ]
                port "S_meas_out" {
                    label = "S_meas_out"
                    
                    position = left:3
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 7944, 8272
                    rotation = down
                    size = 25, 25
                ]
                
                connect "PQ Power Meter1.ia" "Ia_in" as Connection1
                
                
                connect "PQ Power Meter1.ib" "Ib_in" as Connection2
                
                
                connect "PQ Power Meter1.ic" "Ic_in" as Connection3
                
                
                connect "PQ Power Meter1.Pdc" "P_meas_out" as Connection4
                
                
                connect "PQ Power Meter1.Qdc" "Q_meas_out" as Connection5
                
                
                connect "PQ Power Meter1.va" "Va_in" as Connection6
                
                
                connect "PQ Power Meter1.vb" "Vb_in" as Connection7
                
                
                connect "PQ Power Meter1.vc" "Vc_in" as Connection8
                
                
                connect "S_meas_out" "PQ Power Meter1.apparent" as Connection9
                
                
                connect "Termination1.in" "PQ Power Meter1.Pac" as Connection10
                
                
                connect "Termination2.in" "PQ Power Meter1.Qac" as Connection11
                
                
                connect "Termination4.in" "PQ Power Meter1.k_factor" as Connection12
                
                
        
                
            }
            [
                position = 7832, 7736
                size = 88, 152
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            tag "Goto3" {
                value = "Vt_gen1"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8680, 7712
            ]
            
            tag "Goto1" {
                value = "P_gen1"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7816, 7600
            ]
            
            tag "Goto2" {
                value = "Q_gen1"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7816, 7552
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "a" {
                label = "a"
                
                position = right:1
                kind = pe
            }
            [
                position = 8528, 7968
                rotation = down
            ]
            port "b" {
                label = "b"
                
                position = right:2
                kind = pe
            }
            [
                position = 8528, 8064
                rotation = down
            ]
            port "c" {
                label = "c"
                
                position = right:3
                kind = pe
            }
            [
                position = 8528, 8160
                rotation = down
            ]
            port "A" {
                label = "A"
                
                position = left:1
                kind = pe
            }
            [
                position = 6952, 7968
            ]
            port "B" {
                label = "B"
                
                position = left:2
                kind = pe
            }
            [
                position = 6952, 8064
            ]
            port "C" {
                label = "C"
                
                position = left:3
                kind = pe
            }
            [
                position = 6952, 8160
            ]
            
            junction "Junction11" pe
            [
                position = 8104, 8416
                size = 0, 0
            ]
            
            junction "Junction19" pe
            [
                position = 8040, 7968
                size = 0, 0
            ]
            
            junction "Junction20" pe
            [
                position = 8104, 8064
                size = 0, 0
            ]
            
            junction "Junction21" pe
            [
                position = 8168, 8160
                size = 0, 0
            ]
            
            junction "Junction22" pe
            [
                position = 8104, 8416
            ]
            
            junction "Junction23" sp
            [
                position = 8008, 7696
            ]
            
            junction "Junction24" sp
            [
                position = 8072, 7712
            ]
            
            junction "Junction25" sp
            [
                position = 8136, 7728
            ]
            
            junction "Junction26" pe
            [
                position = 7648, 7968
            ]
            
            junction "Junction27" pe
            [
                position = 7704, 8064
            ]
            
            junction "Junction28" pe
            [
                position = 7760, 8160
            ]
            
            junction "Junction29" pe
            [
                position = 7704, 8416
            ]
            
            junction "Junction30" pe
            [
                position = 7760, 8416
            ]
            
            junction "Junction31" pe
            [
                position = 8040, 8416
            ]
            
            junction "Junction32" sp
            [
                position = 7752, 7680
            ]
            
            junction "Junction33" sp
            [
                position = 7720, 7736
            ]
            
            junction "Junction34" pe
            [
                position = 7272, 8064
            ]
            
            junction "Junction35" pe
            [
                position = 7272, 8064
            ]
            
            junction "Junction36" pe
            [
                position = 7272, 7968
            ]
            
            junction "Junction37" pe
            [
                position = 7272, 8160
            ]
            
            junction "Junction38" pe
            [
                position = 7360, 8160
            ]
            
            junction "Junction39" pe
            [
                position = 7360, 7968
            ]
            
            junction "Junction97" pe
            [
                position = 7088, 8352
                size = 0, 0
            ]
            
            junction "Junction1475" pe
            [
                position = 7088, 8352
            ]
            
            junction "Junction1476" pe
            [
                position = 7144, 7968
            ]
            
            junction "Junction1477" pe
            [
                position = 7088, 8064
            ]
            
            junction "Junction1478" pe
            [
                position = 7032, 8160
            ]
            
            connect "C1.n_node" Junction35 as Connection278
            
            
            connect "C1.p_node" Junction36 as Connection281
            
            
            connect "C2.p_node" Junction35 as Connection276
            
            
            connect "C2.n_node" Junction37 as Connection284
            
            
            connect "C3.p_node" Junction38 as Connection287
            
            
            connect "C3.n_node" Junction39 as Connection290
            
            
            connect "Calculate Vt.Va_in" Junction23 as Connection232
            
            
            connect "Calculate Vt.Vb_in" Junction24 as Connection235
            
            
            connect "Calculate Vt.Vc_in" Junction25 as Connection238
            
            
            connect "Gain9.in" Junction32 as Connection266
            
            
            connect Goto1 Junction32 as Connection268
            
            
            connect Goto2 Junction33 as Connection271
            
            
            connect Goto3 "Calculate Vt.Vt_out" as Connection272
            
            
            connect "Ia.out" "PQ measure.Ia_in" as Connection239
            
            
            connect "Ia.p_node" a as Connection218
            
            
            connect "Ia_rms.n_node" Junction39 as Connection288
            
            
            connect "Ib.n_node" Junction20 as Connection63
            
            
            connect "Ib.out" "PQ measure.Ib_in" as Connection240
            
            
            connect "Ib.p_node" b as Connection212
            
            
            connect "Ib_rms.n_node" Junction34 as Connection273
            
            
            connect "Ic.n_node" Junction21 as Connection69
            
            
            connect "Ic.out" "PQ measure.Ic_in" as Connection241
            
            
            connect "Ic.p_node" c as Connection217
            
            
            connect "Ic_rms.n_node" Junction38 as Connection285
            
            
            connect Junction11 Junction22 as Connection222
            
            
            connect Junction1475 Junction97 as Connection352
            
            
            connect Junction1476 A as Connection355
            
            
            connect Junction1477 B as Connection358
            
            
            connect Junction1478 C as Connection361
            
            
            connect Junction19 "Ia.n_node" as Connection128
            
            
            connect Junction19 Junction26 as Connection248
            
            
            connect Junction19 "Va.p_node" as Connection129
            
            
            connect Junction20 Junction27 as Connection251
            
            
            connect Junction20 "Vb.p_node" as Connection131
            
            
            connect Junction21 Junction28 as Connection254
            
            
            connect Junction21 "Vc.p_node" as Connection132
            
            
            connect Junction22 "Vc.n_node" as Connection223
            
            
            connect Junction23 "PQ measure.Va_in" as Connection231
            
            
            connect Junction24 "PQ measure.Vb_in" as Connection234
            
            
            connect Junction25 "PQ measure.Vc_in" as Connection237
            
            
            connect Junction26 "Ia_rms.p_node" as Connection249
            
            
            connect Junction27 "Ib_rms.p_node" as Connection252
            
            
            connect Junction28 "Ic_rms.p_node" as Connection255
            
            
            connect Junction29 Junction30 as Connection261
            
            
            connect Junction30 Junction31 as Connection265
            
            
            connect Junction30 "Vc_rms.n_node" as Connection262
            
            
            connect Junction31 Junction22 as Connection264
            
            
            connect Junction32 "PQ measure.P_meas_out" as Connection267
            
            
            connect Junction33 "Gain8.in" as Connection270
            
            
            connect Junction34 Junction1477 as Connection357
            
            
            connect Junction35 Junction34 as Connection277
            
            
            connect Junction36 Junction1476 as Connection354
            
            
            connect Junction37 Junction1478 as Connection360
            
            
            connect Junction38 Junction37 as Connection286
            
            
            connect Junction39 Junction36 as Connection289
            
            
            connect Junction97 "R16.n_node" as Connection140
            
            
            connect "PQ measure.S_meas_out" "Gain7.in" as Connection157
            
            
            connect "PQ measure.Q_meas_out" Junction33 as Connection269
            
            
            connect "P_Gen1.in" "Gain9.out" as Connection158
            
            
            connect "Q_Gen1.in" "Gain8.out" as Connection161
            
            
            connect "R14.p_node" Junction1478 as Connection362
            
            
            connect "R14.n_node" Junction97 as Connection165
            
            
            connect "R15.n_node" Junction1475 as Connection351
            
            
            connect "R15.p_node" Junction1477 as Connection359
            
            
            connect "R16.p_node" Junction1476 as Connection356
            
            
            connect "S_Gen1.in" "Gain7.out" as Connection192
            
            
            connect "Va.n_node" Junction11 as Connection207
            
            
            connect "Va.out" Junction23 as Connection230
            
            
            connect "Va_rms.p_node" Junction26 as Connection250
            
            
            connect "Va_rms.n_node" Junction29 as Connection258
            
            
            connect "Vb.n_node" Junction11 as Connection209
            
            
            connect "Vb.out" Junction24 as Connection233
            
            
            connect "Vb_rms.p_node" Junction27 as Connection253
            
            
            connect "Vb_rms.n_node" Junction29 as Connection260
            
            
            connect "Vc.out" Junction25 as Connection236
            
            
            connect "Vc_rms.p_node" Junction28 as Connection256
            
            
            connect "gnd3.node" Junction31 as Connection263
            
            
            connect "gnd4.node" Junction1475 as Connection353
            
            
    
            
        }
        [
            position = 7656, 8064
            size = 112, 112
        ]
        component "core/Transmission Line" "Line5"{
            
            C_sequence_metric = "c_13"
            Frequency = "sys_freq"
            L_sequence_metric = "l_13"
            Length_metric = "1.67639"
            R_sequence_metric = "r_13"
            model_def = "Sequence"
            unit_sys = "metric"
        }
        [
            position = 6408, 8064
            size = 256, 72
        ]
        
        component "core/Three Phase Device Coupling" "DC0"{
            
            L1 = "1e-4"
            R1 = "10"
            R2 = "1e-4"
            snb_type_i = "R1-C1"
        }
        [
            position = 6832, 8064
            size = 32, 256
        ]
        
        
        component Subsystem "RL_Ld2" {
            layout = dynamic
    
            
            component pas_resistor "R3" {
                
                resistance = "R"
    	    
            }
            [
                position = 8232, 8288
            ]
            
            component pas_inductor "L1" {
                
                inductance = "L"
    	    
            }
            [
                position = 8384, 8096
            ]
            
            component pas_resistor "R1" {
                
                resistance = "R"
    	    
            }
            [
                position = 8232, 8096
            ]
            
            component pas_resistor "R2" {
                
                resistance = "R"
    	    
            }
            [
                position = 8232, 8192
            ]
            
            component pas_inductor "L3" {
                
                inductance = "L"
    	    
            }
            [
                position = 8384, 8288
            ]
            
            component pas_inductor "L2" {
                
                inductance = "L"
    	    
            }
            [
                position = 8384, 8192
            ]
            component "core/Voltage RMS" "Vrms"{
                
            }
            [
                position = 8064, 8144
                rotation = right
                size = 64, 32
            ]
            
            component "core/Current RMS" "Irms"{
                
            }
            [
                position = 8136, 8096
                size = 64, 32
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "P1" {
                label = "A"
                
                position = left:1
                kind = pe
            }
            [
                position = 8000, 8096
            ]
            port "P2" {
                label = "B"
                
                position = left:2
                kind = pe
            }
            [
                position = 8000, 8192
            ]
            port "P3" {
                label = "C"
                
                position = left:3
                kind = pe
            }
            [
                position = 8000, 8288
            ]
            
            junction "Junction1496" pe
            [
                position = 8456, 8192
            ]
            
            junction "Junction1497" pe
            [
                position = 8064, 8096
            ]
            
            junction "Junction1498" pe
            [
                position = 8064, 8192
            ]
            
            connect "Irms.n_node" "R1.p_node" as Connection962
            
            
            connect Junction1496 "L3.n_node" as Connection946
            
            
            connect Junction1497 "Irms.p_node" as Connection964
            
            
            connect Junction1498 "R2.p_node" as Connection967
            [
                breakpoints =8080, 8192;8120, 8192
            ]
            
            connect "L1.n_node" Junction1496 as Connection945
            
            
            connect "L1.p_node" "R1.n_node" as Connection941
            
            
            connect "L1.p_node" "R1.n_node" as Connection942
            
            
            connect "L2.n_node" Junction1496 as Connection947
            
            
            connect "L2.p_node" "R2.n_node" as Connection943
            
            
            connect P1 Junction1497 as Connection963
            
            
            connect P2 Junction1498 as Connection966
            [
                breakpoints =8032, 8192
            ]
            
            connect "R3.n_node" "L3.p_node" as Connection951
            
            
            connect "R3.p_node" P3 as Connection950
            
            
            connect "Vrms.p_node" Junction1497 as Connection965
            
            
            connect "Vrms.n_node" Junction1498 as Connection968
            [
                breakpoints =8064, 8184
            ]
            
            L = "0.0057"
            R = "4.45"
    
            
            /*
                Masks
            */
            mask {
                description = "3 Phase Y connected balanced load. 
                                                                                                                                                                                                                R is the single phase resistance.
                                                                                                                                                                                                                L is the single phase inductance."
                
                R {
                    label = "Resistor"
                    widget = edit
                    type = generic
                    default_value = "0"
                    unit = "Ohms"
        	    
        	    
                }
                
                L {
                    label = "Inductor"
                    widget = edit
                    type = generic
                    default_value = "0"
                    unit = "H"
        	    
        	    
                }
                
        	
            CODE component_open
                from typhoon.apps.schematic_editor.dialogs.component_property_dialogs.general import RegularComponentPropertiesDialog
            
                dialog = RegularComponentPropertiesDialog(
                    component=component,
                    property_container=component.masks[-1],
                    current_diagram=current_diagram
                )
                dialog.exec_()
                
            ENDCODE
            }
        }
        [
            position = 7872, 8896
            size = 88, 240
        ]
        
        component Subsystem "RL_Ld3" {
            layout = dynamic
    
            
            component pas_resistor "R2" {
                
                resistance = "R"
    	    
            }
            [
                position = 8200, 8192
            ]
            
            component pas_resistor "R1" {
                
                resistance = "R"
    	    
            }
            [
                position = 8200, 8096
            ]
            
            component pas_inductor "L2" {
                
                inductance = "L"
    	    
            }
            [
                position = 8352, 8192
            ]
            
            component pas_resistor "R3" {
                
                resistance = "R"
    	    
            }
            [
                position = 8200, 8288
            ]
            
            component pas_inductor "L1" {
                
                inductance = "L"
    	    
            }
            [
                position = 8352, 8096
            ]
            
            component pas_inductor "L3" {
                
                inductance = "L"
    	    
            }
            [
                position = 8352, 8288
            ]
            component "core/Voltage RMS" "Vrms"{
                
            }
            [
                position = 8048, 8144
                rotation = right
                size = 64, 32
            ]
            
            component "core/Current RMS" "Irms"{
                
            }
            [
                position = 8112, 8096
                size = 64, 32
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "P1" {
                label = "A"
                
                position = left:1
                kind = pe
            }
            [
                position = 8000, 8096
            ]
            port "P2" {
                label = "B"
                
                position = left:2
                kind = pe
            }
            [
                position = 8000, 8192
            ]
            port "P3" {
                label = "C"
                
                position = left:3
                kind = pe
            }
            [
                position = 8000, 8288
            ]
            
            junction "Junction1496" pe
            [
                position = 8424, 8192
            ]
            
            junction "Junction1497" pe
            [
                position = 8048, 8096
            ]
            
            junction "Junction1498" pe
            [
                position = 8048, 8192
            ]
            
            connect "Irms.p_node" Junction1497 as Connection962
            
            
            connect "Irms.n_node" "R1.p_node" as Connection968
            
            
            connect Junction1496 "L3.n_node" as Connection946
            
            
            connect Junction1497 P1 as Connection963
            
            
            connect Junction1498 "R2.p_node" as Connection966
            [
                breakpoints =8056, 8192;8104, 8192
            ]
            
            connect "L1.n_node" Junction1496 as Connection945
            
            
            connect "L1.p_node" "R1.n_node" as Connection942
            
            
            connect "L1.p_node" "R1.n_node" as Connection941
            
            
            connect "L2.n_node" Junction1496 as Connection947
            
            
            connect "L2.p_node" "R2.n_node" as Connection943
            
            
            connect P2 Junction1498 as Connection965
            [
                breakpoints =8032, 8192
            ]
            
            connect "R3.n_node" "L3.p_node" as Connection951
            
            
            connect "R3.p_node" P3 as Connection950
            
            
            connect "Vrms.p_node" Junction1497 as Connection964
            [
                breakpoints =8048, 8096
            ]
            
            connect "Vrms.n_node" Junction1498 as Connection967
            [
                breakpoints =8048, 8192
            ]
            
            L = "2.664e-4"
            R = "0.2074"
    
            
            /*
                Masks
            */
            mask {
                description = "3 Phase Y connected balanced load. 
                                                                                                                                                                                                                                                R is the single phase resistance.
                                                                                                                                                                                                                                                L is the single phase inductance."
                
                R {
                    label = "Resistor"
                    widget = edit
                    type = generic
                    default_value = "0"
                    unit = "Ohms"
        	    
        	    
                }
                
                L {
                    label = "Inductor"
                    widget = edit
                    type = generic
                    default_value = "0"
                    unit = "H"
        	    
        	    
                }
                
        	
            CODE component_open
                from typhoon.apps.schematic_editor.dialogs.component_property_dialogs.general import RegularComponentPropertiesDialog
            
                dialog = RegularComponentPropertiesDialog(
                    component=component,
                    property_container=component.masks[-1],
                    current_diagram=current_diagram
                )
                dialog.exec_()
                
            ENDCODE
            }
        }
        [
            position = 7872, 9168
            size = 88, 240
        ]
        
        component Subsystem "Battery Storage" {
            layout = dynamic
    
            
            component sys_spc_marker "Core Marker4" {
                
                marker_id = "id00"
    	    
            }
            [
                position = 8824, 7840
            ]
            
            component pas_resistor "R16" {
                
                resistance = "10e3"
    	    
            }
            [
                position = 9128, 8352
                rotation = right
            ]
            
            component msr_voltage "Vg_CN" {
                
                execution_rate = "Tfast"
    	    
            }
            [
                position = 8152, 8408
                rotation = right
                scale = -1, 1
            ]
            
            component pas_capacitor "C3" {
                
                capacitance = "325e-6"
    	    
            }
            [
                position = 8344, 8504
                rotation = right
            ]
            
            component msr_voltage "Vg_AN" {
                
                execution_rate = "Tfast"
    	    
            }
            [
                position = 8040, 8488
                rotation = right
                scale = -1, 1
            ]
            
            component msr_voltage "Vg_BN" {
                
                execution_rate = "Tfast"
    	    
            }
            [
                position = 8096, 8448
                rotation = right
                scale = -1, 1
            ]
            
            component msr_current "Iga" {
                
                execution_rate = "Tfast"
    	    
            }
            [
                position = 7840, 8072
                scale = 1, -1
            ]
            
            component pas_resistor "R15" {
                
    	    
            }
            [
                position = 8912, 7952
                rotation = right
            ]
            
            component pas_inductor "L7" {
                
                inductance = "L_inv_EPC"
    	    
            }
            [
                position = 8096, 8264
            ]
            
            component src_voltage "Vdc_" {
                
    	    
            }
            [
                position = 7176, 8216
                rotation = right
            ]
            
            component msr_voltage "Va" {
                
                execution_rate = "Tfast"
    	    
            }
            [
                position = 8760, 8352
                rotation = right
            ]
            
            component msr_current "I_grid_side_b" {
                
                execution_rate = "Tfast"
    	    
            }
            [
                position = 8592, 8168
                scale = 1, -1
            ]
            
            component cpl_spc_3ph "CC2" {
                
    	    
            }
            [
                position = 8416, 8168
            ]
            
            component ctc_tpst "MX1" {
                
                Sa = "16"
    	    
            }
            [
                position = 8688, 8168
            ]
            
            component pas_inductor "L9" {
                
                inductance = "L_inv_EPC"
    	    
            }
            [
                position = 8096, 8072
            ]
            
            component pas_inductor "L8" {
                
                inductance = "L_inv_EPC"
    	    
            }
            [
                position = 8096, 8168
            ]
            
            component pas_capacitor "C1" {
                
                capacitance = "325e-6"
    	    
            }
            [
                position = 8216, 8504
                rotation = right
            ]
            
            component msr_current "Igb" {
                
                execution_rate = "Tfast"
    	    
            }
            [
                position = 7840, 8168
                scale = 1, -1
            ]
            
            component cpl_spc_1ph "Core Coupling 1" {
                
    	    
            }
            [
                position = 7568, 8168
            ]
            
            component pas_inductor "L4" {
                
                inductance = "L_grid_EPC"
    	    
            }
            [
                position = 8496, 8168
            ]
            
            component ctc_tpst "MX2" {
                
                Sa = "15"
    	    
            }
            [
                position = 9208, 8168
            ]
            
            component msr_current "Igc" {
                
                execution_rate = "Tfast"
    	    
            }
            [
                position = 7840, 8264
                scale = 1, -1
            ]
            
            component pas_resistor "R11" {
                
    	    
            }
            [
                position = 8216, 8424
                rotation = right
            ]
            
            component pas_capacitor "C4" {
                
                capacitance = "1400e-6"
    	    
            }
            [
                position = 7456, 8160
                rotation = right
            ]
            
            component src_voltage "V_temp" {
                
    	    
            }
            [
                position = 8824, 7952
                rotation = right
            ]
            
            component sys_spc_marker "Core Marker5" {
                
                marker_id = "id00"
    	    
            }
            [
                position = 7176, 7992
            ]
            
            component pas_resistor "R18" {
                
                resistance = "10e3"
    	    
            }
            [
                position = 9000, 8352
                rotation = right
            ]
            
            component msr_current "I_grid_side_a" {
                
                execution_rate = "Tfast"
    	    
            }
            [
                position = 8592, 8072
                scale = 1, -1
            ]
            
            component pas_resistor "R17" {
                
                resistance = "10e3"
    	    
            }
            [
                position = 9064, 8352
                rotation = right
            ]
            
            component pas_inductor "L5" {
                
                inductance = "L_grid_EPC"
    	    
            }
            [
                position = 8496, 8264
            ]
            
            component pas_resistor "R12" {
                
    	    
            }
            [
                position = 8280, 8424
                rotation = right
            ]
            
            component msr_voltage "Vc" {
                
                execution_rate = "Tfast"
    	    
            }
            [
                position = 8904, 8352
                rotation = right
            ]
            
            component pas_inductor "L6" {
                
                inductance = "L_grid_EPC"
    	    
            }
            [
                position = 8496, 8072
            ]
            
            component msr_voltage "Vdc" {
                
    	    
            }
            [
                position = 7528, 8160
                rotation = right
            ]
            
            component pas_resistor "R14" {
                
                resistance = "0.001"
    	    
            }
            [
                position = 7176, 8128
                rotation = left
            ]
            
            component ctc_spst "K1" {
                
                Sa = "14"
    	    
            }
            [
                position = 7272, 8072
            ]
            
            component ctc_spst "K2" {
                
                Sa = "13"
    	    
            }
            [
                position = 7304, 8144
            ]
            
            component pas_capacitor "C2" {
                
                capacitance = "325e-6"
    	    
            }
            [
                position = 8280, 8504
                rotation = right
            ]
            
            component msr_current "I_grid_side_c" {
                
                execution_rate = "Tfast"
    	    
            }
            [
                position = 8592, 8264
                scale = 1, -1
            ]
            
            component msr_voltage "Vb" {
                
                execution_rate = "Tfast"
    	    
            }
            [
                position = 8832, 8352
                rotation = right
            ]
            
            component pas_resistor "R13" {
                
    	    
            }
            [
                position = 8344, 8424
                rotation = right
            ]
            
            component pas_resistor "R19" {
                
    	    
            }
            [
                position = 7368, 8072
            ]
            
            component msr_voltage "V_temp_" {
                
    	    
            }
            [
                position = 9008, 7952
                rotation = right
            ]
            component "core/Three Phase Inverter" "Three Phase Inverter1"{
                
                Sa_bot = "6"
                Sa_top = "5"
                Sc_bot = "2"
                Sc_top = "1"
                ctrl_src = "Digital input per switch"
            }
            [
                position = 7680, 8168
                size = 127, 256
            ]
            
            component "core/Current RMS" "Irms_inv_a"{
                
            }
            [
                position = 8000, 8072
                size = 64, 32
            ]
            
            component "core/Voltage RMS" "Vab_rms"{
                
            }
            [
                position = 8320, 8120
                rotation = right
                size = 64, 32
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "A" {
                label = "A"
                
                position = left:1
                kind = pe
            }
            [
                position = 9288, 8072
                rotation = down
            ]
            port "B" {
                label = "B"
                
                position = left:2
                kind = pe
            }
            [
                position = 9288, 8168
                rotation = down
            ]
            port "C" {
                label = "C"
                
                position = left:3
                kind = pe
            }
            [
                position = 9288, 8264
                rotation = down
            ]
            
            junction "Junction19" pe
            [
                position = 7528, 8072
            ]
            
            junction "Junction20" pe
            [
                position = 7528, 8264
            ]
            
            junction "Junction24" pe
            [
                position = 7456, 8264
            ]
            
            junction "Junction59" pe
            [
                position = 8280, 8352
            ]
            
            junction "Junction93" pe
            [
                position = 7224, 8072
            ]
            
            junction "Junction95" pe
            [
                position = 7456, 8072
            ]
            
            junction "Junction96" pe
            [
                position = 7416, 8072
            ]
            
            junction "Junction98" pe
            [
                position = 8152, 8544
            ]
            
            junction "Junction101" pe
            [
                position = 8216, 8072
            ]
            
            junction "Junction102" pe
            [
                position = 8280, 8168
            ]
            
            junction "Junction108" pe
            [
                position = 8832, 8400
            ]
            
            junction "Junction112" pe
            [
                position = 8904, 8400
            ]
            
            junction "Junction113" pe
            [
                position = 9064, 8400
            ]
            
            junction "Junction114" pe
            [
                position = 9000, 8400
            ]
            
            junction "Junction118" pe
            [
                position = 8904, 8264
            ]
            
            junction "Junction119" pe
            [
                position = 9128, 8264
            ]
            
            junction "Junction120" pe
            [
                position = 8832, 8168
            ]
            
            junction "Junction121" pe
            [
                position = 9064, 8168
            ]
            
            junction "Junction122" pe
            [
                position = 8760, 8072
            ]
            
            junction "Junction123" pe
            [
                position = 9000, 8072
            ]
            
            junction "Junction127" pe
            [
                position = 8824, 7888
            ]
            
            junction "Junction128" pe
            [
                position = 8912, 7888
            ]
            
            junction "Junction129" pe
            [
                position = 8912, 8024
            ]
            
            junction "Junction130" pe
            [
                position = 8216, 8544
            ]
            
            junction "Junction131" pe
            [
                position = 8280, 8544
            ]
            
            junction "Junction132" pe
            [
                position = 8216, 8336
            ]
            
            junction "Junction133" pe
            [
                position = 8096, 8544
            ]
            
            junction "Junction134" pe
            [
                position = 8344, 8368
            ]
            
            junction "Junction135" pe
            [
                position = 8344, 8264
            ]
            
            junction "Junction1523" pe
            [
                position = 7176, 8072
            ]
            
            junction "Junction1524" pe
            [
                position = 8320, 8168
            ]
            
            junction "Junction1525" pe
            [
                position = 8320, 8072
            ]
            
            connect "C1.p_node" "R11.n_node" as Connection113
            
            
            connect "C2.n_node" Junction131 as Connection1039
            
            
            connect "C2.p_node" "R12.n_node" as Connection115
            
            
            connect "C3.n_node" Junction131 as Connection1037
            
            
            connect "C3.p_node" "R13.n_node" as Connection117
            
            
            connect "CC2.c_in" Junction135 as Connection1061
            
            
            connect "CC2.b_in" Junction1524 as Connection1349
            
            
            connect "CC2.a_in" Junction1525 as Connection1352
            
            
            connect "Core Coupling 1.a_in" Junction19 as Connection146
            
            
            connect "Core Coupling 1.b_out" "Three Phase Inverter1.neg_out" as Connection144
            
            
            connect "Core Marker4.node" Junction127 as Connection1013
            
            
            connect "Core Marker5.node" Junction1523 as Connection1345
            
            
            connect "I_grid_side_a.p_node" "L6.n_node" as Connection1340
            
            
            connect "I_grid_side_a.n_node" "MX1.a_in" as Connection878
            
            
            connect "I_grid_side_b.p_node" "L4.n_node" as Connection876
            
            
            connect "I_grid_side_c.n_node" "MX1.c_in" as Connection880
            
            
            connect "Iga.p_node" "Three Phase Inverter1.a_in" as Connection1342
            [
                breakpoints =7784, 8072;7784, 8072;7760, 8072;7744, 8072
            ]
            
            connect "Igb.n_node" "L8.p_node" as Connection549
            
            
            connect "Igc.n_node" "L7.p_node" as Connection548
            
            
            connect "Irms_inv_a.p_node" "Iga.n_node" as Connection221
            
            
            connect "Irms_inv_a.n_node" "L9.p_node" as Connection550
            
            
            connect Junction102 "L8.n_node" as Connection870
            [
                breakpoints =8280, 8168
            ]
            
            connect Junction108 "Va.n_node" as Connection1336
            [
                breakpoints =8808, 8400;8800, 8400;8760, 8400
            ]
            
            connect Junction112 Junction108 as Connection918
            [
                breakpoints =8904, 8400;8840, 8400;8840, 8400
            ]
            
            connect Junction113 Junction114 as Connection923
            
            
            connect Junction114 Junction112 as Connection924
            
            
            connect Junction118 "MX1.c_out" as Connection957
            [
                breakpoints =8904, 8264;8904, 8264;8904, 8264;8904, 8264
            ]
            
            connect Junction119 Junction118 as Connection1335
            
            
            connect Junction120 "MX1.b_out" as Connection964
            
            
            connect Junction121 Junction120 as Connection967
            
            
            connect Junction122 "MX1.a_out" as Connection971
            
            
            connect Junction123 Junction122 as Connection974
            
            
            connect Junction127 "V_temp.p_node" as Connection1014
            [
                breakpoints =8824, 7888;8824, 7888;8824, 7888
            ]
            
            connect Junction128 Junction127 as Connection1017
            
            
            connect Junction129 "V_temp.n_node" as Connection1021
            
            
            connect Junction130 "C1.n_node" as Connection1035
            [
                breakpoints =8216, 8544;8216, 8544;8216, 8544
            ]
            
            connect Junction131 Junction130 as Connection1038
            
            
            connect Junction132 Junction101 as Connection1043
            [
                breakpoints =8216, 8328
            ]
            
            connect Junction133 Junction98 as Connection1047
            [
                breakpoints =8096, 8544
            ]
            
            connect Junction134 "Vg_CN.p_node" as Connection1052
            [
                breakpoints =8344, 8368
            ]
            
            connect Junction135 Junction134 as Connection1055
            
            
            connect Junction1523 "R14.n_node" as Connection1344
            [
                breakpoints =7176, 8072
            ]
            
            connect Junction1524 Junction102 as Connection1350
            
            
            connect Junction1525 Junction101 as Connection1353
            
            
            connect Junction19 Junction95 as Connection841
            [
                breakpoints =7528, 8072;7528, 8072
            ]
            
            connect Junction20 "Core Coupling 1.b_in" as Connection143
            
            
            connect Junction20 Junction24 as Connection140
            [
                breakpoints =7528, 8264
            ]
            
            connect Junction24 "C4.n_node" as Connection141
            [
                breakpoints =7456, 8264
            ]
            
            connect Junction59 Junction102 as Connection869
            [
                breakpoints =8280, 8328
            ]
            
            connect Junction93 Junction1523 as Connection1343
            [
                breakpoints =7224, 8072
            ]
            
            connect Junction93 "K2.a_in" as Connection835
            [
                breakpoints =7224, 8072
            ]
            
            connect Junction95 "C4.p_node" as Connection842
            [
                breakpoints =7456, 8072;7456, 8072
            ]
            
            connect Junction96 Junction95 as Connection845
            
            
            connect Junction98 Junction130 as Connection1034
            [
                breakpoints =8152, 8544;8152, 8544
            ]
            
            connect "K1.a_in" Junction93 as Connection834
            
            
            connect "K2.a_out" Junction96 as Connection846
            
            
            connect "L4.p_node" "CC2.b_out" as Connection1058
            
            
            connect "L5.p_node" "CC2.c_out" as Connection1060
            
            
            connect "L5.n_node" "I_grid_side_c.p_node" as Connection1337
            
            
            connect "L6.p_node" "CC2.a_out" as Connection1056
            
            
            connect "L7.n_node" Junction135 as Connection1054
            
            
            connect "L9.n_node" Junction101 as Connection866
            
            
            connect "MX1.b_in" "I_grid_side_b.n_node" as Connection879
            
            
            connect "MX2.a_out" A as Connection1347
            
            
            connect "MX2.b_out" B as Connection1348
            
            
            connect "MX2.c_out" C as Connection1346
            
            
            connect "MX2.c_in" Junction119 as Connection959
            
            
            connect "MX2.b_in" Junction121 as Connection966
            
            
            connect "MX2.a_in" Junction123 as Connection1339
            
            
            connect "R11.p_node" Junction132 as Connection1042
            
            
            connect "R12.p_node" Junction59 as Connection600
            
            
            connect "R13.p_node" Junction134 as Connection1051
            
            
            connect "R15.p_node" Junction128 as Connection1018
            
            
            connect "R15.n_node" Junction129 as Connection1022
            
            
            connect "R16.n_node" Junction113 as Connection920
            
            
            connect "R16.p_node" Junction119 as Connection961
            
            
            connect "R17.n_node" Junction113 as Connection922
            
            
            connect "R17.p_node" Junction121 as Connection968
            
            
            connect "R18.n_node" Junction114 as Connection925
            
            
            connect "R18.p_node" Junction123 as Connection975
            
            
            connect "R19.n_node" Junction96 as Connection844
            
            
            connect "R19.p_node" "K1.a_out" as Connection129
            
            
            connect "Three Phase Inverter1.pos_out" "Core Coupling 1.a_out" as Connection145
            
            
            connect "Three Phase Inverter1.b_in" "Igb.p_node" as Connection977
            
            
            connect "Three Phase Inverter1.c_in" "Igc.p_node" as Connection1338
            
            
            connect "V_temp_.p_node" Junction128 as Connection1016
            
            
            connect "V_temp_.n_node" Junction129 as Connection1020
            [
                breakpoints =9000, 8024
            ]
            
            connect "Va.p_node" Junction122 as Connection972
            
            
            connect "Vab_rms.n_node" Junction1524 as Connection1351
            
            
            connect "Vab_rms.p_node" Junction1525 as Connection1354
            
            
            connect "Vb.n_node" Junction108 as Connection901
            
            
            connect "Vb.p_node" Junction120 as Connection965
            
            
            connect "Vc.n_node" Junction112 as Connection917
            
            
            connect "Vc.p_node" Junction118 as Connection956
            
            
            connect "Vdc.p_node" Junction19 as Connection121
            
            
            connect "Vdc.n_node" Junction20 as Connection124
            
            
            connect "Vdc_.n_node" Junction24 as Connection142
            
            
            connect "Vdc_.p_node" "R14.p_node" as Connection125
            
            
            connect "Vg_AN.p_node" Junction132 as Connection1044
            
            
            connect "Vg_AN.n_node" Junction133 as Connection1046
            
            
            connect "Vg_BN.n_node" Junction133 as Connection1048
            
            
            connect "Vg_BN.p_node" Junction59 as Connection602
            
            
            connect "Vg_CN.n_node" Junction98 as Connection853
            
            
    
            
        }
        [
            position = 7864, 8480
            size = 176, 232
        ]
        component "core/Three Phase Two Winding Transformer" "Transformer_Load_2"{
            
            L1 = "L1_Tr_Load_2"
            L2 = "L2_Tr_Load_2"
            Lm = "60"
            Poc1 = "28566.0"
            Psc1 = "861.38093171"
            R1 = "R1_Tr_Load_2"
            R2 = "R2_Tr_Load_2"
            Rm = "20e3"
            Sn = "Sn_Tr_Load_2"
            V1 = "V1_Tr_Load_2"
            V2 = "V2_Tr_Load_2"
            clock_number = "1"
            current_vals_SI = "[0.20495848730044855, 85.39936970852024]"
            current_vals_pu = "[0.02999999999993434, 12.499999999997037]"
            f = "sys_freq"
            flux_vals_SI = "[62.12182581484032, 78.68764603213107]"
            flux_vals_pu = "[1.1999999999992208, 1.5199999999993996]"
            input = "SI"
            ioc1 = "19.0655273754"
            l1 = "0.0142127853733"
            l2 = "0.0142127853732"
            lm = "7.91831796746"
            r1 = "0.00215345232928"
            r2 = "0.00215345232928"
            rm = "7.00133025275"
            usc1 = "2.875"
            winding_1_connection = "D"
        }
        [
            position = 7568, 8896
            size = 126, 256
        ]
        
        component "core/Three Phase Two Winding Transformer" "Tr1"{
            
            L1 = "1e-5"
            L2 = "1e-5"
            Lm = "60"
            Poc1 = "571.32"
            Psc1 = "9.2462622632"
            R1 = "1e-5"
            R2 = "1e-5"
            Rm = "1e6"
            Sn = "Sn_EPC"
            V1 = "V1_EPC"
            V2 = "V2_EPC"
            clock_number = "1"
            coupling_type = "device"
            current_vals_SI = "[0.031353468707593965, 13.063945294802352]"
            current_vals_pu = "[0.004589241819730885, 1.912184091549656]"
            embedded_cpl = "true"
            f = "f_EPC"
            flux_vals_SI = "[31.187872049317743, 39.504637929225545]"
            flux_vals_pu = "[0.6024524548056571, 0.7631064427555065]"
            input = "SI"
            ioc1 = "12.6321750597"
            l1 = "1.31971966124e-06"
            l2 = "0.0174274740399"
            lm = "7.91831796746"
            r1 = "3.50066512637e-09"
            r2 = "4.62278106509e-05"
            rm = "350.066512637"
            usc1 = "1.74288550756"
            winding_1_connection = "D"
        }
        [
            position = 7576, 8480
            size = 126, 256
        ]
        
        
        component Subsystem "signal_jumper" {
            layout = dynamic
    
            
            component msr_voltage "Va1" {
                
                execution_rate = "Ts"
                sig_output = "True"
    	    
            }
            [
                position = 8312, 8224
                rotation = right
            ]
            
            component src_voltage_dsp_ctrl "Vsp1" {
                
    	    
            }
            [
                position = 8080, 8232
                rotation = right
                scale = -1, 1
            ]
            
            component sys_hil_marker "DM3" {
                
                hil_device_id = "1"
    	    
            }
            [
                position = 8256, 8072
            ]
            component "core/Single Phase Device Coupling" "Device Coupling 1"{
                
            }
            [
                position = 8184, 8224
                size = 32, 256
            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port "Out1" {
                
                position = right:1
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8376, 8224
            ]
            port "In2" {
                
                position = left:1
                kind = sp
                direction = out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 8016, 8232
            ]
            
            junction "Junction1524" pe
            [
                position = 8312, 8312
            ]
            
            junction "Junction1535" pe
            [
                position = 8256, 8128
            ]
            
            junction "Junction1536" pe
            [
                position = 8312, 8312
            ]
            
            connect "DM3.node" Junction1535 as Connection1381
            
            
            connect "Device Coupling 1.a_in" "Vsp1.p_node" as Connection1341
            
            
            connect "Device Coupling 1.b_in" "Vsp1.n_node" as Connection1342
            
            
            connect Junction1524 Junction1536 as Connection1348
            
            
            connect Junction1535 "Device Coupling 1.a_out" as Connection1383
            
            
            connect Junction1536 "Device Coupling 1.b_out" as Connection1380
            [
                breakpoints =8312, 8320;8216, 8320
            ]
            
            connect "Va1.n_node" Junction1524 as Connection1346
            
            
            connect "Va1.p_node" Junction1535 as Connection1382
            
            
            connect "Va1.out" Out1 as Connection1384
            
            
            connect "Vsp1.in" In2 as Connection1385
            
            
    
            
        }
        [
            position = 6184, 7856
            size = 48, 48
        ]
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        tag "From1" {
            value = "Vt_gen1"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 8328, 8080
            hide_name = True
            scale = -1, 1
        ]
        
        tag "Goto1" {
            value = "GCB Control"
            scope = global
            kind = sp
            direction = in
        }
        [
            position = 7432, 7840
            hide_name = True
        ]
        
        tag "Goto2" {
            value = "MCB Control"
            scope = global
            kind = sp
            direction = in
        }
        [
            position = 7432, 7720
            hide_name = True
        ]
        
        tag "Goto3" {
            value = "CB Status"
            scope = global
            kind = sp
            direction = in
        }
        [
            position = 7280, 7656
            rotation = left
            hide_name = True
        ]
        
        tag "From2" {
            value = "GCB Control"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 7528, 7856
            rotation = right
            hide_name = True
        ]
        
        tag "From3" {
            value = "MCB Control"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 7016, 7856
            rotation = right
            hide_name = True
        ]
        
        tag "From4" {
            value = "CB Status"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 7864, 7784
            rotation = right
            hide_name = True
        ]
        
        tag "From5" {
            value = "Reset"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 8328, 8032
            hide_name = True
            scale = -1, 1
        ]
        
        tag "From6" {
            value = "Reset"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 8008, 7856
            hide_name = True
            scale = -1, 1
        ]
        
        tag "Goto4" {
            value = "Reset"
            scope = global
            kind = sp
            direction = in
        }
        [
            position = 8240, 7888
            hide_name = True
            scale = -1, 1
        ]
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        junction "Junction109" pe
        [
            position = 7992, 7992
            size = 0, 0
        ]
        
        junction "Junction110" pe
        [
            position = 7992, 8128
            size = 0, 0
        ]
        
        junction "Junction1509" pe
        [
            position = 6968, 7968
        ]
        
        junction "Junction1519" pe
        [
            position = 7664, 8992
        ]
        
        junction "Junction1520" pe
        [
            position = 7680, 8896
        ]
        
        junction "Junction1521" pe
        [
            position = 7696, 8800
        ]
        
        junction "Junction1522" pe
        [
            position = 6768, 7968
        ]
        
        junction "Junction1525" pe
        [
            position = 6576, 8576
        ]
        
        junction "Junction1526" pe
        [
            position = 6576, 8160
        ]
        
        junction "Junction1527" pe
        [
            position = 6672, 8480
        ]
        
        junction "Junction1528" pe
        [
            position = 6672, 8064
        ]
        
        junction "Junction1532" pe
        [
            position = 6768, 8384
        ]
        
        junction "Junction1533" pe
        [
            position = 6768, 7968
        ]
        
        junction "Junction1534" pe
        [
            position = 7696, 8384
        ]
        
        junction "Junction1535" sp
        [
            position = 6104, 7856
        ]
        
        connect "B2_meas.P3" "MID.c_in" as Connection910
        
        
        connect "B2_meas.P1" "MID.a_in" as Connection912
        
        
        connect "B2_meas.P2" "MID.b_in" as Connection914
        
        
        connect "Battery Storage.A" Junction1534 as Connection1377
        
        
        connect "Battery Storage.B" "Tr1.sec_2" as Connection1376
        
        
        connect "CB3.c_in" "Ld1_grid_meas.P3" as Connection1120
        
        
        connect "CB3.b_in" "Ld1_grid_meas.P2" as Connection1122
        
        
        connect "CB3.a_in" "Ld1_grid_meas.P1" as Connection1124
        
        
        connect "CB4.a_out" "Ld2_meas.P4" as Connection1191
        
        
        connect "CB4.b_out" "Ld2_meas.P5" as Connection1192
        
        
        connect "CB4.c_out" "Ld2_meas.P6" as Connection1193
        
        
        connect "CB_control.MCB_control" Goto2 as Connection1279
        
        
        connect "CB_control.CB_status" Goto3 as Connection1296
        
        
        connect "Close GCB.out" "CB_control.Close_GCB" as Connection1299
        
        
        connect "Close MCB.out" "CB_control.Close_MCB" as Connection1297
        
        
        connect "DC0.c_out" "G1grid_meas.P6" as Connection1250
        
        
        connect "DC0.b_out" "G1grid_meas.P5" as Connection1252
        
        
        connect "DC0.a_in" Junction1522 as Connection1333
        
        
        connect "DC0.c_in" Junction1526 as Connection1350
        
        
        connect "DM0.node" Junction1522 as Connection1331
        
        
        connect "DM1.node" Junction1509 as Connection1232
        
        
        connect "Exciter.Vf_out" "Vfd.in" as Connection1214
        
        
        connect From1 "Exciter.Vt_in" as Connection1219
        
        
        connect From2 "GCB_gen.ctrl_in" as Connection1283
        
        
        connect From3 "MCB_gen1.ctrl_in" as Connection1284
        
        
        connect From4 "Governor_and_Diesel_Engine.Contactor_status" as Connection1286
        
        
        connect From5 "Exciter.Fuel_off" as Connection1291
        
        
        connect From6 "Governor_and_Diesel_Engine.reset_integrator" as Connection1293
        
        
        connect "Fuel signal off.out" "Subsystem1.Fuel Signal OFF" as Connection1212
        
        
        connect "G1_meas.P1" "Line2.a_in" as Connection1312
        
        
        connect "G1_meas.P3" "Line2.c_in" as Connection1313
        
        
        connect "G1_meas.P6" "MCB_gen1.c_out" as Connection889
        
        
        connect "G1_meas.P5" "MCB_gen1.b_out" as Connection891
        
        
        connect "G1_meas.P4" "MCB_gen1.a_out" as Connection893
        
        
        connect "G1grid_meas.P4" "DC0.a_out" as Connection1249
        
        
        connect "G1grid_meas.P3" "MCB_gen1.c_in" as Connection1251
        
        
        connect "G1grid_meas.P2" "MCB_gen1.b_in" as Connection1253
        
        
        connect "GCB_gen.b_in" "Line2.b_out" as Connection1254
        
        
        connect "GCB_gen.c_in" "Line2.c_out" as Connection1255
        
        
        connect "GCB_gen.a_in" "Line2.a_out" as Connection1256
        
        
        connect "GCB_gen.b_out" "Measurements.B" as Connection1257
        
        
        connect "Gen1.speed_out" "Governor_and_Diesel_Engine.w_meas_in" as Connection1294
        [
            breakpoints =7880, 7976;7880, 7968;7960, 7968
        ]
        
        connect "Gen1.c_in" "Measurements.c" as Connection1259
        
        
        connect "Gen1.a_in" "Measurements.a" as Connection1261
        
        
        connect Goto1 "CB_control.GCB_control" as Connection1278
        
        
        connect Goto4 "Subsystem1.Reset" as Connection1295
        
        
        connect "Governor_and_Diesel_Engine.T_out" "Gen1.load_in" as Connection1208
        [
            breakpoints =7768, 7968;7864, 7968
        ]
        
        connect Junction109 "Gen1.r_1" as Connection77
        [
            size = 0, 0
            breakpoints =7984, 7992;7936, 7992
        ]
        
        connect Junction109 "If.n_node" as Connection78
        
        
        connect Junction110 "Gen1.r_2" as Connection81
        [
            breakpoints =7992, 8128;7936, 8128
        ]
        
        connect Junction1509 "G1grid_meas.P1" as Connection1248
        
        
        connect Junction1519 "RL_Ld2.P3" as Connection1322
        
        
        connect Junction1520 "RL_Ld2.P2" as Connection1325
        
        
        connect Junction1521 "Transformer_Load_2.sec_1" as Connection1328
        
        
        connect Junction1525 "CC1.c_in" as Connection1369
        [
            breakpoints =6576, 8576;6576, 8576
        ]
        
        connect Junction1525 Junction1526 as Connection1352
        
        
        connect Junction1525 "Ld1_grid_meas.P6" as Connection1349
        [
            breakpoints =6576, 8576
        ]
        
        connect Junction1526 "Line5.c_out" as Connection1351
        [
            breakpoints =6576, 8160
        ]
        
        connect Junction1527 "CC1.b_in" as Connection1354
        [
            breakpoints =6672, 8480
        ]
        
        connect Junction1527 Junction1528 as Connection1357
        
        
        connect Junction1528 "DC0.b_in" as Connection1356
        [
            breakpoints =6672, 8064
        ]
        
        connect Junction1532 "CC1.a_in" as Connection1365
        [
            breakpoints =6768, 8384;6768, 8392
        ]
        
        connect Junction1532 Junction1533 as Connection1368
        
        
        connect Junction1533 Junction1522 as Connection1367
        [
            breakpoints =6768, 7968
        ]
        
        connect Junction1534 "DM2.node" as Connection1378
        [
            breakpoints =7696, 8384
        ]
        
        connect Junction1535 "MID.ctrl_in" as Connection1382
        
        
        connect "L1.n_node" "B2_meas.P4" as Connection1173
        
        
        connect "L2.n_node" "B2_meas.P5" as Connection1175
        
        
        connect "L3.n_node" "B2_meas.P6" as Connection1177
        
        
        connect "Ld1_grid_meas.P5" Junction1527 as Connection1353
        
        
        connect "Ld1_grid_meas.P4" Junction1532 as Connection1370
        [
            breakpoints =6768, 8384;6768, 8384;6768, 8384
        ]
        
        connect "Ld1_grid_meas.Iabc" "MID_Rly1.IABC" as Connection1179
        
        
        connect "Ld1_grid_meas.Vabc" "MID_Rly1.VABC_grid" as Connection1180
        
        
        connect "Ld1_meas.P6" "CB3.c_out" as Connection898
        
        
        connect "Ld1_meas.P4" "CB3.a_out" as Connection900
        
        
        connect "Ld1_meas.P5" "CB3.b_out" as Connection902
        
        
        connect "Ld1_meas.P1" "Line6.a_in" as Connection1133
        
        
        connect "Ld1_meas.P3" "Line6.c_in" as Connection1134
        
        
        connect "Ld1_meas.Vabc" "MID_Rly1.VABC_load" as Connection1181
        
        
        connect "Ld2_grid_meas.P1" "CB4.a_in" as Connection1188
        
        
        connect "Ld2_grid_meas.P2" "CB4.b_in" as Connection1189
        
        
        connect "Ld2_grid_meas.P3" "CB4.c_in" as Connection1190
        
        
        connect "Ld2_grid_meas.P4" "CC1.a_out" as Connection1185
        
        
        connect "Ld2_grid_meas.P5" "CC1.b_out" as Connection1186
        
        
        connect "Ld2_grid_meas.P6" "CC1.c_out" as Connection1187
        
        
        connect "Ld2_grid_meas.Iabc" "MID_Rly2.IABC" as Connection1305
        
        
        connect "Ld2_grid_meas.Vabc" "MID_Rly2.VABC_grid" as Connection1306
        
        
        connect "Ld2_meas.P3" "Line7.c_in" as Connection1194
        
        
        connect "Ld2_meas.P2" "Line7.b_in" as Connection1195
        
        
        connect "Ld2_meas.P1" "Line7.a_in" as Connection1196
        
        
        connect "Ld2_meas.Vabc" "MID_Rly2.VABC_load" as Connection1197
        
        
        connect "Line2.b_in" "G1_meas.P2" as Connection1311
        
        
        connect "Line5.b_out" Junction1528 as Connection1355
        
        
        connect "Line5.a_out" Junction1533 as Connection1366
        [
            breakpoints =6576, 7968
        ]
        
        connect "Line5.b_in" "PCC_meas.P2" as Connection1263
        
        
        connect "Line5.c_in" "PCC_meas.P3" as Connection1265
        [
            breakpoints =6264, 8080;6264, 8160
        ]
        
        connect "Line6.b_in" "Ld1_meas.P2" as Connection1132
        
        
        connect "Line6.c_out" "Tr1.prm_3" as Connection1374
        [
            breakpoints =7472, 8496;7472, 8576
        ]
        
        connect "MCB_gen1.a_in" Junction1509 as Connection1230
        
        
        connect "MID.c_out" "PCC_meas.P6" as Connection875
        
        
        connect "MID.a_out" "PCC_meas.P4" as Connection877
        
        
        connect "MID_Rly.Brk_cmd" Junction1535 as Connection1381
        
        
        connect "MID_Rly1.Brk_cmd" "CB3.ctrl_in" as Connection1178
        
        
        connect "MID_Rly2.Brk_cmd" "CB4.ctrl_in" as Connection1182
        
        
        connect "MID_fb_.in" "signal_jumper.Out1" as Connection1380
        
        
        connect "Measurements.C" "GCB_gen.c_out" as Connection1260
        
        
        connect "Measurements.A" "GCB_gen.a_out" as Connection1262
        
        
        connect "Measurements.b" "Gen1.b_in" as Connection1258
        
        
        connect "Open GCB.out" "CB_control.Open_GCB" as Connection1298
        
        
        connect "Open MCB.out" "CB_control.Open_MCB" as Connection1300
        
        
        connect "PCC_meas.P1" "Line5.a_in" as Connection1264
        
        
        connect "PCC_meas.P5" "MID.b_out" as Connection874
        
        
        connect "P_control_loop.Delta_w_out" "Governor_and_Diesel_Engine.Delta_w_in" as Connection1210
        
        
        connect "Q_control_loop.Delta_V_out" "Exciter.Delta_V_in" as Connection1215
        
        
        connect "R1.n_node" "L1.p_node" as Connection1172
        
        
        connect "R2.n_node" "L2.p_node" as Connection1174
        
        
        connect "R3.n_node" "L3.p_node" as Connection1176
        
        
        connect "RL_Ld2.P1" Junction1521 as Connection1327
        
        
        connect "RL_Ld3.P1" "SW.a_out" as Connection941
        
        
        connect "RL_Ld3.P2" "SW.b_out" as Connection942
        
        
        connect "RL_Ld3.P3" "SW.c_out" as Connection943
        
        
        connect "SW.c_in" Junction1519 as Connection1323
        
        
        connect "SW.b_in" Junction1520 as Connection1326
        
        
        connect "SW.a_in" Junction1521 as Connection1329
        
        
        connect "Starter.out" "Subsystem1.Starter" as Connection1213
        
        
        connect "Tr1.sec_3" "Battery Storage.C" as Connection1375
        
        
        connect "Tr1.sec_1" Junction1534 as Connection1379
        
        
        connect "Tr1.prm_1" "Line6.a_out" as Connection1372
        
        
        connect "Tr1.prm_2" "Line6.b_out" as Connection1373
        
        
        connect "Transformer_Load_2.sec_3" Junction1519 as Connection1321
        
        
        connect "Transformer_Load_2.sec_2" Junction1520 as Connection1324
        
        
        connect "Transformer_Load_2.prm_1" "Line7.a_out" as Connection1141
        
        
        connect "Transformer_Load_2.prm_2" "Line7.b_out" as Connection1142
        
        
        connect "Transformer_Load_2.prm_3" "Line7.c_out" as Connection1143
        
        
        connect "Vfd.p_node" "If.p_node" as Connection212
        
        
        connect "Vfd.n_node" Junction110 as Connection213
        
        
        connect "Vfield.p_node" Junction109 as Connection214
        
        
        connect "Vfield.n_node" Junction110 as Connection215
        
        
        connect "Vs1.a_node" "R1.p_node" as Connection1166
        
        
        connect "Vs1.b_node" "R2.p_node" as Connection1168
        
        
        connect "Vs1.c_node" "R3.p_node" as Connection1170
        
        
        connect "signal_jumper.In2" Junction1535 as Connection1383
        
        

        
    }

    
    
    default {
        
        cpl_spc_1ph {
            snb_type_i = "none"
            R1 = "100000.0"
            C1 = "1e-06"
            C2 = "1e-06"
            fixed_snb_i = "false"
            snb_type_u = "none"
            R2 = "0.1"
            L1 = "0.1"
            L2 = "0.1"
            fixed_snb_u = "false"
        }
        
        cpl_spc_3ph {
            snb_type_i = "none"
            R1 = "100e3"
            C1 = "1e-06"
            C2 = "1e-06"
            fixed_snb_i = "false"
            snb_type_u = "none"
            R2 = "0.1"
            L1 = "0.1"
            L2 = "0.1"
            fixed_snb_u = "false"
            cpl_connection = "star"
        }
        
        ctc_spst {
            ctrl_src = "Digital input"
            Sa = "1"
            Sa_logic = "active high"
            execution_rate = "inherit"
            on_delay = "0"
            off_delay = "0"
            initial_state = "off"
            switching = "any current"
            spc_nb = "0"
            ctc_nb = "0"
            pe_connection = "not_defined"
            ctc_name = "not_defined"
            enb_sw_ctrl = "True"
        }
        
        ctc_tpst {
            ctrl_src = "Digital input"
            Sa = "1"
            Sa_logic = "active high"
            execution_rate = "inherit"
            initial_state = "off"
            on_delay = "0"
            off_delay = "0"
            spc_nb = "0"
            ctc_nb = "0"
            pe_connection = "not_defined"
            ctc_name = "not_defined"
        }
        
        gen_DC1A_exciter {
            Tr = "0.020"
            Tb = "0"
            Tc = "0"
            Ka = "300"
            Ta = "0.001"
            VRmax = "11.5"
            VRmin = "-11.5"
            Te = "0.1"
            Ke = "1"
            Kf = "0.001"
            Tf = "0.1"
            initial_terminal_voltage = "0"
            initial_field_voltage = "0"
            disable_Vt_transducer = "True"
            disable_fdbck_stab = "True"
            start_time = "10"
            execution_rate = "inherit"
        }
        
        gen_PQ_transform {
            filter_order = "first order"
            filter_cutoff_Hz = "30"
            initial_filter_input = "0"
            initial_filter_output = "0"
            execution_rate = "inherit"
        }
        
        gen_abs {
            execution_rate = "inherit"
        }
        
        gen_bus_join {
            inputs = "2"
            execution_rate = "inherit"
        }
        
        gen_bus_split {
            outputs = "2"
            execution_rate = "inherit"
        }
        
        gen_c_function {
            in_terminal_properties = "real in;"
            out_terminal_properties = "real out;"
            no_feed_inputs = ""
            no_feed_outputs = ""
            output_fnc = ""
            update_fnc = ""
            init_fnc = ""
            global_variables = ""
            parameters = ""
            execution_rate = "inherit"
        }
        
        gen_delay {
            del_length = "2"
            init_value = "0"
            signal_out_type = "inherit"
            execution_rate = "inherit"
        }
        
        gen_digital_probe {
            override_signal_name = "False"
            signal_name = ""
            addr = "0"
            execution_rate = "inherit"
        }
        
        gen_gain {
            gain = "1"
            multiplication = "Element-wise(K.*u)"
            execution_rate = "inherit"
        }
        
        gen_integrator {
            show_reset = "none"
            show_init_condition = "internal"
            init_value = "0"
            limit_output = "False"
            limit_upper = "inf"
            limit_lower = "-inf"
            show_state = "False"
            state_port_type = "inherit"
            execution_rate = "inherit"
        }
        
        gen_logic_op {
            operator = "AND"
            inputs = "2"
            execution_rate = "inherit"
        }
        
        gen_math_fnc {
            mathematical_fn = "exponential"
            execution_rate = "inherit"
        }
        
        gen_pid_controller {
            controller_type = "PID"
            kp = "1"
            ki = "1"
            kd = "0"
            filt_coef = "100"
            int_init_value = "0"
            filt_init_value = "0"
            enb_output_limit_out = "False"
            upper_sat_lim = "1"
            lower_sat_lim = "-1"
            enb_anti_windup_out = "False"
            signal_out_type = "inherit"
            execution_rate = "inherit"
        }
        
        gen_pll_three_phs {
            initial_filter_output = "60"
            wn = "157.0796"
            zeta = "0.707"
            initial_rt_lim_output = "60"
            rate_high = "12"
            rate_low = "-12"
            initial_pid_output = "376.99111843"
            kp = "100"
            ki = "3200"
            kd = "1"
            N = "714.2857"
            wn_LPFdq = "62.83185307"
            execution_rate = "inherit"
        }
        
        gen_probe {
            addr = "0"
            override_signal_name = "False"
            signal_name = ""
            signal_type = "generic"
            execution_rate = "inherit"
        }
        
        gen_product {
            signs = "2"
            execution_rate = "inherit"
        }
        
        gen_rel_op {
            relational_op = "=="
            execution_rate = "inherit"
        }
        
        gen_rms_value {
            op_mode = "PLL based"
            frequency = "50"
            period_timeout = "0.5"
            execution_rate = "inherit"
        }
        
        gen_sr_ff {
            init_value = "0"
            execution_rate = "inherit"
        }
        
        gen_sum {
            signs = "2"
            execution_rate = "inherit"
        }
        
        gen_terminator {
            execution_rate = "inherit"
        }
        
        gen_transport_delay {
            time_delay = "0.1"
            init_value = "0"
            signal_out_type = "inherit"
            execution_rate = "inherit"
        }
        
        gen_z_domain_transfer {
            b_coeff = "[1]"
            a_coeff = "[1,-1]"
            init_states = "0"
            signal_out_type = "inherit"
            execution_rate = "inherit"
        }
        
        mchn_wrsync {
            Rs = "1.62"
            Lls = "0.004527"
            Lmd = "0.1086"
            Lmq = "0.1086"
            Rf = "1.208"
            Llfd = "0.01132"
            Rkd = "3.142"
            Rkq = "4.772"
            Llkd = "0.007334"
            Llkq = "0.01015"
            Ns_div_Nfd = "1.0"
            Ns_div_Nkd = "1.0"
            Ns_div_Nkq = "1.0"
            pms = "2"
            star_delta = "star"
            Jm = "0.0923"
            friction_coeff = "0"
            unconstrained_angle = "disabled"
            load_src = "Control panel / external"
            ext_mdl_load_type = "torque"
            load_ai_pin_addr = "1"
            load_ai_offset = "0"
            load_ai_gain = "1"
            enc_ppr = "1024"
            res_pole_pairs = "1"
            res_carr_source = "internal"
            res_int_carr_f = "5e+3"
            res_ai_pin_addr = "1"
            res_ai_offset = "0"
            res_ai_gain = "1"
            theta_ab = "-pi/2"
            Rsnb_rotor = "inf"
            Rsnb_stator = "inf"
            enb_sig_out = "False"
            execution_rate = "100e-6"
            machine_id = "0"
            me_speed_out_addr = "0"
            el_torque_out_addr = "0"
        }
        
        msr_current {
            bw_limit = "False"
            frequency = "10e3"
            comparator_enable = "False"
            operator = "greater"
            threshold = "0"
            cmp_abs_value = "False"
            feed_forward = "false"
            sig_output = "False"
            execution_rate = "100e-6"
            addr = "0"
            nd_msr_estimation = "false"
            dev_cpl_msr = "false"
            host_device = "0"
            output_to_device = "0"
            dev_cpl_index = "0"
            dev_cpl_var_nb = "0"
            visible = "True"
            override_signal_name = "False"
            signal_name = ""
        }
        
        msr_phasor_3ph {
            period_timeout = "0.5"
            execution_rate = "inherit"
        }
        
        msr_voltage {
            bw_limit = "False"
            frequency = "10e3"
            comparator_enable = "False"
            operator = "greater"
            threshold = "0"
            cmp_abs_value = "False"
            feed_forward = "false"
            sig_output = "False"
            execution_rate = "100e-6"
            addr = "0"
            nd_msr_estimation = "false"
            dev_cpl_msr = "false"
            host_device = "0"
            output_to_device = "0"
            dev_cpl_index = "0"
            dev_cpl_var_nb = "0"
            visible = "True"
            override_signal_name = "False"
            signal_name = ""
        }
        
        pas_capacitor {
            capacitance = "1e-6"
            initial_voltage = "0"
        }
        
        pas_inductor {
            inductance = "1e-3"
            initial_current = "0.0"
        }
        
        pas_resistor {
            resistance = "1"
        }
        
        src_constant {
            value = "1"
            signal_type = "real"
            execution_rate = "100e-6"
        }
        
        src_cp_input {
            addr = "0"
            category = "User defined"
            group = "Example"
            format = "real"
            override_signal_name = "False"
            signal_name = ""
            signal_type = "real"
            widget_type = "real"
            widget_label = "CP_in"
            min = "-1e6"
            max = "1e6"
            def_value = "0"
            unit = " "
            execution_rate = "100e-6"
        }
        
        src_digital_input {
            addr = "1"
            invert = "false"
            signal_type = "uint"
            execution_rate = "100e-6"
        }
        
        src_voltage {
            dev_cpl_msr = "false"
            host_device = "0"
            input_from_device = "0"
            dev_cpl_index = "0"
            dev_cpl_var_nb = "0"
            snb_type_u = "none"
            R2 = "0.1"
            L1 = "0.1"
            fixed_snb_u = "false"
            cpd_visible = "True"
        }
        
        src_voltage_dsp_ctrl {
            addr = "0"
            spc_nb = "0"
            execution_rate = "inherit"
        }
        
        src_voltage_ext {
            ai_pin_addr = "1"
            ai_offset = "0.0"
            ai_gain = "1.0"
            visible = "True"
        }
        
        sys_hil_marker {
            hil_device_id = "0"
            override_hw_settings = "False"
            hw_configuration_id = "1"
            override_sim_settings = "False"
            sim_method = "exact"
            sim_step = "auto"
            ss_calc_method = "systematic elimination"
            enb_pole_shift = "True"
            enb_gds_oversampling = "True"
            show_modes = "False"
            cpl_stb = "False"
            enb_dep_sw_detect = "False"
            override_user_sp_settings = "False"
            user_cpu_optimization_level = "high"
            code_section = "Internal Memory"
            data_section = "Internal Memory"
            override_sys_sp_settings = "False"
            system_cpu_optimization_level = "high"
            sys_sp_rate_1 = "100e-6"
            sys_sp_rate_2 = "50e-3"
        }
        
        sys_hil_sp_marker {
            hil_device_id = "0"
            override_hw_settings = "False"
            hw_configuration_id = "1"
            override_sim_settings = "False"
            sim_method = "exact"
            sim_step = "auto"
            ss_calc_method = "systematic elimination"
            enb_pole_shift = "True"
            enb_gds_oversampling = "True"
            show_modes = "False"
            cpl_stb = "False"
            enb_dep_sw_detect = "False"
            override_user_sp_settings = "False"
            user_cpu_optimization_level = "high"
            code_section = "Internal Memory"
            data_section = "Internal Memory"
            override_sys_sp_settings = "False"
            system_cpu_optimization_level = "high"
            sys_sp_rate_1 = "100e-6"
            sys_sp_rate_2 = "50e-3"
            execution_rate = "inherit"
        }
        
        sys_mp_signal_switch {
            number_of_input_terminals = "1"
            execution_rate = "inherit"
        }
        
        sys_signal_switch {
            criterion = "ctrl >= threshold"
            threshold = "0"
            execution_rate = "inherit"
        }
        
        sys_spc_marker {
            marker_id = "id0"
        }
        
        tm_delay {
            init_value = "0"
            signal_out_type = "inherit"
            execution_rate = "inherit"
        }
        
        "core/ModBus Device" {
            configuration = "config1"
            execution_rate = "inherit"
        }
        
        "core/Three Phase Device Coupling" {
            snb_type_i = "R1"
            R1 = "inf"
            C1 = "1e-06"
            C2 = "1e-06"
            fixed_snb_i = "True"
            snb_type_u = "R2"
            R2 = "0.0"
            L1 = "0.1"
            L2 = "0.1"
            fixed_snb_u = "True"
        }
        
        "core/Three Phase Two Winding Transformer" {
            input = "SC and OC tests"
            core_sat = "False"
            Sn = "160000.0"
            f = "50.0"
            V1 = "10000.0"
            V2 = "400.0"
            usc1 = "4.0"
            Psc1 = "2350.0"
            ioc1 = "0.7"
            Poc1 = "460.0"
            R1 = "4.58984375"
            L1 = ".0370093710364"
            R2 = ".00734375"
            L2 = "5.92149936583e-05"
            Rm = "217391.304348"
            Lm = "311.709196788"
            flux_vals_SI = "[1910.3, 2419.7]"
            current_vals_SI = "[0.66653, 277.72]"
            r1 = ".00734375"
            l1 = ".0186029389059"
            r2 = ".00734375"
            l2 = ".0186029389059"
            rm = "347.826086957"
            lm = "156.68213163"
            flux_vals_pu = "[1.2, 1.52]"
            current_vals_pu = "[0.0024, 1]"
            winding_1_connection = "Y"
            winding_2_connection = "Y"
            clock_number = "0"
            embedded_cpl = "false"
            coupling_type = "core"
            Rshunt = "inf"
        }
        
        "core/Transmission Line" {
            model = "RL coupled"
            num_of_phases = "3"
            model_def = "Geometry"
            unit_sys = "imperial"
            Length_metric = "100.0"
            Length_miles = "62.1371"
            Frequency = "60.0"
            Earth_resistivity = "100"
            X_axis_1_metric = "-1.0668"
            Y_axis_1_metric = "8.5344"
            GMR_1_metric = "0.00743712"
            RD_1_metric = "0.009156192"
            Rs_1_metric = "0.19013958482462417"
            X_axis_1_imperial = "-3.5"
            Y_axis_1_imperial = "28.0"
            GMR_1_imperial = "0.0244"
            RD_1_imperial = "0.03004"
            Rs_1_imperial = "0.306"
            X_axis_2_metric = "-0.3048"
            Y_axis_2_metric = "8.5344"
            GMR_2_metric = "0.00743712"
            RD_2_metric = "0.009156192"
            Rs_2_metric = "0.19013958482462417"
            X_axis_2_imperial = "-1.0"
            Y_axis_2_imperial = "28.0"
            GMR_2_imperial = "0.0244"
            RD_2_imperial = "0.03004"
            Rs_2_imperial = "0.306"
            X_axis_3_metric = "1.0668"
            Y_axis_3_metric = "8.5344"
            GMR_3_metric = "0.00743712"
            RD_3_metric = "0.009156192"
            Rs_3_metric = "0.19013958482462417"
            X_axis_3_imperial = "3.5"
            Y_axis_3_imperial = "28.0"
            GMR_3_imperial = "0.0244"
            RD_3_imperial = "0.03004"
            Rs_3_imperial = "0.306"
            X_axis_4_metric = "0.1524"
            Y_axis_4_metric = "7.3152"
            GMR_4_metric = "0.00248"
            RD_4_metric = "0.00714"
            Rs_4_metric = "0.3678"
            X_axis_4_imperial = "0.5"
            Y_axis_4_imperial = "24.0"
            GMR_4_imperial = "0.00814"
            RD_4_imperial = "0.02345"
            Rs_4_imperial = "0.592"
            R_metric = "[[0.2481, 0.0579, 0.0579], [0.0579, 0.2481, 0.0579], [0.0579, 0.0579, 0.2481]]"
            R_imperial = "[[0.4, 0.093, 0.093], [0.093, 0.4, 0.093], [0.093, 0.093, 0.4]]"
            L_metric = "[[0.00233, 0.00140, 0.00140], [0.00140, 0.00233, 0.00140], [0.00140, 0.00140, 0.00233]]"
            L_imperial = "[[0.00374, 0.0022, 0.0022], [0.0022, 0.00374, 0.0022], [0.0022, 0.0022, 0.00374]]"
            C_metric = "[[8.546e-9, 0, 0], [0, 8.546e-9, 0], [0, 0, 8.546e-9]]"
            C_imperial = "[[0.00233, 0.00140, 0.00140], [0.00140, 0.00233, 0.00140], [0.00140, 0.00140, 0.00233]]"
            R_sequence_metric = "[[0.3864, 0, 0],[0, 0.01273, 0], [0, 0, 0.01273]]"
            L_sequence_metric = "[[4.1264e-3, 0, 0],[0, 0.9337e-3, 0], [0, 0, 0.9337e-3]]"
            C_sequence_metric = "[[7.751e-9, 0, 0],[0, 12.74e-9, 0], [0, 0, 12.74e-9]]"
            R_sequence_imperial = "[[0.6218, 0, 0],[0, 0.0204, 0], [0, 0, 0.0204]]"
            L_sequence_imperial = "[[0.00664, 0, 0],[0, 0.00150, 0], [0, 0, 0.00150]]"
            C_sequence_imperial = "[[1.247e-8, 0, 0],[0, 2.0503e-8, 0], [0, 0, 2.0503e-8]]"
            import_from_geometry = "Import from Geometry"
            import_from_RLC = "Import from RLC"
        }
        
        "core/Voltage RMS" {
            op_mode = "PLL based"
            frequency = "50"
            feed_forward = "false"
        }
        
        "core/Single Phase Device Coupling" {
            snb_type_i = "R1"
            R1 = "inf"
            C1 = "1e-06"
            C2 = "1e-06"
            fixed_snb_i = "True"
            snb_type_u = "R2"
            R2 = "0.0"
            L1 = "0.1"
            L2 = "0.1"
            fixed_snb_u = "True"
        }
        
        "core/Rate Transition" {
            init_value = "0.0"
            execution_rate = "100e-6"
        }
        
        "core/Current RMS" {
            op_mode = "PLL based"
            frequency = "50"
            feed_forward = "false"
        }
        
        "core/Three Phase Inverter" {
            ctrl_src = "Digital inputs"
            carrier_freq = "10000.0"
            carr_ph_offset = "0.0"
            d_time = "5e-6"
            ref_sig_min_max = "[-1.0, 1.0]"
            execution_rate = "inherit"
            Sa_top = "1"
            Sa_top_logic = "active high"
            Sa_bot = "2"
            Sa_bot_logic = "active high"
            Sb_top = "3"
            Sb_top_logic = "active high"
            Sb_bot = "4"
            Sb_bot_logic = "active high"
            Sc_top = "5"
            Sc_top_logic = "active high"
            Sc_bot = "6"
            Sc_bot_logic = "active high"
            delay_enabled = "False"
            fixed_delay = "1e-6"
            var_delay_lut = "[-10.0, 1e-6, 10.0, 1e-6]"
            preview_var_delay = "Preview"
            thrm_enabled = "False"
            number_of_thermal_models = "1"
            cooling_input = "1"
            thrm1 = "T1"
            Cth_1 = "1.0"
            Rth0_1 = "1e-2"
            Rth_Vin_1 = "0.0"
            sensors_enabled_1 = "False"
            lut_data_1 = "[-50.0, -5.0, 0.0, 0.0, 50.0, 5.0]"
            preview_sensor_1_lut = "Preview"
            thrm2 = "T2"
            Cth_2 = "1.0"
            Rth0_2 = "1e-2"
            Rth_Vin_2 = "0.0"
            sensors_enabled_2 = "False"
            lut_data_2 = "[-50.0, -5.0, 0.0, 0.0, 50.0, 5.0]"
            preview_sensor_2_lut = "Preview"
            thrm3 = "T3"
            Cth_3 = "1.0"
            Rth0_3 = "1e-2"
            Rth_Vin_3 = "0.0"
            sensors_enabled_3 = "False"
            lut_data_3 = "[-50.0, -5.0, 0.0, 0.0, 50.0, 5.0]"
            preview_sensor_3_lut = "Preview"
            thrm4 = "T4"
            Cth_4 = "1.0"
            Rth0_4 = "1e-2"
            Rth_Vin_4 = "0.0"
            sensors_enabled_4 = "False"
            lut_data_4 = "[-50.0, -5.0, 0.0, 0.0, 50.0, 5.0]"
            preview_sensor_4_lut = "Preview"
            thrm5 = "T5"
            Cth_5 = "1.0"
            Rth0_5 = "1e-2"
            Rth_Vin_5 = "0.0"
            sensors_enabled_5 = "False"
            lut_data_5 = "[-50.0, -5.0, 0.0, 0.0, 50.0, 5.0]"
            preview_sensor_5_lut = "Preview"
            Sa_top_I = "False"
            Sa_bot_I = "False"
            Sb_top_I = "False"
            Sb_bot_I = "False"
            Sc_top_I = "False"
            Sc_bot_I = "False"
            _control_property = "all high"
        }
    }

    CODE model_init
        # Numpy module is imported as 'np'
        # Scipy module is imported as 'sp'
        
        # DSP Execution Rate
        
        Ts = 200e-6
        Tsec = 2*Ts
        
        # System Specs
        sys_freq = 60.0
        sys_w    = 2.0*np.pi*sys_freq
        
        #EPC parameters
        #=================
        L_inv_EPC = 0.133e-3 #7.6573e-5 
        L_grid_EPC = 0.08e-3 #4.5944e-5
        
         # EPC Transformer Specs - connection Dyn
        Sn_EPC = 200e3     # VA
        f_EPC  = 60.0      # Hz
        V1_EPC = 13.8e3    # V
        V2_EPC = 208       # V
        z_EPC  = .0575     # impedance (pu)
        k_EPC  = 6.6       # X over R ratio
        
        Z1b_EPC = 3.0*V1_EPC**2/Sn_EPC
        Z2b_EPC = V2_EPC**2/Sn_EPC
        r1_EPC  = z_EPC/2.0/np.sqrt(1+k_EPC**2)
        r2_EPC  = r1_EPC
        l1_EPC  = k_EPC*r1_EPC
        l2_EPC  = l1_EPC
        
        R1_EPC = r1_EPC*Z1b_EPC
        R2_EPC = r2_EPC*Z2b_EPC
        L1_EPC = l1_EPC*Z1b_EPC
        L2_EPC = l2_EPC*Z2b_EPC
        #====End EPC====
        
        
        # Transmission Line Specs
        mi2km = 1.0/1.60934
        r1_11 = .2685*mi2km
        x1_11 = .207*mi2km
        r0_11 = 2.1408*mi2km
        x0_11 = 1.582*mi2km
        b_11  = 308.7587e-6*mi2km
        l1_11 = x1_11/sys_w
        l0_11 = x0_11/sys_w
        c1_11 = b_11/sys_w
        c0_11 = c1_11
        r_11  = [[r0_11,0.0,0.0],[0.0,r1_11,0.0],[0.0,0.0,r1_11]]
        l_11  = [[l0_11,0.0,0.0],[0.0,l1_11,0.0],[0.0,0.0,l1_11]]
        c_11  = [[c0_11,0.0,0.0],[0.0,c1_11,0.0],[0.0,0.0,c1_11]]
        
        r1_13 = .1206*mi2km
        x1_13 = .1878*mi2km
        r0_13 = 1.8354*mi2km
        x0_13 = 1.2165*mi2km
        b_13  = 384.0177e-6*mi2km
        l1_13 = x1_13/sys_w
        l0_13 = x0_13/sys_w
        c1_13 = b_13/sys_w
        c0_13 = c1_13
        r_13  = [[r0_13,0.0,0.0],[0.0,r1_13,0.0],[0.0,0.0,r1_13]]
        l_13  = [[l0_13,0.0,0.0],[0.0,l1_13,0.0],[0.0,0.0,l1_13]]
        c_13  = [[c0_13,0.0,0.0],[0.0,c1_13,0.0],[0.0,0.0,c1_13]]
        
        # Transformers Specs
        Sn_Tr_Load_1       = 2.5e6    # VA
        V1_Tr_Load_1       = 13.8e3    # V
        V2_Tr_Load_1       = 480    # V
        z_Tr_Load_1        = 5.75/100.0    # pu
        x_over_r_Tr_Load_1 = 6.6
        r_Tr_Load_1 = z_Tr_Load_1/np.sqrt(1.0+x_over_r_Tr_Load_1**2.0)    # pu
        r1_Tr_Load_1 = r_Tr_Load_1/2.0
        r2_Tr_Load_1 = r_Tr_Load_1/2.0
        l_Tr_Load_1 = x_over_r_Tr_Load_1*r_Tr_Load_1    # pu
        l1_Tr_Load_1 = l_Tr_Load_1/2.0
        l2_Tr_Load_1 = l_Tr_Load_1/2.0
        
        Z1b = 3.0*V1_Tr_Load_1**2.0/Sn_Tr_Load_1
        Z2b = V2_Tr_Load_1**2.0/Sn_Tr_Load_1
        R1_Tr_Load_1 = r1_Tr_Load_1*Z1b/2.0
        R2_Tr_Load_1 = r2_Tr_Load_1*Z2b/2.0
        L1_Tr_Load_1 = l1_Tr_Load_1*Z1b/2.0/sys_w
        L2_Tr_Load_1 = l2_Tr_Load_1*Z2b/2.0/sys_w
        
        Sn_Tr_Load_2       = 200e3    # VA
        V1_Tr_Load_2       = 13.8e3    # V
        V2_Tr_Load_2       = 208    # V
        z_Tr_Load_2        = 5.75/100.0    # pu
        x_over_r_Tr_Load_2 = 6.6
        r_Tr_Load_2 = z_Tr_Load_2/np.sqrt(1.0+x_over_r_Tr_Load_2**2.0)    # pu
        r1_Tr_Load_2 = r_Tr_Load_2/2.0
        r2_Tr_Load_2 = r_Tr_Load_2/2.0
        l_Tr_Load_2 = x_over_r_Tr_Load_2*r_Tr_Load_2    # pu
        l1_Tr_Load_2 = l_Tr_Load_2/2.0
        l2_Tr_Load_2 = l_Tr_Load_2/2.0
        
        Z1b = 3.0*V1_Tr_Load_2**2.0/Sn_Tr_Load_2
        Z2b = V2_Tr_Load_2**2.0/Sn_Tr_Load_2
        R1_Tr_Load_2 = r1_Tr_Load_2*Z1b/2.0
        R2_Tr_Load_2 = r2_Tr_Load_2*Z2b/2.0
        L1_Tr_Load_2 = l1_Tr_Load_2*Z1b/2.0/sys_w
        L2_Tr_Load_2 = l2_Tr_Load_2*Z2b/2.0/sys_w
        
        # Battery Storage Specs
        L_inv = 0.133e-3 #7.6573e-5 
        L_grid = 0.08e-3 #4.5944e-5
        
        # Governor specs
        
        K = 10  # gain K
        T1 = 1.0E-4 # Time constant T1 of Electric Control Box
        T2 = 0.0 # Time constant T2 of Electric Control Box
        T3 = 0.5001 # Time constant T3 of Electric Control Box
        T4 = 0.025  # Time constant T4 of Actuator
        T5 = 0.0009  # Time constant T5 of Actuator
        T6 = 0.00574  # Time constant T6 of Actuator
        Pm0 = 0.0 #0.0005  # Initial value of Mechanic Power
        Tmax = 10 #1.1  # Max torque limit
        Tmin = 0  # Min torque limit
        Td = 0.024  # Engine time delay
        
        dummy = 1.0 + 2.0*T5/Ts
        coeff1 = (1.0 + 2.0*T4/Ts)/dummy
        coeff2 = (1.0 - 2.0*T4/Ts)/dummy
        coeff3 = 1.0
        coeff4 = (1.0 - 2.0*T5/Ts)/dummy
        numTF4d = [coeff1, coeff2]
        denTF4d = [coeff3, coeff4]
        
        dummy = 1.0 + 2.0*T6/Ts
        coeff1 = (1.0)/dummy
        coeff2 = (1.0)/dummy
        coeff3 = 1.0
        coeff4 = (1.0 - 2.0*T6/Ts)/dummy
        numTF3d = [coeff1, coeff2]
        denTF3d = [coeff3, coeff4]
        
        numTF1d = [(1.0+2.0*T3/Ts),2.0,(1.0-2.0*T3/Ts)]
        denTF1d = [(1.0+2.0*T1/Ts+4.0*T1*T2/(Ts**2)),(2.0-8.0*T1*T2/(Ts**2)),(4.0*T1*T2/(Ts**2)-2.0*T1/Ts+1)]
        
        # Synchronous machine specs from Simulink's 4 MVA machine in PU
        
        f = 60.0  # Synchronous speed
        pms = 2.0  # Number of mechanical pole pairs
        Sb_gen1 = 4.0e6  # Nominal/base power of machine in VA
        Vn_gen1 = 13800.0  # Machine terminal line to line rms voltage
        Rs_pu_gen1 = 0.008979  # Stator resistance per phase in pu
        Lls_pu_gen1 = 0.05  # Stator leakage inductance in pu
        Lmd_pu_gen1 = 2.35  # Direct-axis magnetizing inductance in pu
        Lmq_pu_gen1 = 1.72  # Quadrature-axis magnetizing inductance in pu
        Rf_pu_gen1 = 0.00206  # Field resistance in pu
        Llfd_pu_gen1 = 0.511  # Field leakage inductance in pu
        Rkd_pu_gen1 = 0.2826  # D-axis resistance in pu
        Rkq_pu_gen1 = 0.02545  # Q-axis resistance in pu
        Llkd_pu_gen1 = 3.738  # D-axis leakage inductance in pu
        Llkq_pu_gen1 = 0.2392  # Q-axis leakage inductance in pu
        Ns_fd_gen1 = 1.0  # Turn ratio between the stator and the field windings
        Ns_kd_gen1 = 1.0  # Turn ratio between stator and d-axis damper windings
        Ns_kq_gen1 = 1.0  # Turn ratio between stator and q-axis damper windings
        H_gen1 = 0.3468  # Inertia coefficient in seconds
        Fpu_gen1 = 0.009238  # Friction factor in pu
        
        # Base calculation
        
        Vb_gen1 = Vn_gen1*((2.0/3.0)**0.5)  # Nominal/base voltage of machine terminal in V (Peak line to neutral voltage)
        wb_gen1 = 2.0*np.pi*f  # Electrical angular speed base
        wmb_gen1 = wb_gen1/pms  # Mechanical angular speed base
        Zb_gen1 = (Vn_gen1*Vn_gen1)/Sb_gen1  # Impedance base
        Trq_b_gen1 = Sb_gen1/wmb_gen1  # Torque base
        Fb_gen1 = Trq_b_gen1/wmb_gen1  # Friction Factor base
        Lb_gen1 = Zb_gen1/wb_gen1  # Inductance base
        
        # Stator data in SI
        
        Rs_gen1 = Rs_pu_gen1*Zb_gen1
        Lls_gen1 = Lls_pu_gen1*Lb_gen1
        Lmd_gen1 = Lmd_pu_gen1*Lb_gen1
        Lmq_gen1 = Lmq_pu_gen1*Lb_gen1
        Rkd_gen1 = Rkd_pu_gen1*Zb_gen1
        Rkq_gen1 = Rkq_pu_gen1*Zb_gen1
        Llkd_gen1 = Llkd_pu_gen1*Lb_gen1
        Llkq_gen1 = Llkq_pu_gen1*Lb_gen1
        
        # Mechanical data in SI
        
        F_gen1 = Fpu_gen1*Fb_gen1  # Friction Factor in Nm.s
        J_gen1 = 2*H_gen1*Sb_gen1/(wmb_gen1*wmb_gen1)  # Inertia in kg.m2
        
        # Field base calculation
        
        Lsfd_gen1 = (2.0/3.0)*Lmd_gen1*(1.0/Ns_fd_gen1)  # Mutual inductance between stator and field
        ifn_gen1 = Vb_gen1/(Lsfd_gen1*wb_gen1)  # Nominal field current
        ifb_gen1 = ifn_gen1*Lmd_pu_gen1  # Field current base
        Vfb_gen1 = Sb_gen1/ifb_gen1  # Field voltage base
        Zfb_gen1 = Vfb_gen1/ifb_gen1  # Field impedance base
        Lfb_gen1 = Zfb_gen1/wb_gen1  # Field inductance base
        
        # Field data in SI
        
        Rf_gen1 = Rf_pu_gen1*Zfb_gen1  # Field resistance (Field side)
        Llfd_gen1 = Llfd_pu_gen1*Lfb_gen1  # Field inductance (Field side)
        Rf_prime_gen1 = Rf_gen1*(3.0/2.0)*(Ns_fd_gen1*Ns_fd_gen1)  # Field resistance referred to the stator side
        Llfd_prime_gen1 = Llfd_gen1*(3.0/2.0)*(Ns_fd_gen1*Ns_fd_gen1)  # Field inductance referred to the stator side
        
        # Exciter initialization
        
        Tr_gen1 = 1e-3  # Low pass filter time constant
        Ka_gen1 = 20.0  # Regulator gain
        Ta_gen1 = 2e-3  # Regulator time constant
        Ke_gen1 = 1.0  # Exciter constant
        Te_gen1 = 1e-3 #Exciter time constant
        Tb_gen1 = 0.0  # Transient gain reduction time constant b
        Tc_gen1 = 0.0  # Transient gain reduction time constant c
        Kf_gen1 = 0  # Damping filter gain
        Tf_gen1 = 1e-3  # Damping filter time constant
        Efmin_gen1 = -5.0 # 0.0 # Regulator output lower limit
        Efmax_gen1 = 5.0 #5.0  # Regulator output upper limit
        Vt0_gen1 = 0.0  # Initial terminal voltage
        Vf0_gen1 = 0.0  # Initial field voltage
        Const_gen1 = Vf0_gen1/Ka_gen1
        
        # Relay settings
        
        IOC_MID=7000.0;
        TOC_MID=600.0;
        VRMSLL_MID=13800.0
        
        IOC_CB3=7000.0;
        TOC_CB3=150.0;
        VRMSLL_CB3=13800.0
        
        IOC_CB4=7000.0;
        TOC_CB4=150.0;
        VRMSLL_CB4=13800.0
        
        freq = 60.0;
        bkr_cntrl_enable = 0
        bkr_cntrl_status = 1.0
        dV_threshold=0.05
        dF_threshold=0.5
        angle_threshold=12.0
        
        # Modbus Settings
        
        config1 = {
            "port": 502,
            "ip_addr": '10.1.10.244',
            "netmask": '255.255.255.0',
            "slave_id": 1,
            "coil_input_addresses": '1',
            "coil_output_addresses": '2',
            "discrete_input_addresses": '',
            "holding_register_input_addresses": '',
            "holding_register_output_addresses": '2000,2001',
            "input_register_adresses": '0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24'
        }
        config2 = {
          'port': 502,
          'ip_addr': '192.168.10.101',
          'netmask': '255.255.255.0',
          'slave_id': 1,
          'coil_input_addresses': '',
          'coil_output_addresses': '',
          'discrete_input_addresses': '',
          'holding_register_input_addresses': '',
          'holding_register_output_addresses': '2001,2002,2003',
          'input_register_adresses': '0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24'
        }
        config3 = {
          'port': 502,
          'ip_addr': '192.168.10.102',
          'netmask': '255.255.255.0',
          'slave_id': 1,
          'coil_input_addresses': '',
          'coil_output_addresses': '',
          'discrete_input_addresses': '',
          'holding_register_input_addresses': '',
          'holding_register_output_addresses': '2001,2002,2003',
          'input_register_adresses': '0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24'
        }
        config4 = {
            'port': 1050,
            'ip_addr': '192.168.10.30',
            'netmask': '255.255.255.0',
            'slave_id': 1,
            'coil_input_addresses': '',
            'coil_output_addresses': '',
            'discrete_input_addresses': '',
            'holding_register_input_addresses': '',
            'holding_register_output_addresses': '2000,2001',
            'input_register_adresses': '0,1,2,3,4'
        }
    ENDCODE
}